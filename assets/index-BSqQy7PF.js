(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var Gd={exports:{}},iu={},Kd={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function PE(){if(Xg)return Pe;Xg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,$={};function q(N,K,pe){this.props=N,this.context=K,this.refs=$,this.updater=pe||b}q.prototype.isReactComponent={},q.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function fe(){}fe.prototype=q.prototype;function me(N,K,pe){this.props=N,this.context=K,this.refs=$,this.updater=pe||b}var le=me.prototype=new fe;le.constructor=me,G(le,q.prototype),le.isPureReactComponent=!0;var we=Array.isArray,Ae=Object.prototype.hasOwnProperty,ve={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(N,K,pe){var Se,Re={},ke=null,Be=null;if(K!=null)for(Se in K.ref!==void 0&&(Be=K.ref),K.key!==void 0&&(ke=""+K.key),K)Ae.call(K,Se)&&!x.hasOwnProperty(Se)&&(Re[Se]=K[Se]);var Ue=arguments.length-2;if(Ue===1)Re.children=pe;else if(1<Ue){for(var Ke=Array(Ue),Rt=0;Rt<Ue;Rt++)Ke[Rt]=arguments[Rt+2];Re.children=Ke}if(N&&N.defaultProps)for(Se in Ue=N.defaultProps,Ue)Re[Se]===void 0&&(Re[Se]=Ue[Se]);return{$$typeof:i,type:N,key:ke,ref:Be,props:Re,_owner:ve.current}}function P(N,K){return{$$typeof:i,type:N.type,key:K,ref:N.ref,props:N.props,_owner:N._owner}}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function k(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(pe){return K[pe]})}var O=/\/+/g;function R(N,K){return typeof N=="object"&&N!==null&&N.key!=null?k(""+N.key):K.toString(36)}function ct(N,K,pe,Se,Re){var ke=typeof N;(ke==="undefined"||ke==="boolean")&&(N=null);var Be=!1;if(N===null)Be=!0;else switch(ke){case"string":case"number":Be=!0;break;case"object":switch(N.$$typeof){case i:case e:Be=!0}}if(Be)return Be=N,Re=Re(Be),N=Se===""?"."+R(Be,0):Se,we(Re)?(pe="",N!=null&&(pe=N.replace(O,"$&/")+"/"),ct(Re,K,pe,"",function(Rt){return Rt})):Re!=null&&(D(Re)&&(Re=P(Re,pe+(!Re.key||Be&&Be.key===Re.key?"":(""+Re.key).replace(O,"$&/")+"/")+N)),K.push(Re)),1;if(Be=0,Se=Se===""?".":Se+":",we(N))for(var Ue=0;Ue<N.length;Ue++){ke=N[Ue];var Ke=Se+R(ke,Ue);Be+=ct(ke,K,pe,Ke,Re)}else if(Ke=A(N),typeof Ke=="function")for(N=Ke.call(N),Ue=0;!(ke=N.next()).done;)ke=ke.value,Ke=Se+R(ke,Ue++),Be+=ct(ke,K,pe,Ke,Re);else if(ke==="object")throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Be}function Ut(N,K,pe){if(N==null)return N;var Se=[],Re=0;return ct(N,Se,"","",function(ke){return K.call(pe,ke,Re++)}),Se}function zt(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=pe)},function(pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=pe)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var $e={current:null},te={transition:null},ge={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:te,ReactCurrentOwner:ve};function se(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:Ut,forEach:function(N,K,pe){Ut(N,function(){K.apply(this,arguments)},pe)},count:function(N){var K=0;return Ut(N,function(){K++}),K},toArray:function(N){return Ut(N,function(K){return K})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Pe.Component=q,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=me,Pe.StrictMode=r,Pe.Suspense=p,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Pe.act=se,Pe.cloneElement=function(N,K,pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Se=G({},N.props),Re=N.key,ke=N.ref,Be=N._owner;if(K!=null){if(K.ref!==void 0&&(ke=K.ref,Be=ve.current),K.key!==void 0&&(Re=""+K.key),N.type&&N.type.defaultProps)var Ue=N.type.defaultProps;for(Ke in K)Ae.call(K,Ke)&&!x.hasOwnProperty(Ke)&&(Se[Ke]=K[Ke]===void 0&&Ue!==void 0?Ue[Ke]:K[Ke])}var Ke=arguments.length-2;if(Ke===1)Se.children=pe;else if(1<Ke){Ue=Array(Ke);for(var Rt=0;Rt<Ke;Rt++)Ue[Rt]=arguments[Rt+2];Se.children=Ue}return{$$typeof:i,type:N.type,key:Re,ref:ke,props:Se,_owner:Be}},Pe.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},Pe.createElement=S,Pe.createFactory=function(N){var K=S.bind(null,N);return K.type=N,K},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(N){return{$$typeof:d,render:N}},Pe.isValidElement=D,Pe.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:zt}},Pe.memo=function(N,K){return{$$typeof:_,type:N,compare:K===void 0?null:K}},Pe.startTransition=function(N){var K=te.transition;te.transition={};try{N()}finally{te.transition=K}},Pe.unstable_act=se,Pe.useCallback=function(N,K){return $e.current.useCallback(N,K)},Pe.useContext=function(N){return $e.current.useContext(N)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(N){return $e.current.useDeferredValue(N)},Pe.useEffect=function(N,K){return $e.current.useEffect(N,K)},Pe.useId=function(){return $e.current.useId()},Pe.useImperativeHandle=function(N,K,pe){return $e.current.useImperativeHandle(N,K,pe)},Pe.useInsertionEffect=function(N,K){return $e.current.useInsertionEffect(N,K)},Pe.useLayoutEffect=function(N,K){return $e.current.useLayoutEffect(N,K)},Pe.useMemo=function(N,K){return $e.current.useMemo(N,K)},Pe.useReducer=function(N,K,pe){return $e.current.useReducer(N,K,pe)},Pe.useRef=function(N){return $e.current.useRef(N)},Pe.useState=function(N){return $e.current.useState(N)},Pe.useSyncExternalStore=function(N,K,pe){return $e.current.useSyncExternalStore(N,K,pe)},Pe.useTransition=function(){return $e.current.useTransition()},Pe.version="18.3.1",Pe}var Zg;function Lf(){return Zg||(Zg=1,Kd.exports=PE()),Kd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function CE(){if(e_)return iu;e_=1;var i=Lf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,_){var v,E={},A=null,b=null;_!==void 0&&(A=""+_),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(b=p.ref);for(v in p)r.call(p,v)&&!a.hasOwnProperty(v)&&(E[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)E[v]===void 0&&(E[v]=p[v]);return{$$typeof:e,type:d,key:A,ref:b,props:E,_owner:o.current}}return iu.Fragment=t,iu.jsx=c,iu.jsxs=c,iu}var t_;function xE(){return t_||(t_=1,Gd.exports=CE()),Gd.exports}var Me=xE(),dc={},Qd={exports:{}},dn={},Wd={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function VE(){return n_||(n_=1,function(i){function e(te,ge){var se=te.length;te.push(ge);e:for(;0<se;){var N=se-1>>>1,K=te[N];if(0<o(K,ge))te[N]=ge,te[se]=K,se=N;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ge=te[0],se=te.pop();if(se!==ge){te[0]=se;e:for(var N=0,K=te.length,pe=K>>>1;N<pe;){var Se=2*(N+1)-1,Re=te[Se],ke=Se+1,Be=te[ke];if(0>o(Re,se))ke<K&&0>o(Be,Re)?(te[N]=Be,te[ke]=se,N=ke):(te[N]=Re,te[Se]=se,N=Se);else if(ke<K&&0>o(Be,se))te[N]=Be,te[ke]=se,N=ke;else break e}}return ge}function o(te,ge){var se=te.sortIndex-ge.sortIndex;return se!==0?se:te.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],_=[],v=1,E=null,A=3,b=!1,G=!1,$=!1,q=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(te){for(var ge=t(_);ge!==null;){if(ge.callback===null)r(_);else if(ge.startTime<=te)r(_),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(_)}}function we(te){if($=!1,le(te),!G)if(t(p)!==null)G=!0,zt(Ae);else{var ge=t(_);ge!==null&&$e(we,ge.startTime-te)}}function Ae(te,ge){G=!1,$&&($=!1,fe(S),S=-1),b=!0;var se=A;try{for(le(ge),E=t(p);E!==null&&(!(E.expirationTime>ge)||te&&!k());){var N=E.callback;if(typeof N=="function"){E.callback=null,A=E.priorityLevel;var K=N(E.expirationTime<=ge);ge=i.unstable_now(),typeof K=="function"?E.callback=K:E===t(p)&&r(p),le(ge)}else r(p);E=t(p)}if(E!==null)var pe=!0;else{var Se=t(_);Se!==null&&$e(we,Se.startTime-ge),pe=!1}return pe}finally{E=null,A=se,b=!1}}var ve=!1,x=null,S=-1,P=5,D=-1;function k(){return!(i.unstable_now()-D<P)}function O(){if(x!==null){var te=i.unstable_now();D=te;var ge=!0;try{ge=x(!0,te)}finally{ge?R():(ve=!1,x=null)}}else ve=!1}var R;if(typeof me=="function")R=function(){me(O)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Ut=ct.port2;ct.port1.onmessage=O,R=function(){Ut.postMessage(null)}}else R=function(){q(O,0)};function zt(te){x=te,ve||(ve=!0,R())}function $e(te,ge){S=q(function(){te(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){G||b||(G=!0,zt(Ae))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(te){switch(A){case 1:case 2:case 3:var ge=3;break;default:ge=A}var se=A;A=ge;try{return te()}finally{A=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,ge){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=A;A=te;try{return ge()}finally{A=se}},i.unstable_scheduleCallback=function(te,ge,se){var N=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?N+se:N):se=N,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,te={id:v++,callback:ge,priorityLevel:te,startTime:se,expirationTime:K,sortIndex:-1},se>N?(te.sortIndex=se,e(_,te),t(p)===null&&te===t(_)&&($?(fe(S),S=-1):$=!0,$e(we,se-N))):(te.sortIndex=K,e(p,te),G||b||(G=!0,zt(Ae))),te},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(te){var ge=A;return function(){var se=A;A=ge;try{return te.apply(this,arguments)}finally{A=se}}}}(Hd)),Hd}var r_;function DE(){return r_||(r_=1,Wd.exports=VE()),Wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function kE(){if(i_)return dn;i_=1;var i=Lf(),e=DE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function A(n){return p.call(E,n)?!0:p.call(v,n)?!1:_.test(n)?E[n]=!0:(v[n]=!0,!1)}function b(n,s,u,h){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function G(n,s,u,h){if(s===null||typeof s>"u"||b(n,s,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,u,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];q[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function me(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(fe,me);q[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(fe,me);q[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(fe,me);q[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function le(n,s,u,h){var f=q.hasOwnProperty(s)?q[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(G(s,u,f,h)&&(u=null),h||f===null?A(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):f.mustUseProperty?n[f.propertyName]=u===null?f.type===3?!1:"":u:(s=f.attributeName,h=f.attributeNamespace,u===null?n.removeAttribute(s):(f=f.type,u=f===3||f===4&&u===!0?"":""+u,h?n.setAttributeNS(h,s,u):n.setAttribute(s,u))))}var we=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ae=Symbol.for("react.element"),ve=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),Ut=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),te=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,N;function K(n){if(N===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var pe=!1;function Se(n,s){if(!n||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(U){var h=U}Reflect.construct(n,[],s)}else{try{s.call()}catch(U){h=U}n.call(s.prototype)}else{try{throw Error()}catch(U){h=U}n()}}catch(U){if(U&&h&&typeof U.stack=="string"){for(var f=U.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,T=g.length-1;1<=w&&0<=T&&f[w]!==g[T];)T--;for(;1<=w&&0<=T;w--,T--)if(f[w]!==g[T]){if(w!==1||T!==1)do if(w--,T--,0>T||f[w]!==g[T]){var C=`
`+f[w].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=w&&0<=T);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?K(n):""}function Re(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case ve:return"Portal";case P:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ct:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case O:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ut:return s=n.displayName||null,s!==null?s:ke(n.type)||"Memo";case zt:s=n._payload,n=n._init;try{return ke(n(s))}catch{}}return null}function Be(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rt(n){var s=Ke(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function gr(n){n._valueTracker||(n._valueTracker=Rt(n))}function Ls(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),h="";return n&&(h=Ke(n)?n.checked?"true":"false":n.value),n=h,n!==u?(s.setValue(n),!0):!1}function $r(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,s){var u=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function Ms(n,s){var u=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;u=Ue(s.value!=null?s.value:u),n._wrapperState={initialChecked:h,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ca(n,s){s=s.checked,s!=null&&le(n,"checked",s,!1)}function ha(n,s){ca(n,s);var u=Ue(s.value),h=s.type;if(u!=null)h==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Fs(n,s.type,u):s.hasOwnProperty("defaultValue")&&Fs(n,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ju(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Fs(n,s,u){(s!=="number"||$r(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var _r=Array.isArray;function yr(n,s,u,h){if(n=n.options,s){s={};for(var f=0;f<u.length;f++)s["$"+u[f]]=!0;for(u=0;u<n.length;u++)f=s.hasOwnProperty("$"+n[u].value),n[u].selected!==f&&(n[u].selected=f),f&&h&&(n[u].defaultSelected=!0)}else{for(u=""+Ue(u),s=null,f=0;f<n.length;f++){if(n[f].value===u){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function da(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bs(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(_r(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:Ue(u)}}function Us(n,s){var u=Ue(s.value),h=Ue(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),h!=null&&(n.defaultValue=""+h)}function fa(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function wt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var vr,pa=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,u,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=vr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Gr(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bi=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(n){Bi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Fi[s]=Fi[n]})});function ma(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Fi.hasOwnProperty(n)&&Fi[n]?(""+s).trim():s+"px"}function ga(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var h=u.indexOf("--")===0,f=ma(u,s[u],h);u==="float"&&(u="cssFloat"),h?n.setProperty(u,f):n[u]=f}}var _a=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ya(n,s){if(s){if(_a[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function va(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function zs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var js=null,Sn=null,Jn=null;function qs(n){if(n=qa(n)){if(typeof js!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Pl(s),js(n.stateNode,n.type,s))}}function Xn(n){Sn?Jn?Jn.push(n):Jn=[n]:Sn=n}function wa(){if(Sn){var n=Sn,s=Jn;if(Jn=Sn=null,qs(n),s)for(n=0;n<s.length;n++)qs(s[n])}}function zi(n,s){return n(s)}function Ea(){}var wr=!1;function Ia(n,s,u){if(wr)return n(s,u);wr=!0;try{return zi(n,s,u)}finally{wr=!1,(Sn!==null||Jn!==null)&&(Ea(),wa())}}function ht(n,s){var u=n.stateNode;if(u===null)return null;var h=Pl(u);if(h===null)return null;u=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var $s=!1;if(d)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{$s=!1}function ji(n,s,u,h,f,g,w,T,C){var U=Array.prototype.slice.call(arguments,3);try{s.apply(u,U)}catch(Y){this.onError(Y)}}var qi=!1,Gs=null,Mn=!1,Ta=null,vh={onError:function(n){qi=!0,Gs=n}};function Ks(n,s,u,h,f,g,w,T,C){qi=!1,Gs=null,ji.apply(vh,arguments)}function Xu(n,s,u,h,f,g,w,T,C){if(Ks.apply(this,arguments),qi){if(qi){var U=Gs;qi=!1,Gs=null}else throw Error(t(198));Mn||(Mn=!0,Ta=U)}}function Fn(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function $i(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Bn(n){if(Fn(n)!==n)throw Error(t(188))}function Zu(n){var s=n.alternate;if(!s){if(s=Fn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,h=s;;){var f=u.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){u=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===u)return Bn(f),n;if(g===h)return Bn(f),s;g=g.sibling}throw Error(t(188))}if(u.return!==h.return)u=f,h=g;else{for(var w=!1,T=f.child;T;){if(T===u){w=!0,u=f,h=g;break}if(T===h){w=!0,h=f,u=g;break}T=T.sibling}if(!w){for(T=g.child;T;){if(T===u){w=!0,u=g,h=f;break}if(T===h){w=!0,h=g,u=f;break}T=T.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Sa(n){return n=Zu(n),n!==null?Qs(n):null}function Qs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Qs(n);if(s!==null)return s;n=n.sibling}return null}var Ws=e.unstable_scheduleCallback,Aa=e.unstable_cancelCallback,el=e.unstable_shouldYield,wh=e.unstable_requestPaint,Qe=e.unstable_now,tl=e.unstable_getCurrentPriorityLevel,Gi=e.unstable_ImmediatePriority,Kr=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,Ra=e.unstable_LowPriority,nl=e.unstable_IdlePriority,Ki=null,gn=null;function rl(n){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Ki,n,void 0,(n.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:sl,Pa=Math.log,il=Math.LN2;function sl(n){return n>>>=0,n===0?32:31-(Pa(n)/il|0)|0}var Hs=64,Ys=4194304;function Qr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Qi(n,s){var u=n.pendingLanes;if(u===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,w=u&268435455;if(w!==0){var T=w&~f;T!==0?h=Qr(T):(g&=w,g!==0&&(h=Qr(g)))}else w=u&~f,w!==0?h=Qr(w):g!==0&&(h=Qr(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(h&4&&(h|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)u=31-Yt(s),f=1<<u,h|=n[u],s&=~f;return h}function Eh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(n,s){for(var u=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-Yt(g),T=1<<w,C=f[w];C===-1?(!(T&u)||T&h)&&(f[w]=Eh(T,s)):C<=s&&(n.expiredLanes|=T),g&=~T}}function _n(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Wi(){var n=Hs;return Hs<<=1,!(Hs&4194240)&&(Hs=64),n}function Wr(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Hr(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Yt(s),n[s]=u}function Ge(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<u;){var f=31-Yt(u),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,u&=~g}}function Yr(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var h=31-Yt(u),f=1<<h;f&s|n[h]&s&&(n[h]|=s),u&=~f}}var Ve=0;function Jr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ol,Js,al,ul,ll,Ca=!1,Zn=[],Nt=null,Un=null,zn=null,Xr=new Map,Rn=new Map,er=[],Ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cl(n,s){switch(n){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Xr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(s.pointerId)}}function sn(n,s,u,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:u,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=qa(s),s!==null&&Js(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Th(n,s,u,h,f){switch(s){case"focusin":return Nt=sn(Nt,n,s,u,h,f),!0;case"dragenter":return Un=sn(Un,n,s,u,h,f),!0;case"mouseover":return zn=sn(zn,n,s,u,h,f),!0;case"pointerover":var g=f.pointerId;return Xr.set(g,sn(Xr.get(g)||null,n,s,u,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Rn.set(g,sn(Rn.get(g)||null,n,s,u,h,f)),!0}return!1}function hl(n){var s=Zi(n.target);if(s!==null){var u=Fn(s);if(u!==null){if(s=u.tag,s===13){if(s=$i(u),s!==null){n.blockedOn=s,ll(n.priority,function(){al(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ir(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=Xs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var h=new u.constructor(u.type,u);Ui=h,u.target.dispatchEvent(h),Ui=null}else return s=qa(u),s!==null&&Js(s),n.blockedOn=u,!1;s.shift()}return!0}function Hi(n,s,u){Ir(n)&&u.delete(s)}function dl(){Ca=!1,Nt!==null&&Ir(Nt)&&(Nt=null),Un!==null&&Ir(Un)&&(Un=null),zn!==null&&Ir(zn)&&(zn=null),Xr.forEach(Hi),Rn.forEach(Hi)}function jn(n,s){n.blockedOn===s&&(n.blockedOn=null,Ca||(Ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dl)))}function qn(n){function s(f){return jn(f,n)}if(0<Zn.length){jn(Zn[0],n);for(var u=1;u<Zn.length;u++){var h=Zn[u];h.blockedOn===n&&(h.blockedOn=null)}}for(Nt!==null&&jn(Nt,n),Un!==null&&jn(Un,n),zn!==null&&jn(zn,n),Xr.forEach(s),Rn.forEach(s),u=0;u<er.length;u++)h=er[u],h.blockedOn===n&&(h.blockedOn=null);for(;0<er.length&&(u=er[0],u.blockedOn===null);)hl(u),u.blockedOn===null&&er.shift()}var Tr=we.ReactCurrentBatchConfig,Zr=!0;function Ze(n,s,u,h){var f=Ve,g=Tr.transition;Tr.transition=null;try{Ve=1,xa(n,s,u,h)}finally{Ve=f,Tr.transition=g}}function Sh(n,s,u,h){var f=Ve,g=Tr.transition;Tr.transition=null;try{Ve=4,xa(n,s,u,h)}finally{Ve=f,Tr.transition=g}}function xa(n,s,u,h){if(Zr){var f=Xs(n,s,u,h);if(f===null)Oh(n,s,h,Yi,u),cl(n,h);else if(Th(f,n,s,u,h))h.stopPropagation();else if(cl(n,h),s&4&&-1<Ih.indexOf(n)){for(;f!==null;){var g=qa(f);if(g!==null&&ol(g),g=Xs(n,s,u,h),g===null&&Oh(n,s,h,Yi,u),g===f)break;f=g}f!==null&&h.stopPropagation()}else Oh(n,s,h,null,u)}}var Yi=null;function Xs(n,s,u,h){if(Yi=null,n=zs(h),n=Zi(n),n!==null)if(s=Fn(n),s===null)n=null;else if(u=s.tag,u===13){if(n=$i(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Yi=n,null}function Va(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tl()){case Gi:return 1;case Kr:return 4;case An:case Ra:return 16;case nl:return 536870912;default:return 16}default:return 16}}var yn=null,Zs=null,on=null;function Da(){if(on)return on;var n,s=Zs,u=s.length,h,f="value"in yn?yn.value:yn.textContent,g=f.length;for(n=0;n<u&&s[n]===f[n];n++);var w=u-n;for(h=1;h<=w&&s[u-h]===f[g-h];h++);return on=f.slice(n,1<h?1-h:void 0)}function eo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function tr(){return!0}function ka(){return!1}function bt(n){function s(u,h,f,g,w){this._reactName=u,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(u=n[T],this[T]=u?u(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?tr:ka,this.isPropagationStopped=ka,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=bt($n),nr=se({},$n,{view:0,detail:0}),Ah=bt(nr),no,Sr,ei,Ji=se({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ei&&(ei&&n.type==="mousemove"?(no=n.screenX-ei.screenX,Sr=n.screenY-ei.screenY):Sr=no=0,ei=n),no)},movementY:function(n){return"movementY"in n?n.movementY:Sr}}),ro=bt(Ji),Na=se({},Ji,{dataTransfer:0}),fl=bt(Na),io=se({},nr,{relatedTarget:0}),so=bt(io),pl=se({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=bt(pl),ml=se({},$n,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gl=bt(ml),_l=se({},$n,{data:0}),ba=bt(_l),oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=yl[n])?!!s[n]:!1}function rr(){return vl}var l=se({},nr,{key:function(n){if(n.key){var s=oo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=eo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(n){return n.type==="keypress"?eo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?eo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=bt(l),y=se({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=bt(y),M=se({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),j=bt(M),Z=se({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=bt(Z),It=se({},Ji,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=bt(It),Pt=[9,13,27,32],gt=d&&"CompositionEvent"in window,Pn=null;d&&"documentMode"in document&&(Pn=document.documentMode);var vn=d&&"TextEvent"in window&&!Pn,Xi=d&&(!gt||Pn&&8<Pn&&11>=Pn),ao=" ",Kp=!1;function Qp(n,s){switch(n){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function S0(n,s){switch(n){case"compositionend":return Wp(s);case"keypress":return s.which!==32?null:(Kp=!0,ao);case"textInput":return n=s.data,n===ao&&Kp?null:n;default:return null}}function A0(n,s){if(uo)return n==="compositionend"||!gt&&Qp(n,s)?(n=Da(),on=Zs=yn=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xi&&s.locale!=="ko"?null:s.data;default:return null}}var R0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!R0[n.type]:s==="textarea"}function Yp(n,s,u,h){Xn(h),s=Sl(s,"onChange"),0<s.length&&(u=new to("onChange","change",null,u,h),n.push({event:u,listeners:s}))}var Oa=null,La=null;function P0(n){pm(n,0)}function wl(n){var s=po(n);if(Ls(s))return n}function C0(n,s){if(n==="change")return s}var Jp=!1;if(d){var Rh;if(d){var Ph="oninput"in document;if(!Ph){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),Ph=typeof Xp.oninput=="function"}Rh=Ph}else Rh=!1;Jp=Rh&&(!document.documentMode||9<document.documentMode)}function Zp(){Oa&&(Oa.detachEvent("onpropertychange",em),La=Oa=null)}function em(n){if(n.propertyName==="value"&&wl(La)){var s=[];Yp(s,La,n,zs(n)),Ia(P0,s)}}function x0(n,s,u){n==="focusin"?(Zp(),Oa=s,La=u,Oa.attachEvent("onpropertychange",em)):n==="focusout"&&Zp()}function V0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wl(La)}function D0(n,s){if(n==="click")return wl(s)}function k0(n,s){if(n==="input"||n==="change")return wl(s)}function N0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Gn=typeof Object.is=="function"?Object.is:N0;function Ma(n,s){if(Gn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),h=Object.keys(s);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var f=u[h];if(!p.call(s,f)||!Gn(n[f],s[f]))return!1}return!0}function tm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function nm(n,s){var u=tm(n);n=0;for(var h;u;){if(u.nodeType===3){if(h=n+u.textContent.length,n<=s&&h>=s)return{node:u,offset:s-n};n=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=tm(u)}}function rm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?rm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function im(){for(var n=window,s=$r();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=$r(n.document)}return s}function Ch(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function b0(n){var s=im(),u=n.focusedElem,h=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&rm(u.ownerDocument.documentElement,u)){if(h!==null&&Ch(u)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=u.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=nm(u,g);var w=nm(u,h);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var O0=d&&"documentMode"in document&&11>=document.documentMode,lo=null,xh=null,Fa=null,Vh=!1;function sm(n,s,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Vh||lo==null||lo!==$r(h)||(h=lo,"selectionStart"in h&&Ch(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fa&&Ma(Fa,h)||(Fa=h,h=Sl(xh,"onSelect"),0<h.length&&(s=new to("onSelect","select",null,s,u),n.push({event:s,listeners:h}),s.target=lo)))}function El(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var co={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},Dh={},om={};d&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Il(n){if(Dh[n])return Dh[n];if(!co[n])return n;var s=co[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in om)return Dh[n]=s[u];return n}var am=Il("animationend"),um=Il("animationiteration"),lm=Il("animationstart"),cm=Il("transitionend"),hm=new Map,dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(n,s){hm.set(n,s),a(s,[n])}for(var kh=0;kh<dm.length;kh++){var Nh=dm[kh],L0=Nh.toLowerCase(),M0=Nh[0].toUpperCase()+Nh.slice(1);ti(L0,"on"+M0)}ti(am,"onAnimationEnd"),ti(um,"onAnimationIteration"),ti(lm,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(cm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function fm(n,s,u){var h=n.type||"unknown-event";n.currentTarget=u,Xu(h,s,void 0,n),n.currentTarget=null}function pm(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var h=n[u],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var T=h[w],C=T.instance,U=T.currentTarget;if(T=T.listener,C!==g&&f.isPropagationStopped())break e;fm(f,T,U),g=C}else for(w=0;w<h.length;w++){if(T=h[w],C=T.instance,U=T.currentTarget,T=T.listener,C!==g&&f.isPropagationStopped())break e;fm(f,T,U),g=C}}}if(Mn)throw n=Ta,Mn=!1,Ta=null,n}function Ye(n,s){var u=s[zh];u===void 0&&(u=s[zh]=new Set);var h=n+"__bubble";u.has(h)||(mm(s,n,2,!1),u.add(h))}function bh(n,s,u){var h=0;s&&(h|=4),mm(u,n,h,s)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Ua(n){if(!n[Tl]){n[Tl]=!0,r.forEach(function(u){u!=="selectionchange"&&(F0.has(u)||bh(u,!1,n),bh(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Tl]||(s[Tl]=!0,bh("selectionchange",!1,s))}}function mm(n,s,u,h){switch(Va(s)){case 1:var f=Ze;break;case 4:f=Sh;break;default:f=xa}u=f.bind(null,s,u,n),f=void 0,!$s||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,u,{capture:!0,passive:f}):n.addEventListener(s,u,!0):f!==void 0?n.addEventListener(s,u,{passive:f}):n.addEventListener(s,u,!1)}function Oh(n,s,u,h,f){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var T=h.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;w=w.return}for(;T!==null;){if(w=Zi(T),w===null)return;if(C=w.tag,C===5||C===6){h=g=w;continue e}T=T.parentNode}}h=h.return}Ia(function(){var U=g,Y=zs(u),J=[];e:{var W=hm.get(n);if(W!==void 0){var re=to,ae=n;switch(n){case"keypress":if(eo(u)===0)break e;case"keydown":case"keyup":re=m;break;case"focusin":ae="focus",re=so;break;case"focusout":ae="blur",re=so;break;case"beforeblur":case"afterblur":re=so;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=j;break;case am:case um:case lm:re=Ar;break;case cm:re=ze;break;case"scroll":re=Ah;break;case"wheel":re=Ne;break;case"copy":case"cut":case"paste":re=gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=I}var ce=(s&4)!==0,dt=!ce&&n==="scroll",F=ce?W!==null?W+"Capture":null:W;ce=[];for(var V=U,B;V!==null;){B=V;var X=B.stateNode;if(B.tag===5&&X!==null&&(B=X,F!==null&&(X=ht(V,F),X!=null&&ce.push(za(V,X,B)))),dt)break;V=V.return}0<ce.length&&(W=new re(W,ae,null,u,Y),J.push({event:W,listeners:ce}))}}if(!(s&7)){e:{if(W=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",W&&u!==Ui&&(ae=u.relatedTarget||u.fromElement)&&(Zi(ae)||ae[Rr]))break e;if((re||W)&&(W=Y.window===Y?Y:(W=Y.ownerDocument)?W.defaultView||W.parentWindow:window,re?(ae=u.relatedTarget||u.toElement,re=U,ae=ae?Zi(ae):null,ae!==null&&(dt=Fn(ae),ae!==dt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=U),re!==ae)){if(ce=ro,X="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ce=I,X="onPointerLeave",F="onPointerEnter",V="pointer"),dt=re==null?W:po(re),B=ae==null?W:po(ae),W=new ce(X,V+"leave",re,u,Y),W.target=dt,W.relatedTarget=B,X=null,Zi(Y)===U&&(ce=new ce(F,V+"enter",ae,u,Y),ce.target=B,ce.relatedTarget=dt,X=ce),dt=X,re&&ae)t:{for(ce=re,F=ae,V=0,B=ce;B;B=ho(B))V++;for(B=0,X=F;X;X=ho(X))B++;for(;0<V-B;)ce=ho(ce),V--;for(;0<B-V;)F=ho(F),B--;for(;V--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=ho(ce),F=ho(F)}ce=null}else ce=null;re!==null&&gm(J,W,re,ce,!1),ae!==null&&dt!==null&&gm(J,dt,ae,ce,!0)}}e:{if(W=U?po(U):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var he=C0;else if(Hp(W))if(Jp)he=k0;else{he=V0;var _e=x0}else(re=W.nodeName)&&re.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(he=D0);if(he&&(he=he(n,U))){Yp(J,he,u,Y);break e}_e&&_e(n,W,U),n==="focusout"&&(_e=W._wrapperState)&&_e.controlled&&W.type==="number"&&Fs(W,"number",W.value)}switch(_e=U?po(U):window,n){case"focusin":(Hp(_e)||_e.contentEditable==="true")&&(lo=_e,xh=U,Fa=null);break;case"focusout":Fa=xh=lo=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,sm(J,u,Y);break;case"selectionchange":if(O0)break;case"keydown":case"keyup":sm(J,u,Y)}var ye;if(gt)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else uo?Qp(n,u)&&(Ee="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ee="onCompositionStart");Ee&&(Xi&&u.locale!=="ko"&&(uo||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&uo&&(ye=Da()):(yn=Y,Zs="value"in yn?yn.value:yn.textContent,uo=!0)),_e=Sl(U,Ee),0<_e.length&&(Ee=new ba(Ee,n,null,u,Y),J.push({event:Ee,listeners:_e}),ye?Ee.data=ye:(ye=Wp(u),ye!==null&&(Ee.data=ye)))),(ye=vn?S0(n,u):A0(n,u))&&(U=Sl(U,"onBeforeInput"),0<U.length&&(Y=new ba("onBeforeInput","beforeinput",null,u,Y),J.push({event:Y,listeners:U}),Y.data=ye))}pm(J,s)})}function za(n,s,u){return{instance:n,listener:s,currentTarget:u}}function Sl(n,s){for(var u=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ht(n,u),g!=null&&h.unshift(za(n,g,f)),g=ht(n,s),g!=null&&h.push(za(n,g,f))),n=n.return}return h}function ho(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function gm(n,s,u,h,f){for(var g=s._reactName,w=[];u!==null&&u!==h;){var T=u,C=T.alternate,U=T.stateNode;if(C!==null&&C===h)break;T.tag===5&&U!==null&&(T=U,f?(C=ht(u,g),C!=null&&w.unshift(za(u,C,T))):f||(C=ht(u,g),C!=null&&w.push(za(u,C,T)))),u=u.return}w.length!==0&&n.push({event:s,listeners:w})}var B0=/\r\n?/g,U0=/\u0000|\uFFFD/g;function _m(n){return(typeof n=="string"?n:""+n).replace(B0,`
`).replace(U0,"")}function Al(n,s,u){if(s=_m(s),_m(n)!==s&&u)throw Error(t(425))}function Rl(){}var Lh=null,Mh=null;function Fh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,z0=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(n){return ym.resolve(null).then(n).catch(q0)}:Bh;function q0(n){setTimeout(function(){throw n})}function Uh(n,s){var u=s,h=0;do{var f=u.nextSibling;if(n.removeChild(u),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(h===0){n.removeChild(f),qn(s);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=f}while(u);qn(s)}function ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function vm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ir="__reactFiber$"+fo,ja="__reactProps$"+fo,Rr="__reactContainer$"+fo,zh="__reactEvents$"+fo,$0="__reactListeners$"+fo,G0="__reactHandles$"+fo;function Zi(n){var s=n[ir];if(s)return s;for(var u=n.parentNode;u;){if(s=u[Rr]||u[ir]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=vm(n);n!==null;){if(u=n[ir])return u;n=vm(n)}return s}n=u,u=n.parentNode}return null}function qa(n){return n=n[ir]||n[Rr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function po(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Pl(n){return n[ja]||null}var jh=[],mo=-1;function ri(n){return{current:n}}function Je(n){0>mo||(n.current=jh[mo],jh[mo]=null,mo--)}function We(n,s){mo++,jh[mo]=n.current,n.current=s}var ii={},jt=ri(ii),an=ri(!1),es=ii;function go(n,s){var u=n.type.contextTypes;if(!u)return ii;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in u)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function un(n){return n=n.childContextTypes,n!=null}function Cl(){Je(an),Je(jt)}function wm(n,s,u){if(jt.current!==ii)throw Error(t(168));We(jt,s),We(an,u)}function Em(n,s,u){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Be(n)||"Unknown",f));return se({},u,h)}function xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ii,es=jt.current,We(jt,n),We(an,an.current),!0}function Im(n,s,u){var h=n.stateNode;if(!h)throw Error(t(169));u?(n=Em(n,s,es),h.__reactInternalMemoizedMergedChildContext=n,Je(an),Je(jt),We(jt,n)):Je(an),We(an,u)}var Pr=null,Vl=!1,qh=!1;function Tm(n){Pr===null?Pr=[n]:Pr.push(n)}function K0(n){Vl=!0,Tm(n)}function si(){if(!qh&&Pr!==null){qh=!0;var n=0,s=Ve;try{var u=Pr;for(Ve=1;n<u.length;n++){var h=u[n];do h=h(!0);while(h!==null)}Pr=null,Vl=!1}catch(f){throw Pr!==null&&(Pr=Pr.slice(n+1)),Ws(Gi,si),f}finally{Ve=s,qh=!1}}return null}var _o=[],yo=0,Dl=null,kl=0,Cn=[],xn=0,ts=null,Cr=1,xr="";function ns(n,s){_o[yo++]=kl,_o[yo++]=Dl,Dl=n,kl=s}function Sm(n,s,u){Cn[xn++]=Cr,Cn[xn++]=xr,Cn[xn++]=ts,ts=n;var h=Cr;n=xr;var f=32-Yt(h)-1;h&=~(1<<f),u+=1;var g=32-Yt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Cr=1<<32-Yt(s)+f|u<<f|h,xr=g+n}else Cr=1<<g|u<<f|h,xr=n}function $h(n){n.return!==null&&(ns(n,1),Sm(n,1,0))}function Gh(n){for(;n===Dl;)Dl=_o[--yo],_o[yo]=null,kl=_o[--yo],_o[yo]=null;for(;n===ts;)ts=Cn[--xn],Cn[xn]=null,xr=Cn[--xn],Cn[xn]=null,Cr=Cn[--xn],Cn[xn]=null}var wn=null,En=null,et=!1,Kn=null;function Am(n,s){var u=Nn(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function Rm(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,wn=n,En=ni(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,wn=n,En=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=ts!==null?{id:Cr,overflow:xr}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Nn(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,wn=n,En=null,!0):!1;default:return!1}}function Kh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qh(n){if(et){var s=En;if(s){var u=s;if(!Rm(n,s)){if(Kh(n))throw Error(t(418));s=ni(u.nextSibling);var h=wn;s&&Rm(n,s)?Am(h,u):(n.flags=n.flags&-4097|2,et=!1,wn=n)}}else{if(Kh(n))throw Error(t(418));n.flags=n.flags&-4097|2,et=!1,wn=n}}}function Pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wn=n}function Nl(n){if(n!==wn)return!1;if(!et)return Pm(n),et=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Fh(n.type,n.memoizedProps)),s&&(s=En)){if(Kh(n))throw Cm(),Error(t(418));for(;s;)Am(n,s),s=ni(s.nextSibling)}if(Pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){En=ni(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}En=null}}else En=wn?ni(n.stateNode.nextSibling):null;return!0}function Cm(){for(var n=En;n;)n=ni(n.nextSibling)}function vo(){En=wn=null,et=!1}function Wh(n){Kn===null?Kn=[n]:Kn.push(n)}var Q0=we.ReactCurrentBatchConfig;function $a(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var T=f.refs;w===null?delete T[g]:T[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function bl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function xm(n){var s=n._init;return s(n._payload)}function Vm(n){function s(F,V){if(n){var B=F.deletions;B===null?(F.deletions=[V],F.flags|=16):B.push(V)}}function u(F,V){if(!n)return null;for(;V!==null;)s(F,V),V=V.sibling;return null}function h(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function f(F,V){return F=fi(F,V),F.index=0,F.sibling=null,F}function g(F,V,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<V?(F.flags|=2,V):B):(F.flags|=2,V)):(F.flags|=1048576,V)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function T(F,V,B,X){return V===null||V.tag!==6?(V=Bd(B,F.mode,X),V.return=F,V):(V=f(V,B),V.return=F,V)}function C(F,V,B,X){var he=B.type;return he===x?Y(F,V,B.props.children,X,B.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===zt&&xm(he)===V.type)?(X=f(V,B.props),X.ref=$a(F,V,B),X.return=F,X):(X=ic(B.type,B.key,B.props,null,F.mode,X),X.ref=$a(F,V,B),X.return=F,X)}function U(F,V,B,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Ud(B,F.mode,X),V.return=F,V):(V=f(V,B.children||[]),V.return=F,V)}function Y(F,V,B,X,he){return V===null||V.tag!==7?(V=cs(B,F.mode,X,he),V.return=F,V):(V=f(V,B),V.return=F,V)}function J(F,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Bd(""+V,F.mode,B),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ae:return B=ic(V.type,V.key,V.props,null,F.mode,B),B.ref=$a(F,null,V),B.return=F,B;case ve:return V=Ud(V,F.mode,B),V.return=F,V;case zt:var X=V._init;return J(F,X(V._payload),B)}if(_r(V)||ge(V))return V=cs(V,F.mode,B,null),V.return=F,V;bl(F,V)}return null}function W(F,V,B,X){var he=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return he!==null?null:T(F,V,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ae:return B.key===he?C(F,V,B,X):null;case ve:return B.key===he?U(F,V,B,X):null;case zt:return he=B._init,W(F,V,he(B._payload),X)}if(_r(B)||ge(B))return he!==null?null:Y(F,V,B,X,null);bl(F,B)}return null}function re(F,V,B,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(B)||null,T(V,F,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Ae:return F=F.get(X.key===null?B:X.key)||null,C(V,F,X,he);case ve:return F=F.get(X.key===null?B:X.key)||null,U(V,F,X,he);case zt:var _e=X._init;return re(F,V,B,_e(X._payload),he)}if(_r(X)||ge(X))return F=F.get(B)||null,Y(V,F,X,he,null);bl(V,X)}return null}function ae(F,V,B,X){for(var he=null,_e=null,ye=V,Ee=V=0,Vt=null;ye!==null&&Ee<B.length;Ee++){ye.index>Ee?(Vt=ye,ye=null):Vt=ye.sibling;var Le=W(F,ye,B[Ee],X);if(Le===null){ye===null&&(ye=Vt);break}n&&ye&&Le.alternate===null&&s(F,ye),V=g(Le,V,Ee),_e===null?he=Le:_e.sibling=Le,_e=Le,ye=Vt}if(Ee===B.length)return u(F,ye),et&&ns(F,Ee),he;if(ye===null){for(;Ee<B.length;Ee++)ye=J(F,B[Ee],X),ye!==null&&(V=g(ye,V,Ee),_e===null?he=ye:_e.sibling=ye,_e=ye);return et&&ns(F,Ee),he}for(ye=h(F,ye);Ee<B.length;Ee++)Vt=re(ye,F,Ee,B[Ee],X),Vt!==null&&(n&&Vt.alternate!==null&&ye.delete(Vt.key===null?Ee:Vt.key),V=g(Vt,V,Ee),_e===null?he=Vt:_e.sibling=Vt,_e=Vt);return n&&ye.forEach(function(pi){return s(F,pi)}),et&&ns(F,Ee),he}function ce(F,V,B,X){var he=ge(B);if(typeof he!="function")throw Error(t(150));if(B=he.call(B),B==null)throw Error(t(151));for(var _e=he=null,ye=V,Ee=V=0,Vt=null,Le=B.next();ye!==null&&!Le.done;Ee++,Le=B.next()){ye.index>Ee?(Vt=ye,ye=null):Vt=ye.sibling;var pi=W(F,ye,Le.value,X);if(pi===null){ye===null&&(ye=Vt);break}n&&ye&&pi.alternate===null&&s(F,ye),V=g(pi,V,Ee),_e===null?he=pi:_e.sibling=pi,_e=pi,ye=Vt}if(Le.done)return u(F,ye),et&&ns(F,Ee),he;if(ye===null){for(;!Le.done;Ee++,Le=B.next())Le=J(F,Le.value,X),Le!==null&&(V=g(Le,V,Ee),_e===null?he=Le:_e.sibling=Le,_e=Le);return et&&ns(F,Ee),he}for(ye=h(F,ye);!Le.done;Ee++,Le=B.next())Le=re(ye,F,Ee,Le.value,X),Le!==null&&(n&&Le.alternate!==null&&ye.delete(Le.key===null?Ee:Le.key),V=g(Le,V,Ee),_e===null?he=Le:_e.sibling=Le,_e=Le);return n&&ye.forEach(function(RE){return s(F,RE)}),et&&ns(F,Ee),he}function dt(F,V,B,X){if(typeof B=="object"&&B!==null&&B.type===x&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ae:e:{for(var he=B.key,_e=V;_e!==null;){if(_e.key===he){if(he=B.type,he===x){if(_e.tag===7){u(F,_e.sibling),V=f(_e,B.props.children),V.return=F,F=V;break e}}else if(_e.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===zt&&xm(he)===_e.type){u(F,_e.sibling),V=f(_e,B.props),V.ref=$a(F,_e,B),V.return=F,F=V;break e}u(F,_e);break}else s(F,_e);_e=_e.sibling}B.type===x?(V=cs(B.props.children,F.mode,X,B.key),V.return=F,F=V):(X=ic(B.type,B.key,B.props,null,F.mode,X),X.ref=$a(F,V,B),X.return=F,F=X)}return w(F);case ve:e:{for(_e=B.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){u(F,V.sibling),V=f(V,B.children||[]),V.return=F,F=V;break e}else{u(F,V);break}else s(F,V);V=V.sibling}V=Ud(B,F.mode,X),V.return=F,F=V}return w(F);case zt:return _e=B._init,dt(F,V,_e(B._payload),X)}if(_r(B))return ae(F,V,B,X);if(ge(B))return ce(F,V,B,X);bl(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(u(F,V.sibling),V=f(V,B),V.return=F,F=V):(u(F,V),V=Bd(B,F.mode,X),V.return=F,F=V),w(F)):u(F,V)}return dt}var wo=Vm(!0),Dm=Vm(!1),Ol=ri(null),Ll=null,Eo=null,Hh=null;function Yh(){Hh=Eo=Ll=null}function Jh(n){var s=Ol.current;Je(Ol),n._currentValue=s}function Xh(n,s,u){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===u)break;n=n.return}}function Io(n,s){Ll=n,Hh=Eo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(ln=!0),n.firstContext=null)}function Vn(n){var s=n._currentValue;if(Hh!==n)if(n={context:n,memoizedValue:s,next:null},Eo===null){if(Ll===null)throw Error(t(308));Eo=n,Ll.dependencies={lanes:0,firstContext:n}}else Eo=Eo.next=n;return s}var rs=null;function Zh(n){rs===null?rs=[n]:rs.push(n)}function km(n,s,u,h){var f=s.interleaved;return f===null?(u.next=u,Zh(s)):(u.next=f.next,f.next=u),s.interleaved=u,Vr(n,h)}function Vr(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var oi=!1;function ed(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Dr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ai(n,s,u){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,Oe&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Vr(n,u)}return f=h.interleaved,f===null?(s.next=s,Zh(h)):(s.next=f.next,f.next=s),h.interleaved=s,Vr(n,u)}function Ml(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,u|=h,s.lanes=u,Yr(n,u)}}function bm(n,s){var u=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var f=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?f=g=w:g=g.next=w,u=u.next}while(u!==null);g===null?f=g=s:g=g.next=s}else f=g=s;u={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function Fl(n,s,u,h){var f=n.updateQueue;oi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,U=C.next;C.next=null,w===null?g=U:w.next=U,w=C;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==w&&(T===null?Y.firstBaseUpdate=U:T.next=U,Y.lastBaseUpdate=C))}if(g!==null){var J=f.baseState;w=0,Y=U=C=null,T=g;do{var W=T.lane,re=T.eventTime;if((h&W)===W){Y!==null&&(Y=Y.next={eventTime:re,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ae=n,ce=T;switch(W=s,re=u,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){J=ae.call(re,J,W);break e}J=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,W=typeof ae=="function"?ae.call(re,J,W):ae,W==null)break e;J=se({},J,W);break e;case 2:oi=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=f.effects,W===null?f.effects=[T]:W.push(T))}else re={eventTime:re,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(U=Y=re,C=J):Y=Y.next=re,w|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;W=T,T=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(Y===null&&(C=J),f.baseState=C,f.firstBaseUpdate=U,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);os|=w,n.lanes=w,n.memoizedState=J}}function Om(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=u,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Ga={},sr=ri(Ga),Ka=ri(Ga),Qa=ri(Ga);function is(n){if(n===Ga)throw Error(t(174));return n}function td(n,s){switch(We(Qa,s),We(Ka,n),We(sr,Ga),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Et(s,n)}Je(sr),We(sr,s)}function To(){Je(sr),Je(Ka),Je(Qa)}function Lm(n){is(Qa.current);var s=is(sr.current),u=Et(s,n.type);s!==u&&(We(Ka,n),We(sr,u))}function nd(n){Ka.current===n&&(Je(sr),Je(Ka))}var st=ri(0);function Bl(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rd=[];function id(){for(var n=0;n<rd.length;n++)rd[n]._workInProgressVersionPrimary=null;rd.length=0}var Ul=we.ReactCurrentDispatcher,sd=we.ReactCurrentBatchConfig,ss=0,ot=null,Tt=null,Ct=null,zl=!1,Wa=!1,Ha=0,W0=0;function qt(){throw Error(t(321))}function od(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!Gn(n[u],s[u]))return!1;return!0}function ad(n,s,u,h,f,g){if(ss=g,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ul.current=n===null||n.memoizedState===null?X0:Z0,n=u(h,f),Wa){g=0;do{if(Wa=!1,Ha=0,25<=g)throw Error(t(301));g+=1,Ct=Tt=null,s.updateQueue=null,Ul.current=eE,n=u(h,f)}while(Wa)}if(Ul.current=$l,s=Tt!==null&&Tt.next!==null,ss=0,Ct=Tt=ot=null,zl=!1,s)throw Error(t(300));return n}function ud(){var n=Ha!==0;return Ha=0,n}function or(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function Dn(){if(Tt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var s=Ct===null?ot.memoizedState:Ct.next;if(s!==null)Ct=s,Tt=n;else{if(n===null)throw Error(t(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?ot.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function Ya(n,s){return typeof s=="function"?s(n):s}function ld(n){var s=Dn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var h=Tt,f=h.baseQueue,g=u.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,u.pending=null}if(f!==null){g=f.next,h=h.baseState;var T=w=null,C=null,U=g;do{var Y=U.lane;if((ss&Y)===Y)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),h=U.hasEagerState?U.eagerState:n(h,U.action);else{var J={lane:Y,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(T=C=J,w=h):C=C.next=J,ot.lanes|=Y,os|=Y}U=U.next}while(U!==null&&U!==g);C===null?w=h:C.next=T,Gn(h,s.memoizedState)||(ln=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=C,u.lastRenderedState=h}if(n=u.interleaved,n!==null){f=n;do g=f.lane,ot.lanes|=g,os|=g,f=f.next;while(f!==n)}else f===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function cd(n){var s=Dn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var h=u.dispatch,f=u.pending,g=s.memoizedState;if(f!==null){u.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);Gn(g,s.memoizedState)||(ln=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),u.lastRenderedState=g}return[g,h]}function Mm(){}function Fm(n,s){var u=ot,h=Dn(),f=s(),g=!Gn(h.memoizedState,f);if(g&&(h.memoizedState=f,ln=!0),h=h.queue,hd(zm.bind(null,u,h,n),[n]),h.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,Ja(9,Um.bind(null,u,h,f,s),void 0,null),xt===null)throw Error(t(349));ss&30||Bm(u,s,f)}return f}function Bm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function Um(n,s,u,h){s.value=u,s.getSnapshot=h,jm(s)&&qm(n)}function zm(n,s,u){return u(function(){jm(s)&&qm(n)})}function jm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!Gn(n,u)}catch{return!0}}function qm(n){var s=Vr(n,1);s!==null&&Yn(s,n,1,-1)}function $m(n){var s=or();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:n},s.queue=n,n=n.dispatch=J0.bind(null,ot,n),[s.memoizedState,n]}function Ja(n,s,u,h){return n={tag:n,create:s,destroy:u,deps:h,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(h=u.next,u.next=n,n.next=h,s.lastEffect=n)),n}function Gm(){return Dn().memoizedState}function jl(n,s,u,h){var f=or();ot.flags|=n,f.memoizedState=Ja(1|s,u,void 0,h===void 0?null:h)}function ql(n,s,u,h){var f=Dn();h=h===void 0?null:h;var g=void 0;if(Tt!==null){var w=Tt.memoizedState;if(g=w.destroy,h!==null&&od(h,w.deps)){f.memoizedState=Ja(s,u,g,h);return}}ot.flags|=n,f.memoizedState=Ja(1|s,u,g,h)}function Km(n,s){return jl(8390656,8,n,s)}function hd(n,s){return ql(2048,8,n,s)}function Qm(n,s){return ql(4,2,n,s)}function Wm(n,s){return ql(4,4,n,s)}function Hm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ym(n,s,u){return u=u!=null?u.concat([n]):null,ql(4,4,Hm.bind(null,s,n),u)}function dd(){}function Jm(n,s){var u=Dn();s=s===void 0?null:s;var h=u.memoizedState;return h!==null&&s!==null&&od(s,h[1])?h[0]:(u.memoizedState=[n,s],n)}function Xm(n,s){var u=Dn();s=s===void 0?null:s;var h=u.memoizedState;return h!==null&&s!==null&&od(s,h[1])?h[0]:(n=n(),u.memoizedState=[n,s],n)}function Zm(n,s,u){return ss&21?(Gn(u,s)||(u=Wi(),ot.lanes|=u,os|=u,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=u)}function H0(n,s){var u=Ve;Ve=u!==0&&4>u?u:4,n(!0);var h=sd.transition;sd.transition={};try{n(!1),s()}finally{Ve=u,sd.transition=h}}function eg(){return Dn().memoizedState}function Y0(n,s,u){var h=hi(n);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},tg(n))ng(s,u);else if(u=km(n,s,u,h),u!==null){var f=Zt();Yn(u,n,h,f),rg(u,s,h)}}function J0(n,s,u){var h=hi(n),f={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(tg(n))ng(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,T=g(w,u);if(f.hasEagerState=!0,f.eagerState=T,Gn(T,w)){var C=s.interleaved;C===null?(f.next=f,Zh(s)):(f.next=C.next,C.next=f),s.interleaved=f;return}}catch{}finally{}u=km(n,s,f,h),u!==null&&(f=Zt(),Yn(u,n,h,f),rg(u,s,h))}}function tg(n){var s=n.alternate;return n===ot||s!==null&&s===ot}function ng(n,s){Wa=zl=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function rg(n,s,u){if(u&4194240){var h=s.lanes;h&=n.pendingLanes,u|=h,s.lanes=u,Yr(n,u)}}var $l={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},X0={readContext:Vn,useCallback:function(n,s){return or().memoizedState=[n,s===void 0?null:s],n},useContext:Vn,useEffect:Km,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,jl(4194308,4,Hm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return jl(4194308,4,n,s)},useInsertionEffect:function(n,s){return jl(4,2,n,s)},useMemo:function(n,s){var u=or();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var h=or();return s=u!==void 0?u(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=Y0.bind(null,ot,n),[h.memoizedState,n]},useRef:function(n){var s=or();return n={current:n},s.memoizedState=n},useState:$m,useDebugValue:dd,useDeferredValue:function(n){return or().memoizedState=n},useTransition:function(){var n=$m(!1),s=n[0];return n=H0.bind(null,n[1]),or().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var h=ot,f=or();if(et){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),xt===null)throw Error(t(349));ss&30||Bm(h,s,u)}f.memoizedState=u;var g={value:u,getSnapshot:s};return f.queue=g,Km(zm.bind(null,h,g,n),[n]),h.flags|=2048,Ja(9,Um.bind(null,h,g,u,s),void 0,null),u},useId:function(){var n=or(),s=xt.identifierPrefix;if(et){var u=xr,h=Cr;u=(h&~(1<<32-Yt(h)-1)).toString(32)+u,s=":"+s+"R"+u,u=Ha++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=W0++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Z0={readContext:Vn,useCallback:Jm,useContext:Vn,useEffect:hd,useImperativeHandle:Ym,useInsertionEffect:Qm,useLayoutEffect:Wm,useMemo:Xm,useReducer:ld,useRef:Gm,useState:function(){return ld(Ya)},useDebugValue:dd,useDeferredValue:function(n){var s=Dn();return Zm(s,Tt.memoizedState,n)},useTransition:function(){var n=ld(Ya)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Fm,useId:eg,unstable_isNewReconciler:!1},eE={readContext:Vn,useCallback:Jm,useContext:Vn,useEffect:hd,useImperativeHandle:Ym,useInsertionEffect:Qm,useLayoutEffect:Wm,useMemo:Xm,useReducer:cd,useRef:Gm,useState:function(){return cd(Ya)},useDebugValue:dd,useDeferredValue:function(n){var s=Dn();return Tt===null?s.memoizedState=n:Zm(s,Tt.memoizedState,n)},useTransition:function(){var n=cd(Ya)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Fm,useId:eg,unstable_isNewReconciler:!1};function Qn(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function fd(n,s,u,h){s=n.memoizedState,u=u(h,s),u=u==null?s:se({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Gl={isMounted:function(n){return(n=n._reactInternals)?Fn(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var h=Zt(),f=hi(n),g=Dr(h,f);g.payload=s,u!=null&&(g.callback=u),s=ai(n,g,f),s!==null&&(Yn(s,n,f,h),Ml(s,n,f))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var h=Zt(),f=hi(n),g=Dr(h,f);g.tag=1,g.payload=s,u!=null&&(g.callback=u),s=ai(n,g,f),s!==null&&(Yn(s,n,f,h),Ml(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Zt(),h=hi(n),f=Dr(u,h);f.tag=2,s!=null&&(f.callback=s),s=ai(n,f,h),s!==null&&(Yn(s,n,h,u),Ml(s,n,h))}};function ig(n,s,u,h,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Ma(u,h)||!Ma(f,g):!0}function sg(n,s,u){var h=!1,f=ii,g=s.contextType;return typeof g=="object"&&g!==null?g=Vn(g):(f=un(s)?es:jt.current,h=s.contextTypes,g=(h=h!=null)?go(n,f):ii),s=new s(u,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gl,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function og(n,s,u,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,h),s.state!==n&&Gl.enqueueReplaceState(s,s.state,null)}function pd(n,s,u,h){var f=n.stateNode;f.props=u,f.state=n.memoizedState,f.refs={},ed(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Vn(g):(g=un(s)?es:jt.current,f.context=go(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(fd(n,s,g,u),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Gl.enqueueReplaceState(f,f.state,null),Fl(n,u,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,s){try{var u="",h=s;do u+=Re(h),h=h.return;while(h);var f=u}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function md(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function gd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var tE=typeof WeakMap=="function"?WeakMap:Map;function ag(n,s,u){u=Dr(-1,u),u.tag=3,u.payload={element:null};var h=s.value;return u.callback=function(){Xl||(Xl=!0,Dd=h),gd(n,s)},u}function ug(n,s,u){u=Dr(-1,u),u.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;u.payload=function(){return h(f)},u.callback=function(){gd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){gd(n,s),typeof h!="function"&&(li===null?li=new Set([this]):li.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),u}function lg(n,s,u){var h=n.pingCache;if(h===null){h=n.pingCache=new tE;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(u)||(f.add(u),n=mE.bind(null,n,s,u),s.then(n,n))}function cg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function hg(n,s,u,h,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Dr(-1,1),s.tag=2,ai(u,s,1))),u.lanes|=1),n)}var nE=we.ReactCurrentOwner,ln=!1;function Xt(n,s,u,h){s.child=n===null?Dm(s,null,u,h):wo(s,n.child,u,h)}function dg(n,s,u,h,f){u=u.render;var g=s.ref;return Io(s,f),h=ad(n,s,u,h,g,f),u=ud(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,kr(n,s,f)):(et&&u&&$h(s),s.flags|=1,Xt(n,s,h,f),s.child)}function fg(n,s,u,h,f){if(n===null){var g=u.type;return typeof g=="function"&&!Fd(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=g,pg(n,s,g,h,f)):(n=ic(u.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!(n.lanes&f)){var w=g.memoizedProps;if(u=u.compare,u=u!==null?u:Ma,u(w,h)&&n.ref===s.ref)return kr(n,s,f)}return s.flags|=1,n=fi(g,h),n.ref=s.ref,n.return=s,s.child=n}function pg(n,s,u,h,f){if(n!==null){var g=n.memoizedProps;if(Ma(g,h)&&n.ref===s.ref)if(ln=!1,s.pendingProps=h=g,(n.lanes&f)!==0)n.flags&131072&&(ln=!0);else return s.lanes=n.lanes,kr(n,s,f)}return _d(n,s,u,h,f)}function mg(n,s,u){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Ro,In),In|=u;else{if(!(u&1073741824))return n=g!==null?g.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,We(Ro,In),In|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:u,We(Ro,In),In|=h}else g!==null?(h=g.baseLanes|u,s.memoizedState=null):h=u,We(Ro,In),In|=h;return Xt(n,s,f,u),s.child}function gg(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function _d(n,s,u,h,f){var g=un(u)?es:jt.current;return g=go(s,g),Io(s,f),u=ad(n,s,u,h,g,f),h=ud(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,kr(n,s,f)):(et&&h&&$h(s),s.flags|=1,Xt(n,s,u,f),s.child)}function _g(n,s,u,h,f){if(un(u)){var g=!0;xl(s)}else g=!1;if(Io(s,f),s.stateNode===null)Ql(n,s),sg(s,u,h),pd(s,u,h,f),h=!0;else if(n===null){var w=s.stateNode,T=s.memoizedProps;w.props=T;var C=w.context,U=u.contextType;typeof U=="object"&&U!==null?U=Vn(U):(U=un(u)?es:jt.current,U=go(s,U));var Y=u.getDerivedStateFromProps,J=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==h||C!==U)&&og(s,w,h,U),oi=!1;var W=s.memoizedState;w.state=W,Fl(s,h,w,f),C=s.memoizedState,T!==h||W!==C||an.current||oi?(typeof Y=="function"&&(fd(s,u,Y,h),C=s.memoizedState),(T=oi||ig(s,u,T,h,W,C,U))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=C),w.props=h,w.state=C,w.context=U,h=T):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Nm(n,s),T=s.memoizedProps,U=s.type===s.elementType?T:Qn(s.type,T),w.props=U,J=s.pendingProps,W=w.context,C=u.contextType,typeof C=="object"&&C!==null?C=Vn(C):(C=un(u)?es:jt.current,C=go(s,C));var re=u.getDerivedStateFromProps;(Y=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==J||W!==C)&&og(s,w,h,C),oi=!1,W=s.memoizedState,w.state=W,Fl(s,h,w,f);var ae=s.memoizedState;T!==J||W!==ae||an.current||oi?(typeof re=="function"&&(fd(s,u,re,h),ae=s.memoizedState),(U=oi||ig(s,u,U,h,W,ae,C)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ae,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ae,C)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ae),w.props=h,w.state=ae,w.context=C,h=U):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),h=!1)}return yd(n,s,u,h,g,f)}function yd(n,s,u,h,f,g){gg(n,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Im(s,u,!1),kr(n,s,g);h=s.stateNode,nE.current=s;var T=w&&typeof u.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&w?(s.child=wo(s,n.child,null,g),s.child=wo(s,null,T,g)):Xt(n,s,T,g),s.memoizedState=h.state,f&&Im(s,u,!0),s.child}function yg(n){var s=n.stateNode;s.pendingContext?wm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&wm(n,s.context,!1),td(n,s.containerInfo)}function vg(n,s,u,h,f){return vo(),Wh(f),s.flags|=256,Xt(n,s,u,h),s.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function wd(n){return{baseLanes:n,cachePool:null,transitions:null}}function wg(n,s,u){var h=s.pendingProps,f=st.current,g=!1,w=(s.flags&128)!==0,T;if((T=w)||(T=n!==null&&n.memoizedState===null?!1:(f&2)!==0),T?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(st,f&1),n===null)return Qh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=h.children,n=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=sc(w,h,0,null),n=cs(n,h,u,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=wd(u),s.memoizedState=vd,n):Ed(s,w));if(f=n.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return rE(n,s,w,h,T,f,u);if(g){g=h.fallback,w=s.mode,f=n.child,T=f.sibling;var C={mode:"hidden",children:h.children};return!(w&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=C,s.deletions=null):(h=fi(f,C),h.subtreeFlags=f.subtreeFlags&14680064),T!==null?g=fi(T,g):(g=cs(g,w,u,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=n.child.memoizedState,w=w===null?wd(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~u,s.memoizedState=vd,h}return g=n.child,n=g.sibling,h=fi(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=u),h.return=s,h.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=h,s.memoizedState=null,h}function Ed(n,s){return s=sc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Kl(n,s,u,h){return h!==null&&Wh(h),wo(s,n.child,null,u),n=Ed(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function rE(n,s,u,h,f,g,w){if(u)return s.flags&256?(s.flags&=-257,h=md(Error(t(422))),Kl(n,s,w,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=sc({mode:"visible",children:h.children},f,0,null),g=cs(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&wo(s,n.child,null,w),s.child.memoizedState=wd(w),s.memoizedState=vd,g);if(!(s.mode&1))return Kl(n,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var T=h.dgst;return h=T,g=Error(t(419)),h=md(g,h,void 0),Kl(n,s,w,h)}if(T=(w&n.childLanes)!==0,ln||T){if(h=xt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|w)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Vr(n,f),Yn(h,n,f,-1))}return Md(),h=md(Error(t(421))),Kl(n,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=gE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,En=ni(f.nextSibling),wn=s,et=!0,Kn=null,n!==null&&(Cn[xn++]=Cr,Cn[xn++]=xr,Cn[xn++]=ts,Cr=n.id,xr=n.overflow,ts=s),s=Ed(s,h.children),s.flags|=4096,s)}function Eg(n,s,u){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Xh(n.return,s,u)}function Id(n,s,u,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=u,g.tailMode=f)}function Ig(n,s,u){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Xt(n,s,h.children,u),h=st.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Eg(n,u,s);else if(n.tag===19)Eg(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(We(st,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(u=s.child,f=null;u!==null;)n=u.alternate,n!==null&&Bl(n)===null&&(f=u),u=u.sibling;u=f,u===null?(f=s.child,s.child=null):(f=u.sibling,u.sibling=null),Id(s,!1,f,u,g);break;case"backwards":for(u=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Bl(n)===null){s.child=f;break}n=f.sibling,f.sibling=u,u=f,f=n}Id(s,!0,u,null,g);break;case"together":Id(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ql(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function kr(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),os|=s.lanes,!(u&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=fi(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=fi(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function iE(n,s,u){switch(s.tag){case 3:yg(s),vo();break;case 5:Lm(s);break;case 1:un(s.type)&&xl(s);break;case 4:td(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;We(Ol,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(We(st,st.current&1),s.flags|=128,null):u&s.child.childLanes?wg(n,s,u):(We(st,st.current&1),n=kr(n,s,u),n!==null?n.sibling:null);We(st,st.current&1);break;case 19:if(h=(u&s.childLanes)!==0,n.flags&128){if(h)return Ig(n,s,u);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(st,st.current),h)break;return null;case 22:case 23:return s.lanes=0,mg(n,s,u)}return kr(n,s,u)}var Tg,Td,Sg,Ag;Tg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Td=function(){},Sg=function(n,s,u,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,is(sr.current);var g=null;switch(u){case"input":f=Mi(n,f),h=Mi(n,h),g=[];break;case"select":f=se({},f,{value:void 0}),h=se({},h,{value:void 0}),g=[];break;case"textarea":f=da(n,f),h=da(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Rl)}ya(u,h);var w;u=null;for(U in f)if(!h.hasOwnProperty(U)&&f.hasOwnProperty(U)&&f[U]!=null)if(U==="style"){var T=f[U];for(w in T)T.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?g||(g=[]):(g=g||[]).push(U,null));for(U in h){var C=h[U];if(T=f!=null?f[U]:void 0,h.hasOwnProperty(U)&&C!==T&&(C!=null||T!=null))if(U==="style")if(T){for(w in T)!T.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in C)C.hasOwnProperty(w)&&T[w]!==C[w]&&(u||(u={}),u[w]=C[w])}else u||(g||(g=[]),g.push(U,u)),u=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(g=g||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(g=g||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&Ye("scroll",n),g||T===C||(g=[])):(g=g||[]).push(U,C))}u&&(g=g||[]).push("style",u);var U=g;(s.updateQueue=U)&&(s.flags|=4)}},Ag=function(n,s,u,h){u!==h&&(s.flags|=4)};function Xa(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,h=0;if(s)for(var f=n.child;f!==null;)u|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)u|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=u,s}function sE(n,s,u){var h=s.pendingProps;switch(Gh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return un(s.type)&&Cl(),$t(s),null;case 3:return h=s.stateNode,To(),Je(an),Je(jt),id(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Nl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Kn!==null&&(bd(Kn),Kn=null))),Td(n,s),$t(s),null;case 5:nd(s);var f=is(Qa.current);if(u=s.type,n!==null&&s.stateNode!=null)Sg(n,s,u,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return $t(s),null}if(n=is(sr.current),Nl(s)){h=s.stateNode,u=s.type;var g=s.memoizedProps;switch(h[ir]=s,h[ja]=g,n=(s.mode&1)!==0,u){case"dialog":Ye("cancel",h),Ye("close",h);break;case"iframe":case"object":case"embed":Ye("load",h);break;case"video":case"audio":for(f=0;f<Ba.length;f++)Ye(Ba[f],h);break;case"source":Ye("error",h);break;case"img":case"image":case"link":Ye("error",h),Ye("load",h);break;case"details":Ye("toggle",h);break;case"input":Ms(h,g),Ye("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ye("invalid",h);break;case"textarea":Bs(h,g),Ye("invalid",h)}ya(u,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var T=g[w];w==="children"?typeof T=="string"?h.textContent!==T&&(g.suppressHydrationWarning!==!0&&Al(h.textContent,T,n),f=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(g.suppressHydrationWarning!==!0&&Al(h.textContent,T,n),f=["children",""+T]):o.hasOwnProperty(w)&&T!=null&&w==="onScroll"&&Ye("scroll",h)}switch(u){case"input":gr(h),Ju(h,g,!0);break;case"textarea":gr(h),fa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Rl)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wt(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(u,{is:h.is}):(n=w.createElement(u),u==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,u),n[ir]=s,n[ja]=h,Tg(n,s,!1,!1),s.stateNode=n;e:{switch(w=va(u,h),u){case"dialog":Ye("cancel",n),Ye("close",n),f=h;break;case"iframe":case"object":case"embed":Ye("load",n),f=h;break;case"video":case"audio":for(f=0;f<Ba.length;f++)Ye(Ba[f],n);f=h;break;case"source":Ye("error",n),f=h;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),f=h;break;case"details":Ye("toggle",n),f=h;break;case"input":Ms(n,h),f=Mi(n,h),Ye("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=se({},h,{value:void 0}),Ye("invalid",n);break;case"textarea":Bs(n,h),f=da(n,h),Ye("invalid",n);break;default:f=h}ya(u,f),T=f;for(g in T)if(T.hasOwnProperty(g)){var C=T[g];g==="style"?ga(n,C):g==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&pa(n,C)):g==="children"?typeof C=="string"?(u!=="textarea"||C!=="")&&Gr(n,C):typeof C=="number"&&Gr(n,""+C):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?C!=null&&g==="onScroll"&&Ye("scroll",n):C!=null&&le(n,g,C,w))}switch(u){case"input":gr(n),Ju(n,h,!1);break;case"textarea":gr(n),fa(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ue(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?yr(n,!!h.multiple,g,!1):h.defaultValue!=null&&yr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Rl)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return $t(s),null;case 6:if(n&&s.stateNode!=null)Ag(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(u=is(Qa.current),is(sr.current),Nl(s)){if(h=s.stateNode,u=s.memoizedProps,h[ir]=s,(g=h.nodeValue!==u)&&(n=wn,n!==null))switch(n.tag){case 3:Al(h.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Al(h.nodeValue,u,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[ir]=s,s.stateNode=h}return $t(s),null;case 13:if(Je(st),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&En!==null&&s.mode&1&&!(s.flags&128))Cm(),vo(),s.flags|=98560,g=!1;else if(g=Nl(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ir]=s}else vo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;$t(s),g=!1}else Kn!==null&&(bd(Kn),Kn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=u,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||st.current&1?St===0&&(St=3):Md())),s.updateQueue!==null&&(s.flags|=4),$t(s),null);case 4:return To(),Td(n,s),n===null&&Ua(s.stateNode.containerInfo),$t(s),null;case 10:return Jh(s.type._context),$t(s),null;case 17:return un(s.type)&&Cl(),$t(s),null;case 19:if(Je(st),g=s.memoizedState,g===null)return $t(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Xa(g,!1);else{if(St!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(w=Bl(n),w!==null){for(s.flags|=128,Xa(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=u,u=s.child;u!==null;)g=u,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return We(st,st.current&1|2),s.child}n=n.sibling}g.tail!==null&&Qe()>Po&&(s.flags|=128,h=!0,Xa(g,!1),s.lanes=4194304)}else{if(!h)if(n=Bl(w),n!==null){if(s.flags|=128,h=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),Xa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!et)return $t(s),null}else 2*Qe()-g.renderingStartTime>Po&&u!==1073741824&&(s.flags|=128,h=!0,Xa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(u=g.last,u!==null?u.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Qe(),s.sibling=null,u=st.current,We(st,h?u&1|2:u&1),s):($t(s),null);case 22:case 23:return Ld(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?In&1073741824&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function oE(n,s){switch(Gh(s),s.tag){case 1:return un(s.type)&&Cl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return To(),Je(an),Je(jt),id(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return nd(s),null;case 13:if(Je(st),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));vo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Je(st),null;case 4:return To(),null;case 10:return Jh(s.type._context),null;case 22:case 23:return Ld(),null;case 24:return null;default:return null}}var Wl=!1,Gt=!1,aE=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ao(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){ut(n,s,h)}else u.current=null}function Sd(n,s,u){try{u()}catch(h){ut(n,s,h)}}var Rg=!1;function uE(n,s){if(Lh=Zr,n=im(),Ch(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var w=0,T=-1,C=-1,U=0,Y=0,J=n,W=null;t:for(;;){for(var re;J!==u||f!==0&&J.nodeType!==3||(T=w+f),J!==g||h!==0&&J.nodeType!==3||(C=w+h),J.nodeType===3&&(w+=J.nodeValue.length),(re=J.firstChild)!==null;)W=J,J=re;for(;;){if(J===n)break t;if(W===u&&++U===f&&(T=w),W===g&&++Y===h&&(C=w),(re=J.nextSibling)!==null)break;J=W,W=J.parentNode}J=re}u=T===-1||C===-1?null:{start:T,end:C}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mh={focusedElem:n,selectionRange:u},Zr=!1,oe=s;oe!==null;)if(s=oe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,oe=n;else for(;oe!==null;){s=oe;try{var ae=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,dt=ae.memoizedState,F=s.stateNode,V=F.getSnapshotBeforeUpdate(s.elementType===s.type?ce:Qn(s.type,ce),dt);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){ut(s,s.return,X)}if(n=s.sibling,n!==null){n.return=s.return,oe=n;break}oe=s.return}return ae=Rg,Rg=!1,ae}function Za(n,s,u){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Sd(s,u,g)}f=f.next}while(f!==h)}}function Hl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var h=u.create;u.destroy=h()}u=u.next}while(u!==s)}}function Ad(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function Pg(n){var s=n.alternate;s!==null&&(n.alternate=null,Pg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[ir],delete s[ja],delete s[zh],delete s[$0],delete s[G0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Cg(n){return n.tag===5||n.tag===3||n.tag===4}function xg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Cg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rd(n,s,u){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Rl));else if(h!==4&&(n=n.child,n!==null))for(Rd(n,s,u),n=n.sibling;n!==null;)Rd(n,s,u),n=n.sibling}function Pd(n,s,u){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Pd(n,s,u),n=n.sibling;n!==null;)Pd(n,s,u),n=n.sibling}var Ot=null,Wn=!1;function ui(n,s,u){for(u=u.child;u!==null;)Vg(n,s,u),u=u.sibling}function Vg(n,s,u){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Ki,u)}catch{}switch(u.tag){case 5:Gt||Ao(u,s);case 6:var h=Ot,f=Wn;Ot=null,ui(n,s,u),Ot=h,Wn=f,Ot!==null&&(Wn?(n=Ot,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):Ot.removeChild(u.stateNode));break;case 18:Ot!==null&&(Wn?(n=Ot,u=u.stateNode,n.nodeType===8?Uh(n.parentNode,u):n.nodeType===1&&Uh(n,u),qn(n)):Uh(Ot,u.stateNode));break;case 4:h=Ot,f=Wn,Ot=u.stateNode.containerInfo,Wn=!0,ui(n,s,u),Ot=h,Wn=f;break;case 0:case 11:case 14:case 15:if(!Gt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&Sd(u,s,w),f=f.next}while(f!==h)}ui(n,s,u);break;case 1:if(!Gt&&(Ao(u,s),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(T){ut(u,s,T)}ui(n,s,u);break;case 21:ui(n,s,u);break;case 22:u.mode&1?(Gt=(h=Gt)||u.memoizedState!==null,ui(n,s,u),Gt=h):ui(n,s,u);break;default:ui(n,s,u)}}function Dg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new aE),s.forEach(function(h){var f=_E.bind(null,n,h);u.has(h)||(u.add(h),h.then(f,f))})}}function Hn(n,s){var u=s.deletions;if(u!==null)for(var h=0;h<u.length;h++){var f=u[h];try{var g=n,w=s,T=w;e:for(;T!==null;){switch(T.tag){case 5:Ot=T.stateNode,Wn=!1;break e;case 3:Ot=T.stateNode.containerInfo,Wn=!0;break e;case 4:Ot=T.stateNode.containerInfo,Wn=!0;break e}T=T.return}if(Ot===null)throw Error(t(160));Vg(g,w,f),Ot=null,Wn=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(U){ut(f,s,U)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)kg(s,n),s=s.sibling}function kg(n,s){var u=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hn(s,n),ar(n),h&4){try{Za(3,n,n.return),Hl(3,n)}catch(ce){ut(n,n.return,ce)}try{Za(5,n,n.return)}catch(ce){ut(n,n.return,ce)}}break;case 1:Hn(s,n),ar(n),h&512&&u!==null&&Ao(u,u.return);break;case 5:if(Hn(s,n),ar(n),h&512&&u!==null&&Ao(u,u.return),n.flags&32){var f=n.stateNode;try{Gr(f,"")}catch(ce){ut(n,n.return,ce)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=u!==null?u.memoizedProps:g,T=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{T==="input"&&g.type==="radio"&&g.name!=null&&ca(f,g),va(T,w);var U=va(T,g);for(w=0;w<C.length;w+=2){var Y=C[w],J=C[w+1];Y==="style"?ga(f,J):Y==="dangerouslySetInnerHTML"?pa(f,J):Y==="children"?Gr(f,J):le(f,Y,J,U)}switch(T){case"input":ha(f,g);break;case"textarea":Us(f,g);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var re=g.value;re!=null?yr(f,!!g.multiple,re,!1):W!==!!g.multiple&&(g.defaultValue!=null?yr(f,!!g.multiple,g.defaultValue,!0):yr(f,!!g.multiple,g.multiple?[]:"",!1))}f[ja]=g}catch(ce){ut(n,n.return,ce)}}break;case 6:if(Hn(s,n),ar(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ce){ut(n,n.return,ce)}}break;case 3:if(Hn(s,n),ar(n),h&4&&u!==null&&u.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(ce){ut(n,n.return,ce)}break;case 4:Hn(s,n),ar(n);break;case 13:Hn(s,n),ar(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Vd=Qe())),h&4&&Dg(n);break;case 22:if(Y=u!==null&&u.memoizedState!==null,n.mode&1?(Gt=(U=Gt)||Y,Hn(s,n),Gt=U):Hn(s,n),ar(n),h&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!Y&&n.mode&1)for(oe=n,Y=n.child;Y!==null;){for(J=oe=Y;oe!==null;){switch(W=oe,re=W.child,W.tag){case 0:case 11:case 14:case 15:Za(4,W,W.return);break;case 1:Ao(W,W.return);var ae=W.stateNode;if(typeof ae.componentWillUnmount=="function"){h=W,u=W.return;try{s=h,ae.props=s.memoizedProps,ae.state=s.memoizedState,ae.componentWillUnmount()}catch(ce){ut(h,u,ce)}}break;case 5:Ao(W,W.return);break;case 22:if(W.memoizedState!==null){Og(J);continue}}re!==null?(re.return=W,oe=re):Og(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{f=J.stateNode,U?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(T=J.stateNode,C=J.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=ma("display",w))}catch(ce){ut(n,n.return,ce)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=U?"":J.memoizedProps}catch(ce){ut(n,n.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Hn(s,n),ar(n),h&4&&Dg(n);break;case 21:break;default:Hn(s,n),ar(n)}}function ar(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(Cg(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Gr(f,""),h.flags&=-33);var g=xg(n);Pd(n,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,T=xg(n);Rd(n,T,w);break;default:throw Error(t(161))}}catch(C){ut(n,n.return,C)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function lE(n,s,u){oe=n,Ng(n)}function Ng(n,s,u){for(var h=(n.mode&1)!==0;oe!==null;){var f=oe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Wl;if(!w){var T=f.alternate,C=T!==null&&T.memoizedState!==null||Gt;T=Wl;var U=Gt;if(Wl=w,(Gt=C)&&!U)for(oe=f;oe!==null;)w=oe,C=w.child,w.tag===22&&w.memoizedState!==null?Lg(f):C!==null?(C.return=w,oe=C):Lg(f);for(;g!==null;)oe=g,Ng(g),g=g.sibling;oe=f,Wl=T,Gt=U}bg(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,oe=g):bg(n)}}function bg(n){for(;oe!==null;){var s=oe;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Gt||Hl(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Gt)if(u===null)h.componentDidMount();else{var f=s.elementType===s.type?u.memoizedProps:Qn(s.type,u.memoizedProps);h.componentDidUpdate(f,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Om(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Om(s,w,u)}break;case 5:var T=s.stateNode;if(u===null&&s.flags&4){u=T;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&u.focus();break;case"img":C.src&&(u.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var U=s.alternate;if(U!==null){var Y=U.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&qn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&Ad(s)}catch(W){ut(s,s.return,W)}}if(s===n){oe=null;break}if(u=s.sibling,u!==null){u.return=s.return,oe=u;break}oe=s.return}}function Og(n){for(;oe!==null;){var s=oe;if(s===n){oe=null;break}var u=s.sibling;if(u!==null){u.return=s.return,oe=u;break}oe=s.return}}function Lg(n){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Hl(4,s)}catch(C){ut(s,u,C)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(C){ut(s,f,C)}}var g=s.return;try{Ad(s)}catch(C){ut(s,g,C)}break;case 5:var w=s.return;try{Ad(s)}catch(C){ut(s,w,C)}}}catch(C){ut(s,s.return,C)}if(s===n){oe=null;break}var T=s.sibling;if(T!==null){T.return=s.return,oe=T;break}oe=s.return}}var cE=Math.ceil,Yl=we.ReactCurrentDispatcher,Cd=we.ReactCurrentOwner,kn=we.ReactCurrentBatchConfig,Oe=0,xt=null,_t=null,Lt=0,In=0,Ro=ri(0),St=0,eu=null,os=0,Jl=0,xd=0,tu=null,cn=null,Vd=0,Po=1/0,Nr=null,Xl=!1,Dd=null,li=null,Zl=!1,ci=null,ec=0,nu=0,kd=null,tc=-1,nc=0;function Zt(){return Oe&6?Qe():tc!==-1?tc:tc=Qe()}function hi(n){return n.mode&1?Oe&2&&Lt!==0?Lt&-Lt:Q0.transition!==null?(nc===0&&(nc=Wi()),nc):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:Va(n.type)),n):1}function Yn(n,s,u,h){if(50<nu)throw nu=0,kd=null,Error(t(185));Hr(n,u,h),(!(Oe&2)||n!==xt)&&(n===xt&&(!(Oe&2)&&(Jl|=u),St===4&&di(n,Lt)),hn(n,h),u===1&&Oe===0&&!(s.mode&1)&&(Po=Qe()+500,Vl&&si()))}function hn(n,s){var u=n.callbackNode;Er(n,s);var h=Qi(n,n===xt?Lt:0);if(h===0)u!==null&&Aa(u),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(u!=null&&Aa(u),s===1)n.tag===0?K0(Fg.bind(null,n)):Tm(Fg.bind(null,n)),j0(function(){!(Oe&6)&&si()}),u=null;else{switch(Jr(h)){case 1:u=Gi;break;case 4:u=Kr;break;case 16:u=An;break;case 536870912:u=nl;break;default:u=An}u=Kg(u,Mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function Mg(n,s){if(tc=-1,nc=0,Oe&6)throw Error(t(327));var u=n.callbackNode;if(Co()&&n.callbackNode!==u)return null;var h=Qi(n,n===xt?Lt:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=rc(n,h);else{s=h;var f=Oe;Oe|=2;var g=Ug();(xt!==n||Lt!==s)&&(Nr=null,Po=Qe()+500,us(n,s));do try{fE();break}catch(T){Bg(n,T)}while(!0);Yh(),Yl.current=g,Oe=f,_t!==null?s=0:(xt=null,Lt=0,s=St)}if(s!==0){if(s===2&&(f=_n(n),f!==0&&(h=f,s=Nd(n,f))),s===1)throw u=eu,us(n,0),di(n,h),hn(n,Qe()),u;if(s===6)di(n,h);else{if(f=n.current.alternate,!(h&30)&&!hE(f)&&(s=rc(n,h),s===2&&(g=_n(n),g!==0&&(h=g,s=Nd(n,g))),s===1))throw u=eu,us(n,0),di(n,h),hn(n,Qe()),u;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ls(n,cn,Nr);break;case 3:if(di(n,h),(h&130023424)===h&&(s=Vd+500-Qe(),10<s)){if(Qi(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Zt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Bh(ls.bind(null,n,cn,Nr),s);break}ls(n,cn,Nr);break;case 4:if(di(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var w=31-Yt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*cE(h/1960))-h,10<h){n.timeoutHandle=Bh(ls.bind(null,n,cn,Nr),h);break}ls(n,cn,Nr);break;case 5:ls(n,cn,Nr);break;default:throw Error(t(329))}}}return hn(n,Qe()),n.callbackNode===u?Mg.bind(null,n):null}function Nd(n,s){var u=tu;return n.current.memoizedState.isDehydrated&&(us(n,s).flags|=256),n=rc(n,s),n!==2&&(s=cn,cn=u,s!==null&&bd(s)),n}function bd(n){cn===null?cn=n:cn.push.apply(cn,n)}function hE(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var f=u[h],g=f.getSnapshot;f=f.value;try{if(!Gn(g(),f))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(n,s){for(s&=~xd,s&=~Jl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-Yt(s),h=1<<u;n[u]=-1,s&=~h}}function Fg(n){if(Oe&6)throw Error(t(327));Co();var s=Qi(n,0);if(!(s&1))return hn(n,Qe()),null;var u=rc(n,s);if(n.tag!==0&&u===2){var h=_n(n);h!==0&&(s=h,u=Nd(n,h))}if(u===1)throw u=eu,us(n,0),di(n,s),hn(n,Qe()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ls(n,cn,Nr),hn(n,Qe()),null}function Od(n,s){var u=Oe;Oe|=1;try{return n(s)}finally{Oe=u,Oe===0&&(Po=Qe()+500,Vl&&si())}}function as(n){ci!==null&&ci.tag===0&&!(Oe&6)&&Co();var s=Oe;Oe|=1;var u=kn.transition,h=Ve;try{if(kn.transition=null,Ve=1,n)return n()}finally{Ve=h,kn.transition=u,Oe=s,!(Oe&6)&&si()}}function Ld(){In=Ro.current,Je(Ro)}function us(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,z0(u)),_t!==null)for(u=_t.return;u!==null;){var h=u;switch(Gh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cl();break;case 3:To(),Je(an),Je(jt),id();break;case 5:nd(h);break;case 4:To();break;case 13:Je(st);break;case 19:Je(st);break;case 10:Jh(h.type._context);break;case 22:case 23:Ld()}u=u.return}if(xt=n,_t=n=fi(n.current,null),Lt=In=s,St=0,eu=null,xd=Jl=os=0,cn=tu=null,rs!==null){for(s=0;s<rs.length;s++)if(u=rs[s],h=u.interleaved,h!==null){u.interleaved=null;var f=h.next,g=u.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}u.pending=h}rs=null}return n}function Bg(n,s){do{var u=_t;try{if(Yh(),Ul.current=$l,zl){for(var h=ot.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}zl=!1}if(ss=0,Ct=Tt=ot=null,Wa=!1,Ha=0,Cd.current=null,u===null||u.return===null){St=1,eu=s,_t=null;break}e:{var g=n,w=u.return,T=u,C=s;if(s=Lt,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,Y=T,J=Y.tag;if(!(Y.mode&1)&&(J===0||J===11||J===15)){var W=Y.alternate;W?(Y.updateQueue=W.updateQueue,Y.memoizedState=W.memoizedState,Y.lanes=W.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var re=cg(w);if(re!==null){re.flags&=-257,hg(re,w,T,g,s),re.mode&1&&lg(g,U,s),s=re,C=U;var ae=s.updateQueue;if(ae===null){var ce=new Set;ce.add(C),s.updateQueue=ce}else ae.add(C);break e}else{if(!(s&1)){lg(g,U,s),Md();break e}C=Error(t(426))}}else if(et&&T.mode&1){var dt=cg(w);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),hg(dt,w,T,g,s),Wh(So(C,T));break e}}g=C=So(C,T),St!==4&&(St=2),tu===null?tu=[g]:tu.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=ag(g,C,s);bm(g,F);break e;case 1:T=C;var V=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(li===null||!li.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var X=ug(g,T,s);bm(g,X);break e}}g=g.return}while(g!==null)}jg(u)}catch(he){s=he,_t===u&&u!==null&&(_t=u=u.return);continue}break}while(!0)}function Ug(){var n=Yl.current;return Yl.current=$l,n===null?$l:n}function Md(){(St===0||St===3||St===2)&&(St=4),xt===null||!(os&268435455)&&!(Jl&268435455)||di(xt,Lt)}function rc(n,s){var u=Oe;Oe|=2;var h=Ug();(xt!==n||Lt!==s)&&(Nr=null,us(n,s));do try{dE();break}catch(f){Bg(n,f)}while(!0);if(Yh(),Oe=u,Yl.current=h,_t!==null)throw Error(t(261));return xt=null,Lt=0,St}function dE(){for(;_t!==null;)zg(_t)}function fE(){for(;_t!==null&&!el();)zg(_t)}function zg(n){var s=Gg(n.alternate,n,In);n.memoizedProps=n.pendingProps,s===null?jg(n):_t=s,Cd.current=null}function jg(n){var s=n;do{var u=s.alternate;if(n=s.return,s.flags&32768){if(u=oE(u,s),u!==null){u.flags&=32767,_t=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,_t=null;return}}else if(u=sE(u,s,In),u!==null){_t=u;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);St===0&&(St=5)}function ls(n,s,u){var h=Ve,f=kn.transition;try{kn.transition=null,Ve=1,pE(n,s,u,h)}finally{kn.transition=f,Ve=h}return null}function pE(n,s,u,h){do Co();while(ci!==null);if(Oe&6)throw Error(t(327));u=n.finishedWork;var f=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=u.lanes|u.childLanes;if(Ge(n,g),n===xt&&(_t=xt=null,Lt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Zl||(Zl=!0,Kg(An,function(){return Co(),null})),g=(u.flags&15990)!==0,u.subtreeFlags&15990||g){g=kn.transition,kn.transition=null;var w=Ve;Ve=1;var T=Oe;Oe|=4,Cd.current=null,uE(n,u),kg(u,n),b0(Mh),Zr=!!Lh,Mh=Lh=null,n.current=u,lE(u),wh(),Oe=T,Ve=w,kn.transition=g}else n.current=u;if(Zl&&(Zl=!1,ci=n,ec=f),g=n.pendingLanes,g===0&&(li=null),rl(u.stateNode),hn(n,Qe()),s!==null)for(h=n.onRecoverableError,u=0;u<s.length;u++)f=s[u],h(f.value,{componentStack:f.stack,digest:f.digest});if(Xl)throw Xl=!1,n=Dd,Dd=null,n;return ec&1&&n.tag!==0&&Co(),g=n.pendingLanes,g&1?n===kd?nu++:(nu=0,kd=n):nu=0,si(),null}function Co(){if(ci!==null){var n=Jr(ec),s=kn.transition,u=Ve;try{if(kn.transition=null,Ve=16>n?16:n,ci===null)var h=!1;else{if(n=ci,ci=null,ec=0,Oe&6)throw Error(t(331));var f=Oe;for(Oe|=4,oe=n.current;oe!==null;){var g=oe,w=g.child;if(oe.flags&16){var T=g.deletions;if(T!==null){for(var C=0;C<T.length;C++){var U=T[C];for(oe=U;oe!==null;){var Y=oe;switch(Y.tag){case 0:case 11:case 15:Za(8,Y,g)}var J=Y.child;if(J!==null)J.return=Y,oe=J;else for(;oe!==null;){Y=oe;var W=Y.sibling,re=Y.return;if(Pg(Y),Y===U){oe=null;break}if(W!==null){W.return=re,oe=W;break}oe=re}}}var ae=g.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var dt=ce.sibling;ce.sibling=null,ce=dt}while(ce!==null)}}oe=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,oe=w;else e:for(;oe!==null;){if(g=oe,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Za(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,oe=F;break e}oe=g.return}}var V=n.current;for(oe=V;oe!==null;){w=oe;var B=w.child;if(w.subtreeFlags&2064&&B!==null)B.return=w,oe=B;else e:for(w=V;oe!==null;){if(T=oe,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:Hl(9,T)}}catch(he){ut(T,T.return,he)}if(T===w){oe=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,oe=X;break e}oe=T.return}}if(Oe=f,si(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Ki,n)}catch{}h=!0}return h}finally{Ve=u,kn.transition=s}}return!1}function qg(n,s,u){s=So(u,s),s=ag(n,s,1),n=ai(n,s,1),s=Zt(),n!==null&&(Hr(n,1,s),hn(n,s))}function ut(n,s,u){if(n.tag===3)qg(n,n,u);else for(;s!==null;){if(s.tag===3){qg(s,n,u);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(li===null||!li.has(h))){n=So(u,n),n=ug(s,n,1),s=ai(s,n,1),n=Zt(),s!==null&&(Hr(s,1,n),hn(s,n));break}}s=s.return}}function mE(n,s,u){var h=n.pingCache;h!==null&&h.delete(s),s=Zt(),n.pingedLanes|=n.suspendedLanes&u,xt===n&&(Lt&u)===u&&(St===4||St===3&&(Lt&130023424)===Lt&&500>Qe()-Vd?us(n,0):xd|=u),hn(n,s)}function $g(n,s){s===0&&(n.mode&1?(s=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):s=1);var u=Zt();n=Vr(n,s),n!==null&&(Hr(n,s,u),hn(n,u))}function gE(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),$g(n,u)}function _E(n,s){var u=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(u=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),$g(n,u)}var Gg;Gg=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||an.current)ln=!0;else{if(!(n.lanes&u)&&!(s.flags&128))return ln=!1,iE(n,s,u);ln=!!(n.flags&131072)}else ln=!1,et&&s.flags&1048576&&Sm(s,kl,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Ql(n,s),n=s.pendingProps;var f=go(s,jt.current);Io(s,u),f=ad(null,s,h,n,f,u);var g=ud();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,un(h)?(g=!0,xl(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,ed(s),f.updater=Gl,s.stateNode=f,f._reactInternals=s,pd(s,h,n,u),s=yd(null,s,h,!0,g,u)):(s.tag=0,et&&g&&$h(s),Xt(null,s,f,u),s=s.child),s;case 16:h=s.elementType;e:{switch(Ql(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=vE(h),n=Qn(h,n),f){case 0:s=_d(null,s,h,n,u);break e;case 1:s=_g(null,s,h,n,u);break e;case 11:s=dg(null,s,h,n,u);break e;case 14:s=fg(null,s,h,Qn(h.type,n),u);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Qn(h,f),_d(n,s,h,f,u);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Qn(h,f),_g(n,s,h,f,u);case 3:e:{if(yg(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Nm(n,s),Fl(s,h,null,u);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=So(Error(t(423)),s),s=vg(n,s,h,u,f);break e}else if(h!==f){f=So(Error(t(424)),s),s=vg(n,s,h,u,f);break e}else for(En=ni(s.stateNode.containerInfo.firstChild),wn=s,et=!0,Kn=null,u=Dm(s,null,h,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(vo(),h===f){s=kr(n,s,u);break e}Xt(n,s,h,u)}s=s.child}return s;case 5:return Lm(s),n===null&&Qh(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,Fh(h,f)?w=null:g!==null&&Fh(h,g)&&(s.flags|=32),gg(n,s),Xt(n,s,w,u),s.child;case 6:return n===null&&Qh(s),null;case 13:return wg(n,s,u);case 4:return td(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=wo(s,null,h,u):Xt(n,s,h,u),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Qn(h,f),dg(n,s,h,f,u);case 7:return Xt(n,s,s.pendingProps,u),s.child;case 8:return Xt(n,s,s.pendingProps.children,u),s.child;case 12:return Xt(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,We(Ol,h._currentValue),h._currentValue=w,g!==null)if(Gn(g.value,w)){if(g.children===f.children&&!an.current){s=kr(n,s,u);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var T=g.dependencies;if(T!==null){w=g.child;for(var C=T.firstContext;C!==null;){if(C.context===h){if(g.tag===1){C=Dr(-1,u&-u),C.tag=2;var U=g.updateQueue;if(U!==null){U=U.shared;var Y=U.pending;Y===null?C.next=C:(C.next=Y.next,Y.next=C),U.pending=C}}g.lanes|=u,C=g.alternate,C!==null&&(C.lanes|=u),Xh(g.return,u,s),T.lanes|=u;break}C=C.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=u,T=w.alternate,T!==null&&(T.lanes|=u),Xh(w,u,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Xt(n,s,f.children,u),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Io(s,u),f=Vn(f),h=h(f),s.flags|=1,Xt(n,s,h,u),s.child;case 14:return h=s.type,f=Qn(h,s.pendingProps),f=Qn(h.type,f),fg(n,s,h,f,u);case 15:return pg(n,s,s.type,s.pendingProps,u);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Qn(h,f),Ql(n,s),s.tag=1,un(h)?(n=!0,xl(s)):n=!1,Io(s,u),sg(s,h,f),pd(s,h,f,u),yd(null,s,h,!0,n,u);case 19:return Ig(n,s,u);case 22:return mg(n,s,u)}throw Error(t(156,s.tag))};function Kg(n,s){return Ws(n,s)}function yE(n,s,u,h){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,s,u,h){return new yE(n,s,u,h)}function Fd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vE(n){if(typeof n=="function")return Fd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===Ut)return 14}return 2}function fi(n,s){var u=n.alternate;return u===null?(u=Nn(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function ic(n,s,u,h,f,g){var w=2;if(h=n,typeof n=="function")Fd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case x:return cs(u.children,f,g,s);case S:w=8,f|=8;break;case P:return n=Nn(12,u,s,f|2),n.elementType=P,n.lanes=g,n;case R:return n=Nn(13,u,s,f),n.elementType=R,n.lanes=g,n;case ct:return n=Nn(19,u,s,f),n.elementType=ct,n.lanes=g,n;case $e:return sc(u,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:w=10;break e;case k:w=9;break e;case O:w=11;break e;case Ut:w=14;break e;case zt:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Nn(w,u,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function cs(n,s,u,h){return n=Nn(7,n,h,s),n.lanes=u,n}function sc(n,s,u,h){return n=Nn(22,n,h,s),n.elementType=$e,n.lanes=u,n.stateNode={isHidden:!1},n}function Bd(n,s,u){return n=Nn(6,n,null,s),n.lanes=u,n}function Ud(n,s,u){return s=Nn(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function wE(n,s,u,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wr(0),this.expirationTimes=Wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function zd(n,s,u,h,f,g,w,T,C){return n=new wE(n,s,u,T,C),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(g),n}function EE(n,s,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:h==null?null:""+h,children:n,containerInfo:s,implementation:u}}function Qg(n){if(!n)return ii;n=n._reactInternals;e:{if(Fn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(un(u))return Em(n,u,s)}return s}function Wg(n,s,u,h,f,g,w,T,C){return n=zd(u,h,!0,n,f,g,w,T,C),n.context=Qg(null),u=n.current,h=Zt(),f=hi(u),g=Dr(h,f),g.callback=s??null,ai(u,g,f),n.current.lanes=f,Hr(n,f,h),hn(n,h),n}function oc(n,s,u,h){var f=s.current,g=Zt(),w=hi(f);return u=Qg(u),s.context===null?s.context=u:s.pendingContext=u,s=Dr(g,w),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ai(f,s,w),n!==null&&(Yn(n,f,w,g),Ml(n,f,w)),w}function ac(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Hg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function jd(n,s){Hg(n,s),(n=n.alternate)&&Hg(n,s)}function IE(){return null}var Yg=typeof reportError=="function"?reportError:function(n){console.error(n)};function qd(n){this._internalRoot=n}uc.prototype.render=qd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));oc(n,s,null,null)},uc.prototype.unmount=qd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;as(function(){oc(null,n,null,null)}),s[Rr]=null}};function uc(n){this._internalRoot=n}uc.prototype.unstable_scheduleHydration=function(n){if(n){var s=ul();n={blockedOn:null,target:n,priority:s};for(var u=0;u<er.length&&s!==0&&s<er[u].priority;u++);er.splice(u,0,n),u===0&&hl(n)}};function $d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function TE(n,s,u,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var U=ac(w);g.call(U)}}var w=Wg(s,h,n,0,null,!1,!1,"",Jg);return n._reactRootContainer=w,n[Rr]=w.current,Ua(n.nodeType===8?n.parentNode:n),as(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var T=h;h=function(){var U=ac(C);T.call(U)}}var C=zd(n,0,!1,null,null,!1,!1,"",Jg);return n._reactRootContainer=C,n[Rr]=C.current,Ua(n.nodeType===8?n.parentNode:n),as(function(){oc(s,C,u,h)}),C}function cc(n,s,u,h,f){var g=u._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var T=f;f=function(){var C=ac(w);T.call(C)}}oc(s,w,n,f)}else w=TE(u,s,n,f,h);return ac(w)}ol=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=Qr(s.pendingLanes);u!==0&&(Yr(s,u|1),hn(s,Qe()),!(Oe&6)&&(Po=Qe()+500,si()))}break;case 13:as(function(){var h=Vr(n,1);if(h!==null){var f=Zt();Yn(h,n,1,f)}}),jd(n,1)}},Js=function(n){if(n.tag===13){var s=Vr(n,134217728);if(s!==null){var u=Zt();Yn(s,n,134217728,u)}jd(n,134217728)}},al=function(n){if(n.tag===13){var s=hi(n),u=Vr(n,s);if(u!==null){var h=Zt();Yn(u,n,s,h)}jd(n,s)}},ul=function(){return Ve},ll=function(n,s){var u=Ve;try{return Ve=n,s()}finally{Ve=u}},js=function(n,s,u){switch(s){case"input":if(ha(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var h=u[s];if(h!==n&&h.form===n.form){var f=Pl(h);if(!f)throw Error(t(90));Ls(h),ha(h,f)}}}break;case"textarea":Us(n,u);break;case"select":s=u.value,s!=null&&yr(n,!!u.multiple,s,!1)}},zi=Od,Ea=as;var SE={usingClientEntryPoint:!1,Events:[qa,po,Pl,Xn,wa,Od]},ru={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AE={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Sa(n),n===null?null:n.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||IE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Ki=hc.inject(AE),gn=hc}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SE,dn.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(s))throw Error(t(200));return EE(n,s,null,u)},dn.createRoot=function(n,s){if(!$d(n))throw Error(t(299));var u=!1,h="",f=Yg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=zd(n,1,!1,null,null,u,!1,h,f),n[Rr]=s.current,Ua(n.nodeType===8?n.parentNode:n),new qd(s)},dn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Sa(s),n=n===null?null:n.stateNode,n},dn.flushSync=function(n){return as(n)},dn.hydrate=function(n,s,u){if(!lc(s))throw Error(t(200));return cc(null,n,s,!0,u)},dn.hydrateRoot=function(n,s,u){if(!$d(n))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,f=!1,g="",w=Yg;if(u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),s=Wg(s,null,n,1,u??null,f,!1,g,w),n[Rr]=s.current,Ua(n),h)for(n=0;n<h.length;n++)u=h[n],f=u._getVersion,f=f(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,f]:s.mutableSourceEagerHydrationData.push(u,f);return new uc(s)},dn.render=function(n,s,u){if(!lc(s))throw Error(t(200));return cc(null,n,s,!1,u)},dn.unmountComponentAtNode=function(n){if(!lc(n))throw Error(t(40));return n._reactRootContainer?(as(function(){cc(null,null,n,!1,function(){n._reactRootContainer=null,n[Rr]=null})}),!0):!1},dn.unstable_batchedUpdates=Od,dn.unstable_renderSubtreeIntoContainer=function(n,s,u,h){if(!lc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return cc(n,s,u,!1,h)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var s_;function NE(){if(s_)return Qd.exports;s_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qd.exports=kE(),Qd.exports}var o_;function bE(){if(o_)return dc;o_=1;var i=NE();return dc.createRoot=i.createRoot,dc.hydrateRoot=i.hydrateRoot,dc}var OE=bE(),uf=Lf(),a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},LE=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=i[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},by={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const a=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,_=p?i[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|_>>6,b=_&63;p||(b=64,c||(A=64)),r.push(t[v],t[E],t[A],t[b])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ny(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):LE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const a=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const _=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||d==null||_==null||E==null)throw new ME;const A=a<<2|d>>4;if(r.push(A),_!==64){const b=d<<4&240|_>>2;if(r.push(b),E!==64){const G=_<<6&192|E;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ME extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FE=function(i){const e=Ny(i);return by.encodeByteArray(e,!0)},xc=function(i){return FE(i).replace(/\./g,"")},BE=function(i){try{return by.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Vc(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!UE(t)||(i[t]=Vc(i[t],e[t]));return i}function UE(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=()=>Oy().__FIREBASE_DEFAULTS__,jE=()=>{if(typeof process>"u"||typeof a_>"u")return;const i=a_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},qE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&BE(i[1]);return e&&JSON.parse(e)},Ly=()=>{try{return zE()||jE()||qE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},My=()=>{var i;return(i=Ly())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[xc(JSON.stringify(t)),xc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KE(){var i;const e=(i=Ly())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QE(){return typeof window<"u"||Fy()}function Fy(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function By(){return!KE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uy(){try{return typeof indexedDB=="object"}catch{return!1}}function WE(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="FirebaseError";class Ds extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=HE,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?YE(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ds(o,d,r)}}function YE(i,e){return i.replace(JE,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const JE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function wu(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=i[o],c=e[o];if(l_(a)&&l_(c)){if(!wu(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function l_(i){return i!==null&&typeof i=="object"}function XE(i,e){const t=new ZE(i,e);return t.subscribe.bind(t)}class ZE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Yd),o.error===void 0&&(o.error=Yd),o.complete===void 0&&(o.complete=Yd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(i){return i&&i._delegate?i._delegate:i}class Is{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $E;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rI(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nI(i){return i===ds?void 0:i}function rI(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=[];var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const jy={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},iI=De.INFO,sI={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},oI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=sI[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ff{constructor(e){this.name=e,this._logLevel=iI,this._logHandler=oI,this._userLogHandler=null,Mf.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}function aI(i){Mf.forEach(e=>{e.setLogLevel(i)})}function uI(i,e){for(const t of Mf){let r=null;e&&e.level&&(r=jy[e.level]),i===null?t.userLogHandler=null:t.userLogHandler=(o,a,...c)=>{const d=c.map(p=>{if(p==null)return null;if(typeof p=="string")return p;if(typeof p=="number"||typeof p=="boolean")return p.toString();if(p instanceof Error)return p.message;try{return JSON.stringify(p)}catch{return null}}).filter(p=>p).join(" ");a>=(r??o.logLevel)&&i({level:De[a].toLowerCase(),message:d,args:c,type:o.name})}}}const lI=(i,e)=>e.some(t=>i instanceof t);let c_,h_;function cI(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hI(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qy=new WeakMap,lf=new WeakMap,$y=new WeakMap,Jd=new WeakMap,Bf=new WeakMap;function dI(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",c)},a=()=>{t(Ei(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&qy.set(t,i)}).catch(()=>{}),Bf.set(e,i),e}function fI(i){if(lf.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",c),i.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",c),i.addEventListener("abort",c)});lf.set(i,e)}let cf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return lf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$y.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function pI(i){cf=i(cf)}function mI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Xd(this),e,...t);return $y.set(r,e.sort?e.sort():[e]),Ei(r)}:hI().includes(i)?function(...e){return i.apply(Xd(this),e),Ei(qy.get(this))}:function(...e){return Ei(i.apply(Xd(this),e))}}function gI(i){return typeof i=="function"?mI(i):(i instanceof IDBTransaction&&fI(i),lI(i,cI())?new Proxy(i,cf):i)}function Ei(i){if(i instanceof IDBRequest)return dI(i);if(Jd.has(i))return Jd.get(i);const e=gI(i);return e!==i&&(Jd.set(i,e),Bf.set(e,i)),e}const Xd=i=>Bf.get(i);function _I(i,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(i,e),d=Ei(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ei(c.result),p.oldVersion,p.newVersion,Ei(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),d}const yI=["get","getKey","getAll","getAllKeys","count"],vI=["put","add","delete","clear"],Zd=new Map;function d_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Zd.get(e))return Zd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=vI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||yI.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(d.shift())),(await Promise.all([_[t](...d),o&&p.done]))[0]};return Zd.set(e,a),a}pI(i=>({...i,get:(e,t,r)=>d_(e,t)||i.get(e,t,r),has:(e,t)=>!!d_(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function EI(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kc="@firebase/app",hf="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Ff("@firebase/app"),II="@firebase/app-compat",TI="@firebase/analytics-compat",SI="@firebase/analytics",AI="@firebase/app-check-compat",RI="@firebase/app-check",PI="@firebase/auth",CI="@firebase/auth-compat",xI="@firebase/database",VI="@firebase/data-connect",DI="@firebase/database-compat",kI="@firebase/functions",NI="@firebase/functions-compat",bI="@firebase/installations",OI="@firebase/installations-compat",LI="@firebase/messaging",MI="@firebase/messaging-compat",FI="@firebase/performance",BI="@firebase/performance-compat",UI="@firebase/remote-config",zI="@firebase/remote-config-compat",jI="@firebase/storage",qI="@firebase/storage-compat",$I="@firebase/firestore",GI="@firebase/vertexai",KI="@firebase/firestore-compat",QI="firebase",WI="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="[DEFAULT]",HI={[kc]:"fire-core",[II]:"fire-core-compat",[SI]:"fire-analytics",[TI]:"fire-analytics-compat",[RI]:"fire-app-check",[AI]:"fire-app-check-compat",[PI]:"fire-auth",[CI]:"fire-auth-compat",[xI]:"fire-rtdb",[VI]:"fire-data-connect",[DI]:"fire-rtdb-compat",[kI]:"fire-fn",[NI]:"fire-fn-compat",[bI]:"fire-iid",[OI]:"fire-iid-compat",[LI]:"fire-fcm",[MI]:"fire-fcm-compat",[FI]:"fire-perf",[BI]:"fire-perf-compat",[UI]:"fire-rc",[zI]:"fire-rc-compat",[jI]:"fire-gcs",[qI]:"fire-gcs-compat",[$I]:"fire-fst",[KI]:"fire-fst-compat",[GI]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Map,Uo=new Map,zo=new Map;function Eu(i,e){try{i.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Gy(i,e){i.container.addOrOverwriteComponent(e)}function jo(i){const e=i.name;if(zo.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;zo.set(e,i);for(const t of Si.values())Eu(t,i);for(const t of Uo.values())Eu(t,i);return!0}function Ky(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function YI(i,e,t=Ti){Ky(i,e).clearInstance(t)}function Qy(i){return i.options!==void 0}function JI(i){return i.settings!==void 0}function XI(){zo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new Qc("app","Firebase",ZI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Wy{constructor(e,t,r,o){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,c,o);else{const d=e;super(d.options,c,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Or(kc,hf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){jf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw On.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=WI;function zf(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ti,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw On.create("bad-app-name",{appName:String(o)});if(t||(t=My()),!t)throw On.create("no-options");const a=Si.get(o);if(a){if(wu(t,a.options)&&wu(r,a.config))return a;throw On.create("duplicate-app",{appName:o})}const c=new zy(o);for(const p of zo.values())c.addComponent(p);const d=new Wy(t,r,c);return Si.set(o,d),d}function tT(i,e){if(QE()&&!Fy())throw On.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Qy(i)?t=i.options:t=i;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const o=_=>[..._].reduce((v,E)=>Math.imul(31,v)+E.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw On.create("finalization-registry-not-supported",{});const a=""+o(JSON.stringify(r)),c=Uo.get(a);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new zy(a);for(const _ of zo.values())d.addComponent(_);const p=new eT(t,e,a,d);return Uo.set(a,p),p}function nT(i=Ti){const e=Si.get(i);if(!e&&i===Ti&&My())return zf();if(!e)throw On.create("no-app",{appName:i});return e}function rT(){return Array.from(Si.values())}async function jf(i){let e=!1;const t=i.name;Si.has(t)?(e=!0,Si.delete(t)):Uo.has(t)&&i.decRefCount()<=0&&(Uo.delete(t),e=!0),e&&(await Promise.all(i.container.getProviders().map(r=>r.delete())),i.isDeleted=!0)}function Or(i,e,t){var r;let o=(r=HI[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(d.join(" "));return}jo(new Is(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}function Hy(i,e){if(i!==null&&typeof i!="function")throw On.create("invalid-log-argument");uI(i,e)}function Yy(i){aI(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebase-heartbeat-database",sT=1,Iu="firebase-heartbeat-store";let ef=null;function Jy(){return ef||(ef=_I(iT,sT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Iu)}catch(t){console.warn(t)}}}}).catch(i=>{throw On.create("idb-open",{originalErrorMessage:i.message})})),ef}async function oT(i){try{const t=(await Jy()).transaction(Iu),r=await t.objectStore(Iu).get(Xy(i));return await t.done,r}catch(e){if(e instanceof Ds)Lr.warn(e.message);else{const t=On.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function f_(i,e){try{const r=(await Jy()).transaction(Iu,"readwrite");await r.objectStore(Iu).put(e,Xy(i)),await r.done}catch(t){if(t instanceof Ds)Lr.warn(t.message);else{const r=On.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(r.message)}}}function Xy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1024,uT=30*24*60*60*1e3;class lT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=p_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=uT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=p_(),{heartbeatsToSend:r,unsentEntries:o}=cT(this._heartbeatsCache.heartbeats),a=xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Lr.warn(t),""}}}function p_(){return new Date().toISOString().substring(0,10)}function cT(i,e=aT){const t=[];let r=i.slice();for(const o of i){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),m_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),m_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uy()?WE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function m_(i){return xc(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(i){jo(new Is("platform-logger",e=>new wI(e),"PRIVATE")),jo(new Is("heartbeat",e=>new lT(e),"PRIVATE")),Or(kc,hf,i),Or(kc,hf,"esm2017"),Or("fire-js","")}dT("");const fT=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ds,SDK_VERSION:Uf,_DEFAULT_ENTRY_NAME:Ti,_addComponent:Eu,_addOrOverwriteComponent:Gy,_apps:Si,_clearComponents:XI,_components:zo,_getProvider:Ky,_isFirebaseApp:Qy,_isFirebaseServerApp:JI,_registerComponent:jo,_removeServiceInstance:YI,_serverApps:Uo,deleteApp:jf,getApp:nT,getApps:rT,initializeApp:zf,initializeServerApp:tT,onLog:Hy,registerVersion:Or,setLogLevel:Yy},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this._delegate=e,this.firebase=t,Eu(e,new Is("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),jf(this._delegate)))}_getService(e,t=Ti){var r;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(e);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ti){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Eu(this._delegate,e)}_addOrOverwriteComponent(e){Gy(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},g_=new Qc("app-compat","Firebase",mT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(i){const e={},t={__esModule:!0,initializeApp:a,app:o,registerVersion:Or,setLogLevel:Yy,onLog:Hy,apps:null,SDK_VERSION:Uf,INTERNAL:{registerComponent:d,removeApp:r,useAsService:p,modularAPIs:fT}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(_){delete e[_]}function o(_){if(_=_||Ti,!u_(e,_))throw g_.create("no-app",{appName:_});return e[_]}o.App=i;function a(_,v={}){const E=zf(_,v);if(u_(e,E.name))return e[E.name];const A=new i(E,t);return e[E.name]=A,A}function c(){return Object.keys(e).map(_=>e[_])}function d(_){const v=_.name,E=v.replace("-compat","");if(jo(_)&&_.type==="PUBLIC"){const A=(b=o())=>{if(typeof b[E]!="function")throw g_.create("invalid-app-argument",{appName:v});return b[E]()};_.serviceProps!==void 0&&Vc(A,_.serviceProps),t[E]=A,i.prototype[E]=function(...b){return this._getService.bind(this,v).apply(this,_.multipleInstances?b:[])}}return _.type==="PUBLIC"?t[E]:null}function p(_,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(){const i=gT(pT);i.INTERNAL=Object.assign(Object.assign({},i.INTERNAL),{createFirebaseNamespace:Zy,extendNamespace:e,createSubscribe:XE,ErrorFactory:Qc,deepExtend:Vc});function e(t){Vc(i,t)}return i}const _T=Zy();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Ff("@firebase/app-compat"),yT="@firebase/app-compat",vT="0.2.47";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(i){Or(yT,vT,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const i=Oy();if(i.firebase!==void 0){__.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=i.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&__.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Wc=_T;wT();var ET="firebase",IT="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wc.registerVersion(ET,IT,"app-compat");var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,ev;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function P(){}P.prototype=S.prototype,x.D=S.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(D,k,O){for(var R=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)R[ct-2]=arguments[ct];return S.prototype[k].apply(D,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,P){P||(P=0);var D=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)D[k]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(k=0;16>k;++k)D[k]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=x.g[0],P=x.g[1],k=x.g[2];var O=x.g[3],R=S+(O^P&(k^O))+D[0]+3614090360&4294967295;S=P+(R<<7&4294967295|R>>>25),R=O+(k^S&(P^k))+D[1]+3905402710&4294967295,O=S+(R<<12&4294967295|R>>>20),R=k+(P^O&(S^P))+D[2]+606105819&4294967295,k=O+(R<<17&4294967295|R>>>15),R=P+(S^k&(O^S))+D[3]+3250441966&4294967295,P=k+(R<<22&4294967295|R>>>10),R=S+(O^P&(k^O))+D[4]+4118548399&4294967295,S=P+(R<<7&4294967295|R>>>25),R=O+(k^S&(P^k))+D[5]+1200080426&4294967295,O=S+(R<<12&4294967295|R>>>20),R=k+(P^O&(S^P))+D[6]+2821735955&4294967295,k=O+(R<<17&4294967295|R>>>15),R=P+(S^k&(O^S))+D[7]+4249261313&4294967295,P=k+(R<<22&4294967295|R>>>10),R=S+(O^P&(k^O))+D[8]+1770035416&4294967295,S=P+(R<<7&4294967295|R>>>25),R=O+(k^S&(P^k))+D[9]+2336552879&4294967295,O=S+(R<<12&4294967295|R>>>20),R=k+(P^O&(S^P))+D[10]+4294925233&4294967295,k=O+(R<<17&4294967295|R>>>15),R=P+(S^k&(O^S))+D[11]+2304563134&4294967295,P=k+(R<<22&4294967295|R>>>10),R=S+(O^P&(k^O))+D[12]+1804603682&4294967295,S=P+(R<<7&4294967295|R>>>25),R=O+(k^S&(P^k))+D[13]+4254626195&4294967295,O=S+(R<<12&4294967295|R>>>20),R=k+(P^O&(S^P))+D[14]+2792965006&4294967295,k=O+(R<<17&4294967295|R>>>15),R=P+(S^k&(O^S))+D[15]+1236535329&4294967295,P=k+(R<<22&4294967295|R>>>10),R=S+(k^O&(P^k))+D[1]+4129170786&4294967295,S=P+(R<<5&4294967295|R>>>27),R=O+(P^k&(S^P))+D[6]+3225465664&4294967295,O=S+(R<<9&4294967295|R>>>23),R=k+(S^P&(O^S))+D[11]+643717713&4294967295,k=O+(R<<14&4294967295|R>>>18),R=P+(O^S&(k^O))+D[0]+3921069994&4294967295,P=k+(R<<20&4294967295|R>>>12),R=S+(k^O&(P^k))+D[5]+3593408605&4294967295,S=P+(R<<5&4294967295|R>>>27),R=O+(P^k&(S^P))+D[10]+38016083&4294967295,O=S+(R<<9&4294967295|R>>>23),R=k+(S^P&(O^S))+D[15]+3634488961&4294967295,k=O+(R<<14&4294967295|R>>>18),R=P+(O^S&(k^O))+D[4]+3889429448&4294967295,P=k+(R<<20&4294967295|R>>>12),R=S+(k^O&(P^k))+D[9]+568446438&4294967295,S=P+(R<<5&4294967295|R>>>27),R=O+(P^k&(S^P))+D[14]+3275163606&4294967295,O=S+(R<<9&4294967295|R>>>23),R=k+(S^P&(O^S))+D[3]+4107603335&4294967295,k=O+(R<<14&4294967295|R>>>18),R=P+(O^S&(k^O))+D[8]+1163531501&4294967295,P=k+(R<<20&4294967295|R>>>12),R=S+(k^O&(P^k))+D[13]+2850285829&4294967295,S=P+(R<<5&4294967295|R>>>27),R=O+(P^k&(S^P))+D[2]+4243563512&4294967295,O=S+(R<<9&4294967295|R>>>23),R=k+(S^P&(O^S))+D[7]+1735328473&4294967295,k=O+(R<<14&4294967295|R>>>18),R=P+(O^S&(k^O))+D[12]+2368359562&4294967295,P=k+(R<<20&4294967295|R>>>12),R=S+(P^k^O)+D[5]+4294588738&4294967295,S=P+(R<<4&4294967295|R>>>28),R=O+(S^P^k)+D[8]+2272392833&4294967295,O=S+(R<<11&4294967295|R>>>21),R=k+(O^S^P)+D[11]+1839030562&4294967295,k=O+(R<<16&4294967295|R>>>16),R=P+(k^O^S)+D[14]+4259657740&4294967295,P=k+(R<<23&4294967295|R>>>9),R=S+(P^k^O)+D[1]+2763975236&4294967295,S=P+(R<<4&4294967295|R>>>28),R=O+(S^P^k)+D[4]+1272893353&4294967295,O=S+(R<<11&4294967295|R>>>21),R=k+(O^S^P)+D[7]+4139469664&4294967295,k=O+(R<<16&4294967295|R>>>16),R=P+(k^O^S)+D[10]+3200236656&4294967295,P=k+(R<<23&4294967295|R>>>9),R=S+(P^k^O)+D[13]+681279174&4294967295,S=P+(R<<4&4294967295|R>>>28),R=O+(S^P^k)+D[0]+3936430074&4294967295,O=S+(R<<11&4294967295|R>>>21),R=k+(O^S^P)+D[3]+3572445317&4294967295,k=O+(R<<16&4294967295|R>>>16),R=P+(k^O^S)+D[6]+76029189&4294967295,P=k+(R<<23&4294967295|R>>>9),R=S+(P^k^O)+D[9]+3654602809&4294967295,S=P+(R<<4&4294967295|R>>>28),R=O+(S^P^k)+D[12]+3873151461&4294967295,O=S+(R<<11&4294967295|R>>>21),R=k+(O^S^P)+D[15]+530742520&4294967295,k=O+(R<<16&4294967295|R>>>16),R=P+(k^O^S)+D[2]+3299628645&4294967295,P=k+(R<<23&4294967295|R>>>9),R=S+(k^(P|~O))+D[0]+4096336452&4294967295,S=P+(R<<6&4294967295|R>>>26),R=O+(P^(S|~k))+D[7]+1126891415&4294967295,O=S+(R<<10&4294967295|R>>>22),R=k+(S^(O|~P))+D[14]+2878612391&4294967295,k=O+(R<<15&4294967295|R>>>17),R=P+(O^(k|~S))+D[5]+4237533241&4294967295,P=k+(R<<21&4294967295|R>>>11),R=S+(k^(P|~O))+D[12]+1700485571&4294967295,S=P+(R<<6&4294967295|R>>>26),R=O+(P^(S|~k))+D[3]+2399980690&4294967295,O=S+(R<<10&4294967295|R>>>22),R=k+(S^(O|~P))+D[10]+4293915773&4294967295,k=O+(R<<15&4294967295|R>>>17),R=P+(O^(k|~S))+D[1]+2240044497&4294967295,P=k+(R<<21&4294967295|R>>>11),R=S+(k^(P|~O))+D[8]+1873313359&4294967295,S=P+(R<<6&4294967295|R>>>26),R=O+(P^(S|~k))+D[15]+4264355552&4294967295,O=S+(R<<10&4294967295|R>>>22),R=k+(S^(O|~P))+D[6]+2734768916&4294967295,k=O+(R<<15&4294967295|R>>>17),R=P+(O^(k|~S))+D[13]+1309151649&4294967295,P=k+(R<<21&4294967295|R>>>11),R=S+(k^(P|~O))+D[4]+4149444226&4294967295,S=P+(R<<6&4294967295|R>>>26),R=O+(P^(S|~k))+D[11]+3174756917&4294967295,O=S+(R<<10&4294967295|R>>>22),R=k+(S^(O|~P))+D[2]+718787259&4294967295,k=O+(R<<15&4294967295|R>>>17),R=P+(O^(k|~S))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var P=S-this.blockSize,D=this.B,k=this.h,O=0;O<S;){if(k==0)for(;O<=P;)o(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<S;)if(D[k++]=x.charCodeAt(O++),k==this.blockSize){o(this,D),k=0;break}}else for(;O<S;)if(D[k++]=x[O++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var P=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=P&255,P/=256;for(this.u(x),x=Array(16),S=P=0;4>S;++S)for(var D=0;32>D;D+=8)x[P++]=this.g[S]>>>D&255;return x};function a(x,S){var P=d;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=S(x)}function c(x,S){this.h=S;for(var P=[],D=!0,k=x.length-1;0<=k;k--){var O=x[k]|0;D&&O==S||(P[k]=O,D=!1)}this.g=P}var d={};function p(x){return-128<=x&&128>x?a(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function _(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return q(_(-x));for(var S=[],P=1,D=0;x>=P;D++)S[D]=x/P|0,P*=4294967296;return new c(S,0)}function v(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return q(v(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=_(Math.pow(S,8)),D=E,k=0;k<x.length;k+=8){var O=Math.min(8,x.length-k),R=parseInt(x.substring(k,k+O),S);8>O?(O=_(Math.pow(S,O)),D=D.j(O).add(_(R))):(D=D.j(P),D=D.add(_(R)))}return D}var E=p(0),A=p(1),b=p(16777216);i=c.prototype,i.m=function(){if($(this))return-q(this).m();for(var x=0,S=1,P=0;P<this.g.length;P++){var D=this.i(P);x+=(0<=D?D:4294967296+D)*S,S*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(G(this))return"0";if($(this))return"-"+q(this).toString(x);for(var S=_(Math.pow(x,6)),P=this,D="";;){var k=we(P,S).g;P=fe(P,k.j(S));var O=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=k,G(P))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function G(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function $(x){return x.h==-1}i.l=function(x){return x=fe(this,x),$(x)?-1:G(x)?0:1};function q(x){for(var S=x.g.length,P=[],D=0;D<S;D++)P[D]=~x.g[D];return new c(P,~x.h).add(A)}i.abs=function(){return $(this)?q(this):this},i.add=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],D=0,k=0;k<=S;k++){var O=D+(this.i(k)&65535)+(x.i(k)&65535),R=(O>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);D=R>>>16,O&=65535,R&=65535,P[k]=R<<16|O}return new c(P,P[P.length-1]&-2147483648?-1:0)};function fe(x,S){return x.add(q(S))}i.j=function(x){if(G(this)||G(x))return E;if($(this))return $(x)?q(this).j(q(x)):q(q(this).j(x));if($(x))return q(this.j(q(x)));if(0>this.l(b)&&0>x.l(b))return _(this.m()*x.m());for(var S=this.g.length+x.g.length,P=[],D=0;D<2*S;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var k=0;k<x.g.length;k++){var O=this.i(D)>>>16,R=this.i(D)&65535,ct=x.i(k)>>>16,Ut=x.i(k)&65535;P[2*D+2*k]+=R*Ut,me(P,2*D+2*k),P[2*D+2*k+1]+=O*Ut,me(P,2*D+2*k+1),P[2*D+2*k+1]+=R*ct,me(P,2*D+2*k+1),P[2*D+2*k+2]+=O*ct,me(P,2*D+2*k+2)}for(D=0;D<S;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=S;D<2*S;D++)P[D]=0;return new c(P,0)};function me(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function le(x,S){this.g=x,this.h=S}function we(x,S){if(G(S))throw Error("division by zero");if(G(x))return new le(E,E);if($(x))return S=we(q(x),S),new le(q(S.g),q(S.h));if($(S))return S=we(x,q(S)),new le(q(S.g),S.h);if(30<x.g.length){if($(x)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var P=A,D=S;0>=D.l(x);)P=Ae(P),D=Ae(D);var k=ve(P,1),O=ve(D,1);for(D=ve(D,2),P=ve(P,2);!G(D);){var R=O.add(D);0>=R.l(x)&&(k=k.add(P),O=R),D=ve(D,1),P=ve(P,1)}return S=fe(x,k.j(S)),new le(k,S)}for(k=E;0<=x.l(S);){for(P=Math.max(1,Math.floor(x.m()/S.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=_(P),R=O.j(S);$(R)||0<R.l(x);)P-=D,O=_(P),R=O.j(S);G(O)&&(O=A),k=k.add(O),x=fe(x,R)}return new le(k,x)}i.A=function(x){return we(this,x).h},i.and=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)&x.i(D);return new c(P,this.h&x.h)},i.or=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)|x.i(D);return new c(P,this.h|x.h)},i.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)^x.i(D);return new c(P,this.h^x.h)};function Ae(x){for(var S=x.g.length+1,P=[],D=0;D<S;D++)P[D]=x.i(D)<<1|x.i(D-1)>>>31;return new c(P,x.h)}function ve(x,S){var P=S>>5;S%=32;for(var D=x.g.length-P,k=[],O=0;O<D;O++)k[O]=0<S?x.i(O+P)>>>S|x.i(O+P+1)<<32-S:x.i(O+P);return new c(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ev=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=_,c.fromString=v,Es=c}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tv,cu,nv,wc,df,rv,iv,sv;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,y){return l==Array.prototype||l==Object.prototype||(l[m]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var m=0;m<l.length;++m){var y=l[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function o(l,m){if(m)e:{var y=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var M=l[I];if(!(M in y))break e;y=y[M]}l=l[l.length-1],I=y[l],m=m(I),m!=I&&m!=null&&e(y,l,{configurable:!0,writable:!0,value:m})}}function a(l,m){l instanceof String&&(l+="");var y=0,I=!1,M={next:function(){if(!I&&y<l.length){var j=y++;return{value:m(j,l[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(l){return l||function(){return a(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function _(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function v(l,m,y){return l.call.apply(l.bind,arguments)}function E(l,m,y){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),l.apply(m,M)}}return function(){return l.apply(m,arguments)}}function A(l,m,y){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,A.apply(null,arguments)}function b(l,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function G(l,m){function y(){}y.prototype=m.prototype,l.aa=m.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(I,M,j){for(var Z=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)Z[ze-2]=arguments[ze];return m.prototype[M].apply(I,Z)}}function $(l){const m=l.length;if(0<m){const y=Array(m);for(let I=0;I<m;I++)y[I]=l[I];return y}return[]}function q(l,m){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(p(I)){const M=l.length||0,j=I.length||0;l.length=M+j;for(let Z=0;Z<j;Z++)l[M+Z]=I[Z]}else l.push(I)}}class fe{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function me(l){return/^[\s\xa0]*$/.test(l)}function le(){var l=d.navigator;return l&&(l=l.userAgent)?l:""}function we(l){return we[" "](l),l}we[" "]=function(){};var Ae=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function ve(l,m,y){for(const I in l)m.call(y,l[I],I,l)}function x(l,m){for(const y in l)m.call(void 0,l[y],y,l)}function S(l){const m={};for(const y in l)m[y]=l[y];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,m){let y,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(y in I)l[y]=I[y];for(let j=0;j<P.length;j++)y=P[j],Object.prototype.hasOwnProperty.call(I,y)&&(l[y]=I[y])}}function k(l){var m=1;l=l.split(":");const y=[];for(;0<m&&l.length;)y.push(l.shift()),m--;return l.length&&y.push(l.join(":")),y}function O(l){d.setTimeout(()=>{throw l},0)}function R(){var l=ge;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class ct{constructor(){this.h=this.g=null}add(m,y){const I=Ut.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ut=new fe(()=>new zt,l=>l.reset());class zt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,te=!1,ge=new ct,se=()=>{const l=d.Promise.resolve(void 0);$e=()=>{l.then(N)}};var N=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(y){O(y)}var m=Ut;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}te=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};d.addEventListener("test",y,m),d.removeEventListener("test",y,m)}catch{}return l}();function Re(l,m){if(pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(Ae){e:{try{we(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else y=="mouseover"?m=l.fromElement:y=="mouseout"&&(m=l.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Re.aa.h.call(this)}}G(Re,pe);var ke={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ke(l,m,y,I,M){this.listener=l,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=M,this.key=++Ue,this.da=this.fa=!1}function Rt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function gr(l){this.src=l,this.g={},this.h=0}gr.prototype.add=function(l,m,y,I,M){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var Z=$r(l,m,I,M);return-1<Z?(m=l[Z],y||(m.fa=!1)):(m=new Ke(m,this.src,j,!!I,M),m.fa=y,l.push(m)),m};function Ls(l,m){var y=m.type;if(y in l.g){var I=l.g[y],M=Array.prototype.indexOf.call(I,m,void 0),j;(j=0<=M)&&Array.prototype.splice.call(I,M,1),j&&(Rt(m),l.g[y].length==0&&(delete l.g[y],l.h--))}}function $r(l,m,y,I){for(var M=0;M<l.length;++M){var j=l[M];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==I)return M}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Ms={};function ca(l,m,y,I,M){if(Array.isArray(m)){for(var j=0;j<m.length;j++)ca(l,m[j],y,I,M);return null}return y=fa(y),l&&l[Be]?l.K(m,y,_(I)?!!I.capture:!!I,M):ha(l,m,y,!1,I,M)}function ha(l,m,y,I,M,j){if(!m)throw Error("Invalid event type");var Z=_(M)?!!M.capture:!!M,ze=Bs(l);if(ze||(l[Mi]=ze=new gr(l)),y=ze.add(m,y,I,Z,j),y.proxy)return y;if(I=Ju(),y.proxy=I,I.src=l,I.listener=y,l.addEventListener)Se||(M=Z),M===void 0&&(M=!1),l.addEventListener(m.toString(),I,M);else if(l.attachEvent)l.attachEvent(yr(m.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ju(){function l(y){return m.call(l.src,l.listener,y)}const m=da;return l}function Fs(l,m,y,I,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Fs(l,m[j],y,I,M);else I=_(I)?!!I.capture:!!I,y=fa(y),l&&l[Be]?(l=l.i,m=String(m).toString(),m in l.g&&(j=l.g[m],y=$r(j,y,I,M),-1<y&&(Rt(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete l.g[m],l.h--)))):l&&(l=Bs(l))&&(m=l.g[m.toString()],l=-1,m&&(l=$r(m,y,I,M)),(y=-1<l?m[l]:null)&&_r(y))}function _r(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[Be])Ls(m.i,l);else{var y=l.type,I=l.proxy;m.removeEventListener?m.removeEventListener(y,I,l.capture):m.detachEvent?m.detachEvent(yr(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=Bs(m))?(Ls(y,l),y.h==0&&(y.src=null,m[Mi]=null)):Rt(l)}}}function yr(l){return l in Ms?Ms[l]:Ms[l]="on"+l}function da(l,m){if(l.da)l=!0;else{m=new Re(m,this);var y=l.listener,I=l.ha||l.src;l.fa&&_r(l),l=y.call(I,m)}return l}function Bs(l){return l=l[Mi],l instanceof gr?l:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(l){return typeof l=="function"?l:(l[Us]||(l[Us]=function(m){return l.handleEvent(m)}),l[Us])}function wt(){K.call(this),this.i=new gr(this),this.M=this,this.F=null}G(wt,K),wt.prototype[Be]=!0,wt.prototype.removeEventListener=function(l,m,y,I){Fs(this,l,m,y,I)};function Et(l,m){var y,I=l.F;if(I)for(y=[];I;I=I.F)y.push(I);if(l=l.M,I=m.type||m,typeof m=="string")m=new pe(m,l);else if(m instanceof pe)m.target=m.target||l;else{var M=m;m=new pe(I,l),D(m,M)}if(M=!0,y)for(var j=y.length-1;0<=j;j--){var Z=m.g=y[j];M=vr(Z,I,!0,m)&&M}if(Z=m.g=l,M=vr(Z,I,!0,m)&&M,M=vr(Z,I,!1,m)&&M,y)for(j=0;j<y.length;j++)Z=m.g=y[j],M=vr(Z,I,!1,m)&&M}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var y=l.g[m],I=0;I<y.length;I++)Rt(y[I]);delete l.g[m],l.h--}}this.F=null},wt.prototype.K=function(l,m,y,I){return this.i.add(String(l),m,!1,y,I)},wt.prototype.L=function(l,m,y,I){return this.i.add(String(l),m,!0,y,I)};function vr(l,m,y,I){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,j=0;j<m.length;++j){var Z=m[j];if(Z&&!Z.da&&Z.capture==y){var ze=Z.listener,It=Z.ha||Z.src;Z.fa&&Ls(l.i,Z),M=ze.call(It,I)!==!1&&M}}return M&&!I.defaultPrevented}function pa(l,m,y){if(typeof l=="function")y&&(l=A(l,y));else if(l&&typeof l.handleEvent=="function")l=A(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(l,m||0)}function Gr(l){l.g=pa(()=>{l.g=null,l.i&&(l.i=!1,Gr(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class Fi extends K{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(l){K.call(this),this.h=l,this.g={}}G(Bi,K);var ma=[];function ga(l){ve(l.g,function(m,y){this.g.hasOwnProperty(y)&&_r(m)},l),l.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),ga(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _a=d.JSON.stringify,ya=d.JSON.parse,va=class{stringify(l){return d.JSON.stringify(l,void 0)}parse(l){return d.JSON.parse(l,void 0)}};function Ui(){}Ui.prototype.h=null;function zs(l){return l.h||(l.h=l.i())}function js(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jn(){pe.call(this,"d")}G(Jn,pe);function qs(){pe.call(this,"c")}G(qs,pe);var Xn={},wa=null;function zi(){return wa=wa||new wt}Xn.La="serverreachability";function Ea(l){pe.call(this,Xn.La,l)}G(Ea,pe);function wr(l){const m=zi();Et(m,new Ea(m))}Xn.STAT_EVENT="statevent";function Ia(l,m){pe.call(this,Xn.STAT_EVENT,l),this.stat=m}G(Ia,pe);function ht(l){const m=zi();Et(m,new Ia(m,l))}Xn.Ma="timingevent";function $s(l,m){pe.call(this,Xn.Ma,l),this.size=m}G($s,pe);function Ln(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){l()},m)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function qi(l,m,y,I,M,j){l.info(function(){if(l.g)if(j)for(var Z="",ze=j.split("&"),It=0;It<ze.length;It++){var Ne=ze[It].split("=");if(1<Ne.length){var Pt=Ne[0];Ne=Ne[1];var gt=Pt.split("_");Z=2<=gt.length&&gt[1]=="type"?Z+(Pt+"="+Ne+"&"):Z+(Pt+"=redacted&")}}else Z=null;else Z=j;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+m+`
`+y+`
`+Z})}function Gs(l,m,y,I,M,j,Z){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+m+`
`+y+`
`+j+" "+Z})}function Mn(l,m,y,I){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+vh(l,y)+(I?" "+I:"")})}function Ta(l,m){l.info(function(){return"TIMEOUT: "+m})}ji.prototype.info=function(){};function vh(l,m){if(!l.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var I=y[l];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var j=M[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Z=1;Z<M.length;Z++)M[Z]=""}}}}return _a(y)}catch{return m}}var Ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function $i(){}G($i,Ui),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Fn=new $i;function Bn(l,m,y,I){this.j=l,this.i=m,this.l=y,this.R=I||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zu}function Zu(){this.i=null,this.g="",this.h=!1}var Sa={},Qs={};function Ws(l,m,y){l.L=1,l.v=Yr(_n(m)),l.m=y,l.P=!0,Aa(l,null)}function Aa(l,m){l.F=Date.now(),Qe(l),l.A=_n(l.v);var y=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),Xr(y.i,"t",I),l.C=0,y=l.j.J,l.h=new Zu,l.g=_l(l.j,y?m:null,!l.m),0<l.O&&(l.M=new Fi(A(l.Y,l,l.g),l.O)),m=l.U,y=l.g,I=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(ma[0]=M.toString()),M=ma);for(var j=0;j<M.length;j++){var Z=ca(y,M[j],I||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),wr(),qi(l.i,l.u,l.A,l.l,l.R,l.m)}Bn.prototype.ca=function(l){l=l.target;const m=this.M;m&&on(l)==3?m.j():this.Y(l)},Bn.prototype.Y=function(l){try{if(l==this.g)e:{const gt=on(this.g);var m=this.g.Ba();const Pn=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Da(this.g)))){this.J||gt!=4||m==7||(m==8||0>=Pn?wr(3):wr(2)),Gi(this);var y=this.g.Z();this.X=y;t:if(el(this)){var I=Da(this.g);l="";var M=I.length,j=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),Kr(this);var Z="";break t}this.h.i=new d.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,l+=this.h.i.decode(I[m],{stream:!(j&&m==M-1)});I.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=y==200,Gs(this.i,this.u,this.A,this.l,this.R,gt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,It=this.g;if((ze=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(ze)){var Ne=ze;break t}}Ne=null}if(y=Ne)Mn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,y);else{this.o=!1,this.s=3,ht(12),An(this),Kr(this);break e}}if(this.P){y=!0;let vn;for(;!this.J&&this.C<Z.length;)if(vn=wh(this,Z),vn==Qs){gt==4&&(this.s=4,ht(14),y=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==Sa){this.s=4,ht(15),Mn(this.i,this.l,Z,"[Invalid Chunk]"),y=!1;break}else Mn(this.i,this.l,vn,null),Ra(this,vn);if(el(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||Z.length!=0||this.h.h||(this.s=1,ht(16),y=!1),this.o=this.o&&y,!y)Mn(this.i,this.l,Z,"[Invalid Chunked Response]"),An(this),Kr(this);else if(0<Z.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Na(Pt),Pt.M=!0,ht(11))}}else Mn(this.i,this.l,Z,null),Ra(this,Z);gt==4&&An(this),this.o&&!this.J&&(gt==4?so(this.j,this):(this.o=!1,Qe(this)))}else eo(this.g),y==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),An(this),Kr(this)}}}catch{}finally{}};function el(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function wh(l,m){var y=l.C,I=m.indexOf(`
`,y);return I==-1?Qs:(y=Number(m.substring(y,I)),isNaN(y)?Sa:(I+=1,I+y>m.length?Qs:(m=m.slice(I,I+y),l.C=I+y,m)))}Bn.prototype.cancel=function(){this.J=!0,An(this)};function Qe(l){l.S=Date.now()+l.I,tl(l,l.I)}function tl(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ln(A(l.ba,l),m)}function Gi(l){l.B&&(d.clearTimeout(l.B),l.B=null)}Bn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ta(this.i,this.A),this.L!=2&&(wr(),ht(17)),An(this),this.s=2,Kr(this)):tl(this,this.S-l)};function Kr(l){l.j.G==0||l.J||so(l.j,l)}function An(l){Gi(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ga(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Ra(l,m){try{var y=l.j;if(y.G!=0&&(y.g==l||Yt(y.h,l))){if(!l.K&&Yt(y.h,l)&&y.G==3){try{var I=y.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)io(y),$n(y);else break e;ro(y),ht(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ln(A(y.Za,y),6e3));if(1>=rl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ar(y,11)}else if((l.K||y.g==l)&&io(y),!me(m))for(M=y.Da.g.parse(m),m=0;m<M.length;m++){let Ne=M[m];if(y.T=Ne[0],Ne=Ne[1],y.G==2)if(Ne[0]=="c"){y.K=Ne[1],y.ia=Ne[2];const Pt=Ne[3];Pt!=null&&(y.la=Pt,y.j.info("VER="+y.la));const gt=Ne[4];gt!=null&&(y.Aa=gt,y.j.info("SVER="+y.Aa));const Pn=Ne[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(I=1.5*Pn,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const vn=l.g;if(vn){const Xi=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var j=I.h;j.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Pa(j,j.h),j.h=null))}if(I.D){const ao=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(I.ya=ao,Ge(I.I,I.D,ao))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Z=l;if(I.qa=gl(I,I.J?I.ia:null,I.W),Z.K){il(I.h,Z);var ze=Z,It=I.L;It&&(ze.I=It),ze.B&&(Gi(ze),Qe(ze)),I.g=Z}else Ji(I);0<y.i.length&&nr(y)}else Ne[0]!="stop"&&Ne[0]!="close"||Ar(y,7);else y.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Ar(y,7):bt(y):Ne[0]!="noop"&&y.l&&y.l.ta(Ne),y.v=0)}}wr(4)}catch{}}var nl=class{constructor(l,m){this.g=l,this.map=m}};function Ki(l){this.l=l||10,d.PerformanceNavigationTiming?(l=d.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function rl(l){return l.h?1:l.g?l.g.size:0}function Yt(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Pa(l,m){l.g?l.g.add(m):l.h=m}function il(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Ki.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function sl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const y of l.g.values())m=m.concat(y.D);return m}return $(l.i)}function Hs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(p(l)){for(var m=[],y=l.length,I=0;I<y;I++)m.push(l[I]);return m}m=[],y=0;for(I in l)m[y++]=l[I];return m}function Ys(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(p(l)||typeof l=="string"){var m=[];l=l.length;for(var y=0;y<l;y++)m.push(y);return m}m=[],y=0;for(const I in l)m[y++]=I;return m}}}function Qr(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(p(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var y=Ys(l),I=Hs(l),M=I.length,j=0;j<M;j++)m.call(void 0,I[j],y&&y[j],l)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(l,m){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var I=l[y].indexOf("="),M=null;if(0<=I){var j=l[y].substring(0,I);M=l[y].substring(I+1)}else j=l[y];m(j,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Er(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Er){this.h=l.h,Wi(this,l.j),this.o=l.o,this.g=l.g,Wr(this,l.s),this.l=l.l;var m=l.i,y=new Zn;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Hr(this,y),this.m=l.m}else l&&(m=String(l).match(Qi))?(this.h=!1,Wi(this,m[1]||"",!0),this.o=Ve(m[2]||""),this.g=Ve(m[3]||"",!0),Wr(this,m[4]),this.l=Ve(m[5]||"",!0),Hr(this,m[6]||"",!0),this.m=Ve(m[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}Er.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Jr(m,Js,!0),":");var y=this.g;return(y||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Jr(m,Js,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Jr(y,y.charAt(0)=="/"?ul:al,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Jr(y,Ca)),l.join("")};function _n(l){return new Er(l)}function Wi(l,m,y){l.j=y?Ve(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Wr(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Hr(l,m,y){m instanceof Zn?(l.i=m,er(l.i,l.h)):(y||(m=Jr(m,ll)),l.i=new Zn(m,l.h))}function Ge(l,m,y){l.i.set(m,y)}function Yr(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ve(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Jr(l,m,y){return typeof l=="string"?(l=encodeURI(l).replace(m,ol),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ol(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Js=/[#\/\?@]/g,al=/[#\?:]/g,ul=/[#\?]/g,ll=/[#\?@]/g,Ca=/#/g;function Zn(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Nt(l){l.g||(l.g=new Map,l.h=0,l.i&&Eh(l.i,function(m,y){l.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}i=Zn.prototype,i.add=function(l,m){Nt(this),this.i=null,l=Rn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(m),this.h+=1,this};function Un(l,m){Nt(l),m=Rn(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function zn(l,m){return Nt(l),m=Rn(l,m),l.g.has(m)}i.forEach=function(l,m){Nt(this),this.g.forEach(function(y,I){y.forEach(function(M){l.call(m,M,I,this)},this)},this)},i.na=function(){Nt(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let I=0;I<m.length;I++){const M=l[I];for(let j=0;j<M.length;j++)y.push(m[I])}return y},i.V=function(l){Nt(this);let m=[];if(typeof l=="string")zn(this,l)&&(m=m.concat(this.g.get(Rn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)m=m.concat(l[y])}return m},i.set=function(l,m){return Nt(this),this.i=null,l=Rn(this,l),zn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},i.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function Xr(l,m,y){Un(l,m),0<y.length&&(l.i=null,l.g.set(Rn(l,m),$(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var I=m[y];const j=encodeURIComponent(String(I)),Z=this.V(I);for(I=0;I<Z.length;I++){var M=j;Z[I]!==""&&(M+="="+encodeURIComponent(String(Z[I]))),l.push(M)}}return this.i=l.join("&")};function Rn(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function er(l,m){m&&!l.j&&(Nt(l),l.i=null,l.g.forEach(function(y,I){var M=I.toLowerCase();I!=M&&(Un(this,I),Xr(this,M,y))},l)),l.j=m}function Ih(l,m){const y=new ji;if(d.Image){const I=new Image;I.onload=b(sn,y,"TestLoadImage: loaded",!0,m,I),I.onerror=b(sn,y,"TestLoadImage: error",!1,m,I),I.onabort=b(sn,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=b(sn,y,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else m(!1)}function cl(l,m){const y=new ji,I=new AbortController,M=setTimeout(()=>{I.abort(),sn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:I.signal}).then(j=>{clearTimeout(M),j.ok?sn(y,"TestPingServer: ok",!0,m):sn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),sn(y,"TestPingServer: error",!1,m)})}function sn(l,m,y,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(y)}catch{}}function Th(){this.g=new va}function hl(l,m,y){const I=y||"";try{Qr(l,function(M,j){let Z=M;_(M)&&(Z=_a(M)),m.push(I+j+"="+encodeURIComponent(Z))})}catch(M){throw m.push(I+"type="+encodeURIComponent("_badmap")),M}}function Ir(l){this.l=l.Ub||null,this.j=l.eb||!1}G(Ir,Ui),Ir.prototype.g=function(){return new Hi(this.l,this.j)},Ir.prototype.i=function(l){return function(){return l}}({});function Hi(l,m){wt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Hi,wt),i=Hi.prototype,i.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,qn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function dl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?jn(this):qn(this),this.readyState==3&&dl(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,jn(this))},i.Qa=function(l){this.g&&(this.response=l,jn(this))},i.ga=function(){this.g&&jn(this)};function jn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,qn(l)}i.setRequestHeader=function(l,m){this.u.append(l,m)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=m.next();return l.join(`\r
`)};function qn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Tr(l){let m="";return ve(l,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function Zr(l,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Tr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ge(l,m,y))}function Ze(l){wt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Ze,wt);var Sh=/^https?$/i,xa=["POST","PUT"];i=Ze.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?zs(this.o):zs(Fn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(j){Yi(this,j);return}if(l=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)y.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const j of I.keys())y.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),M=d.FormData&&l instanceof d.FormData,!(0<=Array.prototype.indexOf.call(xa,m,void 0))||I||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Z]of y)this.g.setRequestHeader(j,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){Yi(this,j)}};function Yi(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,Xs(l),yn(l)}function Xs(l){l.A||(l.A=!0,Et(l,"complete"),Et(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Et(this,"complete"),Et(this,"abort"),yn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),Ze.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Va(this):this.bb())},i.bb=function(){Va(this)};function Va(l){if(l.h&&typeof c<"u"&&(!l.v[1]||on(l)!=4||l.Z()!=2)){if(l.u&&on(l)==4)pa(l.Ea,0,l);else if(Et(l,"readystatechange"),on(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=Z===0){var M=String(l.D).match(Qi)[1]||null;!M&&d.self&&d.self.location&&(M=d.self.location.protocol.slice(0,-1)),I=!Sh.test(M?M.toLowerCase():"")}y=I}if(y)Et(l,"complete"),Et(l,"success");else{l.m=6;try{var j=2<on(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Xs(l)}}finally{yn(l)}}}}function yn(l,m){if(l.g){Zs(l);const y=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Et(l,"ready");try{y.onreadystatechange=I}catch{}}}function Zs(l){l.I&&(d.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function on(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),ya(m)}};function Da(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function eo(l){const m={};l=(l.g&&2<=on(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(me(l[I]))continue;var y=k(l[I]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[M]||[];m[M]=j,j.push(y)}x(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(l,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||m}function ka(l){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,l),this.cb=tr("retryDelaySeedMs",1e4,l),this.Wa=tr("forwardChannelMaxRetries",2,l),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(l&&l.concurrentRequestLimit),this.Da=new Th,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ka.prototype,i.la=8,i.G=1,i.connect=function(l,m,y,I){ht(0),this.W=l,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=gl(this,null,this.W),nr(this)};function bt(l){if(to(l),l.G==3){var m=l.U++,y=_n(l.I);if(Ge(y,"SID",l.K),Ge(y,"RID",m),Ge(y,"TYPE","terminate"),Sr(l,y),m=new Bn(l,l.j,m),m.L=2,m.v=Yr(_n(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=m.v,y=!0),y||(m.g=_l(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Qe(m)}ml(l)}function $n(l){l.g&&(Na(l),l.g.cancel(),l.g=null)}function to(l){$n(l),l.u&&(d.clearTimeout(l.u),l.u=null),io(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&d.clearTimeout(l.s),l.s=null)}function nr(l){if(!gn(l.h)&&!l.s){l.s=!0;var m=l.Ga;$e||se(),te||($e(),te=!0),ge.add(m,l),l.B=0}}function Ah(l,m){return rl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ln(A(l.Ga,l,m),pl(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Bn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=S(j),D(j,this.S)):j=this.S),this.m!==null||this.O||(M.H=j,j=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=ei(this,M,m),y=_n(this.I),Ge(y,"RID",l),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),Sr(this,y),j&&(this.O?m="headers="+encodeURIComponent(String(Tr(j)))+"&"+m:this.m&&Zr(y,this.m,j)),Pa(this.h,M),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",m),Ge(y,"SID","null"),M.T=!0,Ws(M,y,null)):Ws(M,y,m),this.G=2}}else this.G==3&&(l?no(this,l):this.i.length==0||gn(this.h)||no(this))};function no(l,m){var y;m?y=m.l:y=l.U++;const I=_n(l.I);Ge(I,"SID",l.K),Ge(I,"RID",y),Ge(I,"AID",l.T),Sr(l,I),l.m&&l.o&&Zr(I,l.m,l.o),y=new Bn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),m&&(l.i=m.D.concat(l.i)),m=ei(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Pa(l.h,y),Ws(y,I,m)}function Sr(l,m){l.H&&ve(l.H,function(y,I){Ge(m,I,y)}),l.l&&Qr({},function(y,I){Ge(m,I,y)})}function ei(l,m,y){y=Math.min(l.i.length,y);var I=l.l?A(l.l.Na,l.l,l):null;e:{var M=l.i;let j=-1;for(;;){const Z=["count="+y];j==-1?0<y?(j=M[0].g,Z.push("ofs="+j)):j=0:Z.push("ofs="+j);let ze=!0;for(let It=0;It<y;It++){let Ne=M[It].g;const Pt=M[It].map;if(Ne-=j,0>Ne)j=Math.max(0,M[It].g-100),ze=!1;else try{hl(Pt,Z,"req"+Ne+"_")}catch{I&&I(Pt)}}if(ze){I=Z.join("&");break e}}}return l=l.i.splice(0,y),m.D=l,I}function Ji(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;$e||se(),te||($e(),te=!0),ge.add(m,l),l.v=0}}function ro(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ln(A(l.Fa,l),pl(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ln(A(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),$n(this),fl(this))};function Na(l){l.A!=null&&(d.clearTimeout(l.A),l.A=null)}function fl(l){l.g=new Bn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=_n(l.qa);Ge(m,"RID","rpc"),Ge(m,"SID",l.K),Ge(m,"AID",l.T),Ge(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(m,"TO",l.ja),Ge(m,"TYPE","xmlhttp"),Sr(l,m),l.m&&l.o&&Zr(m,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Yr(_n(m)),y.m=null,y.P=!0,Aa(y,l)}i.Za=function(){this.C!=null&&(this.C=null,$n(this),ro(this),ht(19))};function io(l){l.C!=null&&(d.clearTimeout(l.C),l.C=null)}function so(l,m){var y=null;if(l.g==m){io(l),Na(l),l.g=null;var I=2}else if(Yt(l.h,m))y=m.D,il(l.h,m),I=1;else return;if(l.G!=0){if(m.o)if(I==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var M=l.B;I=zi(),Et(I,new $s(I,y)),nr(l)}else Ji(l);else if(M=m.s,M==3||M==0&&0<m.X||!(I==1&&Ah(l,m)||I==2&&ro(l)))switch(y&&0<y.length&&(m=l.h,m.i=m.i.concat(y)),M){case 1:Ar(l,5);break;case 4:Ar(l,10);break;case 3:Ar(l,6);break;default:Ar(l,2)}}}function pl(l,m){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*m}function Ar(l,m){if(l.j.info("Error code "+m),m==2){var y=A(l.fb,l),I=l.Xa;const M=!I;I=new Er(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wi(I,"https"),Yr(I),M?Ih(I.toString(),y):cl(I.toString(),y)}else ht(2);l.G=0,l.l&&l.l.sa(m),ml(l),to(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function ml(l){if(l.G=0,l.ka=[],l.l){const m=sl(l.h);(m.length!=0||l.i.length!=0)&&(q(l.ka,m),q(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function gl(l,m,y){var I=y instanceof Er?_n(y):new Er(y);if(I.g!="")m&&(I.g=m+"."+I.g),Wr(I,I.s);else{var M=d.location;I=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var j=new Er(null);I&&Wi(j,I),m&&(j.g=m),M&&Wr(j,M),y&&(j.l=y),I=j}return y=l.D,m=l.ya,y&&m&&Ge(I,y,m),Ge(I,"VER",l.la),Sr(l,I),I}function _l(l,m,y){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new Ze(new Ir({eb:y})):new Ze(l.pa),m.Ha(l.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ba(){}i=ba.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function oo(){}oo.prototype.g=function(l,m){return new Jt(l,m)};function Jt(l,m){wt.call(this),this.g=new ka(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!me(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!me(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new rr(this)}G(Jt,wt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){bt(this.g)},Jt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=_a(l),l=y);m.i.push(new nl(m.Ya++,l)),m.G==3&&nr(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,bt(this.g),delete this.g,Jt.aa.N.call(this)};function yl(l){Jn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const y in m){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}G(yl,Jn);function vl(){qs.call(this),this.status=1}G(vl,qs);function rr(l){this.g=l}G(rr,ba),rr.prototype.ua=function(){Et(this.g,"a")},rr.prototype.ta=function(l){Et(this.g,new yl(l))},rr.prototype.sa=function(l){Et(this.g,new vl)},rr.prototype.ra=function(){Et(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,sv=function(){return new oo},iv=function(){return zi()},rv=Xn,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,wc=Ks,Xu.COMPLETE="complete",nv=Xu,js.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,cu=js,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,tv=Ze}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const v_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Ff("@firebase/firestore");function No(){return Ai.logLevel}function TT(i){Ai.setLogLevel(i)}function H(i,...e){if(Ai.logLevel<=De.DEBUG){const t=e.map(qf);Ai.debug(`Firestore (${na}): ${i}`,...t)}}function ft(i,...e){if(Ai.logLevel<=De.ERROR){const t=e.map(qf);Ai.error(`Firestore (${na}): ${i}`,...t)}}function fr(i,...e){if(Ai.logLevel<=De.WARN){const t=e.map(qf);Ai.warn(`Firestore (${na}): ${i}`,...t)}}function qf(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(i="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+i;throw ft(e),new Error(e)}function ue(i,e){i||ie()}function ST(i,e){i||ie()}function ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}}class RT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PT{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ue(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Bt,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bt)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new ov(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new kt(e)}}class CT{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xT{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new CT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ue(this.o===void 0);const r=a=>{a.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,H("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ue(typeof t.token=="string"),this.R=t.token,new VT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=kT(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function Ie(i,e){return i<e?-1:i>e?1:0}function qo(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}function uv(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new it(0,0))}static max(){return new de(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Tu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),c=t.get(o);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ce extends Tu{construct(e,t,r){return new Ce(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ce(t)}static emptyPath(){return new Ce([])}}const NT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Tu{construct(e,t,r){return new nt(e,t,r)}static isValidIdentifier(e){return NT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(t)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ce.fromString(e))}static fromName(e){return new ee(Ce.fromString(e).popFirst(5))}static empty(){return new ee(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function ff(i){return i.fields.find(e=>e.kind===2)}function fs(i){return i.fields.filter(e=>e.kind!==2)}Nc.UNKNOWN_ID=-1;class Ec{constructor(e,t){this.fieldPath=e,this.kind=t}}class Su{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Su(0,Tn.min())}}function lv(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=de.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Tn(o,ee.empty(),e)}function cv(i){return new Tn(i.readTime,i.key,-1)}class Tn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tn(de.min(),ee.empty(),-1)}static max(){return new Tn(de.max(),ee.empty(),-1)}}function $f(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(i.documentKey,e.documentKey),t!==0?t:Ie(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(i){if(i.code!==z.FAILED_PRECONDITION||i.message!==hv)throw i;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(o=>o?L.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new L((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const _=p;t(e[_]).next(v=>{c[_]=v,++d,d===a&&r(c)},v=>o(v))}})}static doWhile(e,t){return new L((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{static open(e,t,r,o){try{return new Hc(t,e.transaction(o,r))}catch(a){throw new pu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new pu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const o=Gf(r.target.error);this.V.reject(new pu(e,o))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OT(t)}}class hr{static delete(e){return H("SimpleDb","Removing database:",e),ps(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!Uy())return!1;if(hr.S())return!0;const e=Dc(),t=hr.D(e),r=0<t&&t<10,o=fv(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.F=r,hr.D(Dc())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const c=a.target.result;t(c)},o.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const c=a.target.error;c.name==="VersionError"?r(new Q(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new Q(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new pu(e,c))},o.onupgradeneeded=a=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const c=a.target.result;this.F.O(c,o.transaction,a.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const a=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(e);const d=Hc.open(this.db,e,a?"readonly":"readwrite",r),p=o(d).next(_=>(d.g(),_)).catch(_=>(d.abort(_),L.reject(_))).toPromise();return p.catch(()=>{}),await d.m,p}catch(d){const p=d,_=p.name!=="FirebaseError"&&c<3;if(H("SimpleDb","Transaction failed with error:",p.message,"Retrying:",_),this.close(),!_)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function fv(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bT{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ps(this.B.delete())}}class pu extends Q{constructor(e,t){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bi(i){return i.name==="IndexedDbTransactionError"}class OT{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(H("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ps(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next(t=>(t===void 0&&(t=null),H("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),ps(this.store.count())}U(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(r.range);return new L((c,d)=>{a.onerror=p=>{d(p.target.error)},a.onsuccess=p=>{c(p.target.result)}})}{const a=this.cursor(r),c=[];return this.W(a,(d,p)=>{c.push(p)}).next(()=>c)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}j(e,t){H("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.W(o,(a,c,d)=>d.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Y(e){const t=this.cursor({});return new L((r,o)=>{t.onerror=a=>{const c=Gf(a.target.error);o(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}W(e,t){const r=[];return new L((o,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new bT(d),_=t(d.primaryKey,d.value,p);if(_ instanceof L){const v=_.catch(E=>(p.done(),L.reject(E)));r.push(v)}p.isDone?o():p.K===null?d.continue():d.continue(p.K)}}).next(()=>L.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ps(i){return new L((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Gf(r.target.error);t(o)}})}let w_=!1;function Gf(i){const e=hr.D(Dc());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return w_||(w_=!0,setTimeout(()=>{throw r},0)),r}}return i}class LT{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{H("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){bi(t)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ni(t)}await this.X(6e4)})}}class MT{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let o=t,a=!0;return L.doWhile(()=>a===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return H("IndexBackfiller",`Processing collection: ${c}`),this.ne(e,c,o).next(d=>{o-=d,r.add(c)});a=!1})).next(()=>t-o)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.re(o,a)).next(d=>(H("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}re(e,t){let r=e;return t.changes.forEach((o,a)=>{const c=cv(a);$f(c,r)>0&&(r=c)}),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fn.oe=-1;function Fu(i){return i==null}function Au(i){return i===0&&1/i==-1/0}function pv(i){return typeof i=="number"&&Number.isInteger(i)&&!Au(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=E_(e)),e=FT(i.get(t),e);return E_(e)}function FT(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const a=i.charAt(o);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function E_(i){return i+""}function lr(i){const e=i.length;if(ue(e>=2),e===2)return ue(i.charAt(0)===""&&i.charAt(1)===""),Ce.emptyPath();const t=e-2,r=[];let o="";for(let a=0;a<e;){const c=i.indexOf("",a);switch((c<0||c>t)&&ie(),i.charAt(c+1)){case"":const d=i.substring(a,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(a,c),o+="\0";break;case"":o+=i.substring(a,c+1);break;default:ie()}a=c+2}return new Ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(i,e){return[i,Wt(e)]}function mv(i,e,t){return[i,Wt(e),t]}const BT={},UT=["prefixPath","collectionGroup","readTime","documentId"],zT=["prefixPath","collectionGroup","documentId"],jT=["collectionGroup","readTime","prefixPath","documentId"],qT=["canonicalId","targetId"],$T=["targetId","path"],GT=["path","targetId"],KT=["collectionId","parent"],QT=["indexId","uid"],WT=["uid","sequenceNumber"],HT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YT=["indexId","uid","orderedDocumentKey"],JT=["userId","collectionPath","documentId"],XT=["userId","collectionPath","largestBatchId"],ZT=["userId","collectionGroup","largestBatchId"],gv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],e1=[...gv,"documentOverlays"],_v=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yv=_v,Kf=[...yv,"indexConfiguration","indexState","indexEntries"],t1=Kf,n1=[...Kf,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends dv{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function At(i,e){const t=ne(i);return hr.C(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Oi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vv(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new He(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Mt.RED,this.left=o??Mt.EMPTY,this.right=a??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Mt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new S_(this.data.getIterator())}getIteratorFrom(e){return new S_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qe(this.comparator);return t.data=e,t}}class S_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new qe(nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wv("Invalid base64 string: "+a):a}}(e);return new lt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const i1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(i){if(ue(!!i),typeof i=="string"){let e=0;const t=i1.exec(i);if(ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(i.seconds),nanos:tt(i.nanos)}}function tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Fr(i){return typeof i=="string"?lt.fromBase64String(i):lt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Jc(i){const e=i.mapValue.fields.__previous_value__;return Yc(e)?Jc(e):e}function Ru(i){const e=Mr(i.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,r,o,a,c,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=_}}class Ri{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ri("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ri&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tc={nullValue:"NULL_VALUE"};function Pi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yc(i)?4:Ev(i)?9007199254740991:Xc(i)?10:11:ie()}function pr(i,e){if(i===e)return!0;const t=Pi(i);if(t!==Pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ru(i).isEqual(Ru(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Mr(o.timestampValue),d=Mr(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,a){return Fr(o.bytesValue).isEqual(Fr(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,a){return tt(o.geoPointValue.latitude)===tt(a.geoPointValue.latitude)&&tt(o.geoPointValue.longitude)===tt(a.geoPointValue.longitude)}(i,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return tt(o.integerValue)===tt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=tt(o.doubleValue),d=tt(a.doubleValue);return c===d?Au(c)===Au(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return qo(i.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(T_(c)!==T_(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!pr(c[p],d[p])))return!1;return!0}(i,e);default:return ie()}}function Pu(i,e){return(i.values||[]).find(t=>pr(t,e))!==void 0}function Ci(i,e){if(i===e)return 0;const t=Pi(i),r=Pi(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(i.booleanValue,e.booleanValue);case 2:return function(a,c){const d=tt(a.integerValue||a.doubleValue),p=tt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return A_(i.timestampValue,e.timestampValue);case 4:return A_(Ru(i),Ru(e));case 5:return Ie(i.stringValue,e.stringValue);case 6:return function(a,c){const d=Fr(a),p=Fr(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let _=0;_<d.length&&_<p.length;_++){const v=Ie(d[_],p[_]);if(v!==0)return v}return Ie(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Ie(tt(a.latitude),tt(c.latitude));return d!==0?d:Ie(tt(a.longitude),tt(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return R_(i.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,_,v;const E=a.fields||{},A=c.fields||{},b=(d=E.value)===null||d===void 0?void 0:d.arrayValue,G=(p=A.value)===null||p===void 0?void 0:p.arrayValue,$=Ie(((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0,((v=G==null?void 0:G.values)===null||v===void 0?void 0:v.length)||0);return $!==0?$:R_(b,G)}(i.mapValue,e.mapValue);case 11:return function(a,c){if(a===wi.mapValue&&c===wi.mapValue)return 0;if(a===wi.mapValue)return 1;if(c===wi.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),_=c.fields||{},v=Object.keys(_);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const A=Ie(p[E],v[E]);if(A!==0)return A;const b=Ci(d[p[E]],_[v[E]]);if(b!==0)return b}return Ie(p.length,v.length)}(i.mapValue,e.mapValue);default:throw ie()}}function A_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ie(i,e);const t=Mr(i),r=Mr(e),o=Ie(t.seconds,r.seconds);return o!==0?o:Ie(t.nanos,r.nanos)}function R_(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Ci(t[o],r[o]);if(a)return a}return Ie(t.length,r.length)}function $o(i){return mf(i)}function mf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=Mr(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Fr(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ee.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=mf(a);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${mf(t.fields[c])}`;return o+"}"}(i.mapValue):ie()}function Sc(i){switch(Pi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(i);return e?16+Sc(e):16;case 5:return 2*i.stringValue.length;case 6:return Fr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+Sc(a),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return Oi(r.fields,(a,c)=>{o+=a.length+Sc(c)}),o}(i.mapValue);default:throw ie()}}function Ts(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function gf(i){return!!i&&"integerValue"in i}function Cu(i){return!!i&&"arrayValue"in i}function P_(i){return!!i&&"nullValue"in i}function C_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ac(i){return!!i&&"mapValue"in i}function Xc(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Oi(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mu(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ev(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Iv={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function o1(i){return"nullValue"in i?Tc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ts(Ri.empty(),ee.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Xc(i)?Iv:{mapValue:{}}:ie()}function a1(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ts(Ri.empty(),ee.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Iv:"mapValue"in i?Xc(i)?{mapValue:{}}:wi:ie()}function x_(i,e){const t=Ci(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function V_(i,e){const t=Ci(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=nt.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=mu(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Oi(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Ft(mu(this.value))}}function Tv(i){const e=[];return Oi(i.fields,(t,r)=>{const o=new nt([t]);if(Ac(r)){const a=Tv(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Xe(e,0,de.min(),de.min(),de.min(),Ft.empty(),0)}static newFoundDocument(e,t,r,o){return new Xe(e,1,t,de.min(),r,o,0)}static newNoDocument(e,t){return new Xe(e,2,t,de.min(),de.min(),Ft.empty(),0)}static newUnknownDocument(e,t){return new Xe(e,3,t,de.min(),de.min(),Ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.position=e,this.inclusive=t}}function D_(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const a=e[o],c=i.position[o];if(a.field.isKeyField()?r=ee.comparator(ee.fromName(c.referenceValue),t.key):r=Ci(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function k_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!pr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function u1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{}class xe extends Sv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new l1(e,t,r):t==="array-contains"?new d1(e,r):t==="in"?new Vv(e,r):t==="not-in"?new f1(e,r):t==="array-contains-any"?new p1(e,r):new xe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new c1(e,r):new h1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ci(t,this.value)):t!==null&&Pi(this.value)===Pi(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class je extends Sv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new je(e,t)}matches(e){return Go(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Go(i){return i.op==="and"}function _f(i){return i.op==="or"}function Qf(i){return Av(i)&&Go(i)}function Av(i){for(const e of i.filters)if(e instanceof je)return!1;return!0}function yf(i){if(i instanceof xe)return i.field.canonicalString()+i.op.toString()+$o(i.value);if(Qf(i))return i.filters.map(e=>yf(e)).join(",");{const e=i.filters.map(t=>yf(t)).join(",");return`${i.op}(${e})`}}function Rv(i,e){return i instanceof xe?function(r,o){return o instanceof xe&&r.op===o.op&&r.field.isEqual(o.field)&&pr(r.value,o.value)}(i,e):i instanceof je?function(r,o){return o instanceof je&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&Rv(c,o.filters[d]),!0):!1}(i,e):void ie()}function Pv(i,e){const t=i.filters.concat(e);return je.create(t,i.op)}function Cv(i){return i instanceof xe?function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`}(i):i instanceof je?function(t){return t.op.toString()+" {"+t.getFilters().map(Cv).join(" ,")+"}"}(i):"Filter"}class l1 extends xe{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class c1 extends xe{constructor(e,t){super(e,"in",t),this.keys=xv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class h1 extends xe{constructor(e,t){super(e,"not-in",t),this.keys=xv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xv(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}class d1 extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cu(t)&&Pu(t.arrayValue,this.value)}}class Vv extends xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pu(this.value.arrayValue,t)}}class f1 extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Pu(this.value.arrayValue,t)}}class p1 extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function vf(i,e=null,t=[],r=[],o=null,a=null,c=null){return new m1(i,e,t,r,o,a,c)}function Ss(i){const e=ne(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$o(r)).join(",")),e.ue=t}return e.ue}function Bu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!u1(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Rv(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!k_(i.startAt,e.startAt)&&k_(i.endAt,e.endAt)}function bc(i){return ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Oc(i,e){return i.filters.filter(t=>t instanceof xe&&t.field.isEqual(e))}function N_(i,e,t){let r=Tc,o=!0;for(const a of Oc(i,e)){let c=Tc,d=!0;switch(a.op){case"<":case"<=":c=o1(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,d=!1;break;case"!=":case"not-in":c=Tc}x_({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];x_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function b_(i,e,t){let r=wi,o=!0;for(const a of Oc(i,e)){let c=wi,d=!0;switch(a.op){case">=":case">":c=a1(a.value),d=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,d=!1;break;case"!=":case"not-in":c=wi}V_({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];V_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dv(i,e,t,r,o,a,c,d){return new Ur(i,e,t,r,o,a,c,d)}function ra(i){return new Ur(i)}function O_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Wf(i){return i.collectionGroup!==null}function Fo(i){const e=ne(i);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new qe(nt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(d=d.add(_.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new xu(a,r))}),t.has(nt.keyField().canonicalString())||e.ce.push(new xu(nt.keyField(),r))}return e.ce}function nn(i){const e=ne(i);return e.le||(e.le=g1(e,Fo(i))),e.le}function g1(i,e){if(i.limitType==="F")return vf(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new xu(o.field,a)});const t=i.endAt?new xi(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new xi(i.startAt.position,i.startAt.inclusive):null;return vf(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function wf(i,e){const t=i.filters.concat([e]);return new Ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Lc(i,e,t){return new Ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Uu(i,e){return Bu(nn(i),nn(e))&&i.limitType===e.limitType}function kv(i){return`${Ss(nn(i))}|lt:${i.limitType}`}function bo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>Cv(o)).join(", ")}]`),Fu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>$o(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>$o(o)).join(",")),`Target(${r})`}(nn(i))}; limitType=${i.limitType})`}function zu(i,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,e)&&function(r,o){for(const a of Fo(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const _=D_(c,d,p);return c.inclusive?_<=0:_<0}(r.startAt,Fo(r),o)||r.endAt&&!function(c,d,p){const _=D_(c,d,p);return c.inclusive?_>=0:_>0}(r.endAt,Fo(r),o))}(i,e)}function Nv(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function bv(i){return(e,t)=>{let r=!1;for(const o of Fo(i)){const a=_1(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function _1(i,e,t){const r=i.field.isKeyField()?ee.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),_=d.data.field(a);return p!==null&&_!==null?Ci(p,_):ie()}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return vv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new He(ee.comparator);function mn(){return y1}const Ov=new He(ee.comparator);function hu(...i){let e=Ov;for(const t of i)e=e.insert(t.key,t);return e}function Lv(i){let e=Ov;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cr(){return gu()}function Mv(){return gu()}function gu(){return new zr(i=>i.toString(),(i,e)=>i.isEqual(e))}const v1=new He(ee.comparator),w1=new qe(ee.comparator);function Te(...i){let e=w1;for(const t of i)e=e.add(t);return e}const E1=new qe(Ie);function Hf(){return E1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function Fv(i){return{integerValue:""+i}}function Bv(i,e){return pv(e)?Fv(e):Yf(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function I1(i,e,t){return i instanceof Ko?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Yc(a)&&(a=Jc(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof As?zv(i,e):i instanceof Rs?jv(i,e):function(o,a){const c=Uv(o,a),d=L_(c)+L_(o.Pe);return gf(c)&&gf(o.Pe)?Fv(d):Yf(o.serializer,d)}(i,e)}function T1(i,e,t){return i instanceof As?zv(i,e):i instanceof Rs?jv(i,e):t}function Uv(i,e){return i instanceof Qo?function(r){return gf(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ko extends Zc{}class As extends Zc{constructor(e){super(),this.elements=e}}function zv(i,e){const t=qv(e);for(const r of i.elements)t.some(o=>pr(o,r))||t.push(r);return{arrayValue:{values:t}}}class Rs extends Zc{constructor(e){super(),this.elements=e}}function jv(i,e){let t=qv(e);for(const r of i.elements)t=t.filter(o=>!pr(o,r));return{arrayValue:{values:t}}}class Qo extends Zc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function L_(i){return tt(i.integerValue||i.doubleValue)}function qv(i){return Cu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.field=e,this.transform=t}}function S1(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof As&&o instanceof As||r instanceof Rs&&o instanceof Rs?qo(r.elements,o.elements,pr):r instanceof Qo&&o instanceof Qo?pr(r.Pe,o.Pe):r instanceof Ko&&o instanceof Ko}(i.transform,e.transform)}class A1{constructor(e,t){this.version=e,this.transformResults=t}}class rt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rt}static exists(e){return new rt(void 0,e)}static updateTime(e){return new rt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class eh{}function $v(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sa(i.key,rt.none()):new ia(i.key,i.data,rt.none());{const t=i.data,r=Ft.empty();let o=new qe(nt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new jr(i.key,r,new pn(o.toArray()),rt.none())}}function R1(i,e,t){i instanceof ia?function(o,a,c){const d=o.value.clone(),p=F_(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof jr?function(o,a,c){if(!Rc(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=F_(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(Gv(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function _u(i,e,t,r){return i instanceof ia?function(a,c,d,p){if(!Rc(a.precondition,c))return d;const _=a.value.clone(),v=B_(a.fieldTransforms,p,c);return _.setAll(v),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),null}(i,e,t,r):i instanceof jr?function(a,c,d,p){if(!Rc(a.precondition,c))return d;const _=B_(a.fieldTransforms,p,c),v=c.data;return v.setAll(Gv(a)),v.setAll(_),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(i,e,t,r):function(a,c,d){return Rc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function P1(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),a=Uv(r.transform,o||null);a!=null&&(t===null&&(t=Ft.empty()),t.set(r.field,a))}return t||null}function M_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&qo(r,o,(a,c)=>S1(a,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ia extends eh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class jr extends eh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Gv(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function F_(i,e,t){const r=new Map;ue(i.length===t.length);for(let o=0;o<t.length;o++){const a=i[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,T1(c,d,t[o]))}return r}function B_(i,e,t){const r=new Map;for(const o of i){const a=o.transform,c=t.data.field(o.field);r.set(o.field,I1(a,c,e))}return r}class sa extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jf extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&R1(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Mv();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=$v(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Te())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(t,r)=>M_(t,r))&&qo(this.baseMutations,e.baseMutations,(t,r)=>M_(t,r))}}class Zf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ue(e.mutations.length===r.length);let o=function(){return v1}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Zf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,be;function Kv(i){switch(i){default:return ie();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function Qv(i){if(i===void 0)return ft("GRPC error has no .code"),z.UNKNOWN;switch(i){case yt.OK:return z.OK;case yt.CANCELLED:return z.CANCELLED;case yt.UNKNOWN:return z.UNKNOWN;case yt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case yt.INTERNAL:return z.INTERNAL;case yt.UNAVAILABLE:return z.UNAVAILABLE;case yt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case yt.NOT_FOUND:return z.NOT_FOUND;case yt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case yt.ABORTED:return z.ABORTED;case yt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case yt.DATA_LOSS:return z.DATA_LOSS;default:return ie()}}(be=yt||(yt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Es([4294967295,4294967295],0);function U_(i){const e=Wv().encode(i),t=new ev;return t.update(e),new Uint8Array(t.digest())}function z_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Es([t,r],0),new Es([o,a],0)]}class tp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new du(`Invalid padding: ${t}`);if(r<0)throw new du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new du(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Es.fromNumber(this.Te)}Ee(e,t,r){let o=e.add(t.multiply(Es.fromNumber(r)));return o.compare(x1)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=U_(e),[r,o]=z_(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new tp(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Te===0)return;const t=U_(e),[r,o]=z_(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qu(de.min(),o,new He(Ie),mn(),Te())}}class $u{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $u(r,t,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class Hv{constructor(e,t){this.targetId=e,this.me=t}}class Yv{constructor(e,t,r=lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class j_{constructor(){this.fe=0,this.ge=q_(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Te(),t=Te(),r=Te();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ie()}}),new $u(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=q_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class V1{constructor(e){this.Le=e,this.Be=new Map,this.ke=mn(),this.qe=mc(),this.Qe=mc(),this.Ke=new He(Ie)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,r=e.me.count,o=this.Ye(t);if(o){const a=o.target;if(bc(a))if(r===0){const c=new ee(a.path);this.We(t,c,Xe.newNoDocument(c,de.min()))}else ue(r===1);else{const c=this.Ze(t);if(c!==r){const d=this.Xe(e),p=d?this.et(d,e,c):1;if(p!==0){this.He(t);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,_)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Fr(r).toUint8Array()}catch(p){if(p instanceof wv)return fr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new tp(c,o,a)}catch(p){return fr(p instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.Le.nt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((a,c)=>{const d=this.Ye(c);if(d){if(a.current&&bc(d.target)){const p=new ee(d.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,Xe.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let r=Te();this.Qe.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const _=this.Ye(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new qu(e,t,this.Ke,this.ke,r);return this.ke=mn(),this.qe=mc(),this.Qe=mc(),this.Ke=new He(Ie),o}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new j_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new qe(Ie),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qe(Ie),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new j_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mc(){return new He(ee.comparator)}function q_(){return new He(ee.comparator)}const D1={asc:"ASCENDING",desc:"DESCENDING"},k1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N1={and:"AND",or:"OR"};class b1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ef(i,e){return i.useProto3Json||Fu(e)?e:{value:e}}function Wo(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jv(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O1(i,e){return Wo(i,e.toTimestamp())}function pt(i){return ue(!!i),de.fromTimestamp(function(t){const r=Mr(t);return new it(r.seconds,r.nanos)}(i))}function np(i,e){return If(i,e).canonicalString()}function If(i,e){const t=function(o){return new Ce(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function Xv(i){const e=Ce.fromString(i);return ue(uw(e)),e}function Vu(i,e){return np(i.databaseId,e.path)}function dr(i,e){const t=Xv(e);if(t.get(1)!==i.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ee(tw(t))}function Zv(i,e){return np(i.databaseId,e)}function ew(i){const e=Xv(i);return e.length===4?Ce.emptyPath():tw(e)}function Tf(i){return new Ce(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tw(i){return ue(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function $_(i,e,t){return{name:Vu(i,e),fields:t.value.mapValue.fields}}function nw(i,e,t){const r=dr(i,e.name),o=pt(e.updateTime),a=e.createTime?pt(e.createTime):de.min(),c=new Ft({mapValue:{fields:e.fields}}),d=Xe.newFoundDocument(r,o,a,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function L1(i,e){return"found"in e?function(r,o){ue(!!o.found),o.found.name,o.found.updateTime;const a=dr(r,o.found.name),c=pt(o.found.updateTime),d=o.found.createTime?pt(o.found.createTime):de.min(),p=new Ft({mapValue:{fields:o.found.fields}});return Xe.newFoundDocument(a,c,d,p)}(i,e):"missing"in e?function(r,o){ue(!!o.missing),ue(!!o.readTime);const a=dr(r,o.missing),c=pt(o.readTime);return Xe.newNoDocument(a,c)}(i,e):ie()}function M1(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(_,v){return _.useProto3Json?(ue(v===void 0||typeof v=="string"),lt.fromBase64String(v||"")):(ue(v===void 0||v instanceof Buffer||v instanceof Uint8Array),lt.fromUint8Array(v||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(_){const v=_.code===void 0?z.UNKNOWN:Qv(_.code);return new Q(v,_.message||"")}(c);t=new Yv(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=dr(i,r.document.name),a=pt(r.document.updateTime),c=r.document.createTime?pt(r.document.createTime):de.min(),d=new Ft({mapValue:{fields:r.document.fields}}),p=Xe.newFoundDocument(o,a,c,d),_=r.targetIds||[],v=r.removedTargetIds||[];t=new Pc(_,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=dr(i,r.document),a=r.readTime?pt(r.readTime):de.min(),c=Xe.newNoDocument(o,a),d=r.removedTargetIds||[];t=new Pc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=dr(i,r.document),a=r.removedTargetIds||[];t=new Pc([],a,o,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new C1(o,a),d=r.targetId;t=new Hv(d,c)}}return t}function Du(i,e){let t;if(e instanceof ia)t={update:$_(i,e.key,e.value)};else if(e instanceof sa)t={delete:Vu(i,e.key)};else if(e instanceof jr)t={update:$_(i,e.key,e.data),updateMask:q1(e.fieldMask)};else{if(!(e instanceof Jf))return ie();t={verify:Vu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof Ko)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof As)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rs)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qo)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:O1(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ie()}(i,e.precondition)),t}function Sf(i,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?rt.updateTime(pt(a.updateTime)):a.exists!==void 0?rt.exists(a.exists):rt.none()}(e.currentDocument):rt.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let p=null;if("setToServerValue"in d)ue(d.setToServerValue==="REQUEST_TIME"),p=new Ko;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new As(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new Rs(v)}else"increment"in d?p=new Qo(c,d.increment):ie();const _=nt.fromServerFormat(d.fieldPath);return new ju(_,p)}(i,o)):[];if(e.update){e.update.name;const o=dr(i,e.update.name),a=new Ft({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const _=p.fieldPaths||[];return new pn(_.map(v=>nt.fromServerFormat(v)))}(e.updateMask);return new jr(o,a,c,t,r)}return new ia(o,a,t,r)}if(e.delete){const o=dr(i,e.delete);return new sa(o,t)}if(e.verify){const o=dr(i,e.verify);return new Jf(o,t)}return ie()}function F1(i,e){return i&&i.length>0?(ue(e!==void 0),i.map(t=>function(o,a){let c=o.updateTime?pt(o.updateTime):pt(a);return c.isEqual(de.min())&&(c=pt(a)),new A1(c,o.transformResults||[])}(t,e))):[]}function rw(i,e){return{documents:[Zv(i,e.path)]}}function iw(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Zv(i,o);const a=function(_){if(_.length!==0)return aw(je.create(_,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(_){if(_.length!==0)return _.map(v=>function(A){return{field:Oo(A.field),direction:U1(A.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ef(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ct:t,parent:o}}function sw(i){let e=ew(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ue(r===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(E){const A=ow(E);return A instanceof je&&Qf(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(A=>function(G){return new xu(Lo(G.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(A))}(t.orderBy));let d=null;t.limit&&(d=function(E){let A;return A=typeof E=="object"?E.value:E,Fu(A)?null:A}(t.limit));let p=null;t.startAt&&(p=function(E){const A=!!E.before,b=E.values||[];return new xi(b,A)}(t.startAt));let _=null;return t.endAt&&(_=function(E){const A=!E.before,b=E.values||[];return new xi(b,A)}(t.endAt)),Dv(e,o,c,a,d,"F",p,_)}function B1(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ow(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Lo(t.unaryFilter.field);return xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(t.unaryFilter.field);return xe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Lo(t.unaryFilter.field);return xe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Lo(t.unaryFilter.field);return xe.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(i):i.fieldFilter!==void 0?function(t){return xe.create(Lo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return je.create(t.compositeFilter.filters.map(r=>ow(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(i):ie()}function U1(i){return D1[i]}function z1(i){return k1[i]}function j1(i){return N1[i]}function Oo(i){return{fieldPath:i.canonicalString()}}function Lo(i){return nt.fromServerFormat(i.fieldPath)}function aw(i){return i instanceof xe?function(t){if(t.op==="=="){if(C_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(P_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(P_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:z1(t.op),value:t.value}}}(i):i instanceof je?function(t){const r=t.getFilters().map(o=>aw(o));return r.length===1?r[0]:{compositeFilter:{op:j1(t.op),filters:r}}}(i):ie()}function q1(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t,r,o,a=de.min(),c=de.min(),d=lt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.ht=e}}function $1(i,e){let t;if(e.document)t=nw(i.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),o=Cs(e.noDocument.readTime);t=Xe.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{const r=ee.fromSegments(e.unknownDocument.path),o=Cs(e.unknownDocument.version);t=Xe.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(o){const a=new it(o[0],o[1]);return de.fromTimestamp(a)}(e.readTime)),t}function G_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,c){return{name:Vu(a,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(a,c.version.toTimestamp()),createTime:Wo(a,c.createTime.toTimestamp())}}(i.ht,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ps(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:t.path.toArray(),version:Ps(e.version)}}return r}function Mc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ps(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cs(i){const e=new it(i.seconds,i.nanoseconds);return de.fromTimestamp(e)}function ms(i,e){const t=(e.baseMutations||[]).map(a=>Sf(i.ht,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>Sf(i.ht,a)),o=it.fromMillis(e.localWriteTimeMs);return new Xf(e.batchId,o,t,r)}function fu(i){const e=Cs(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Cs(i.lastLimboFreeSnapshotVersion):de.min();let r;return r=function(a){return a.documents!==void 0}(i.query)?function(a){return ue(a.documents.length===1),nn(ra(ew(a.documents[0])))}(i.query):function(a){return nn(sw(a))}(i.query),new br(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,lt.fromBase64String(i.resumeToken))}function cw(i,e){const t=Ps(e.snapshotVersion),r=Ps(e.lastLimboFreeSnapshotVersion);let o;o=bc(e.target)?rw(i.ht,e.target):iw(i.ht,e.target).ct;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ss(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function rp(i){const e=sw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Lc(e,e.limit,"L"):e}function tf(i,e){return new ep(e.largestBatchId,Sf(i.ht,e.overlayMutation))}function K_(i,e){const t=e.path.lastSegment();return[i,Wt(e.path.popLast()),t]}function Q_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Ps(r.readTime),documentKey:Wt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{getBundleMetadata(e,t){return W_(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:Cs(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return W_(e).put(function(o){return{bundleId:o.id,createTime:Ps(pt(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return H_(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:rp(a.bundledQuery),readTime:Cs(a.readTime)}}(r)})}saveNamedQuery(e,t){return H_(e).put(function(o){return{name:o.name,readTime:Ps(pt(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function W_(i){return At(i,"bundles")}function H_(i){return At(i,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const r=t.uid||"";return new th(e,r)}getOverlay(e,t){return su(e).get(K_(this.userId,t)).next(r=>r?tf(this.serializer,r):null)}getOverlays(e,t){const r=cr();return L.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((a,c)=>{const d=new ep(t,c);o.push(this.Tt(e,d))}),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Wt(c.getCollectionPath())));const a=[];return o.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(su(e).j("collectionPathOverlayIndex",d))}),L.waitFor(a)}getOverlaysForCollection(e,t,r){const o=cr(),a=Wt(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return su(e).U("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const _=tf(this.serializer,p);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const a=cr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return su(e).J({index:"collectionGroupOverlayIndex",range:d},(p,_,v)=>{const E=tf(this.serializer,_);a.size()<o||E.largestBatchId===c?(a.set(E.getKey(),E),c=E.largestBatchId):v.done()}).next(()=>a)}Tt(e,t){return su(e).put(function(o,a,c){const[d,p,_]=K_(a,c.mutation.key);return{userId:a,collectionPath:p,documentId:_,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Du(o.ht,c.mutation)}}(this.serializer,this.userId,t))}}function su(i){return At(i,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{It(e){return At(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?lt.fromUint8Array(r):lt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(tt(e.integerValue));else if("doubleValue"in e){const r=tt(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),Au(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Mr(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Fr(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?Ev(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Xc(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):ie()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const o of Object.keys(r))this.gt(o,t),this.dt(r[o],t)}bt(e,t){var r,o;const a=e.fields||{};this.Rt(t,53);const c="value",d=((o=(r=a[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Rt(t,15),t.Vt(tt(d)),this.gt(c,t),this.dt(a[c],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const o of r)this.dt(o,t)}St(e,t){this.Rt(t,37),ee.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}gs.Ft=new gs;function Q1(i){if(i===0)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Y_(i){const e=64-function(r){let o=0;for(let a=0;a<8;++a){const c=Q1(255&r[a]);if(o+=c,c!==8)break}return o}(i);return Math.ceil(e/8)}class W1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Lt(r.value),r=t.next();this.Bt()}kt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const o=t.codePointAt(0);this.xt(240|o>>>18),this.xt(128|63&o>>>12),this.xt(128|63&o>>>6),this.xt(128|63&o)}}this.Ot()}qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Lt(r);else if(r<2048)this.Lt(960|r>>>6),this.Lt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Lt(480|r>>>12),this.Lt(128|63&r>>>6),this.Lt(128|63&r);else{const o=t.codePointAt(0);this.Lt(240|o>>>18),this.Lt(128|63&o>>>12),this.Lt(128|63&o>>>6),this.Lt(128|63&o)}}this.Bt()}Qt(e){const t=this.Kt(e),r=Y_(t);this.$t(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ut(e){const t=this.Kt(e),r=Y_(t);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}xt(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Lt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class H1{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class Y1{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class ou{constructor(){this.Jt=new W1,this.Yt=new H1(this.Jt),this.Zt=new Y1(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}en(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _s(this.indexId,this.documentKey,this.arrayValue,r)}}function mi(i,e){let t=i.indexId-e.indexId;return t!==0?t:(t=J_(i.arrayValue,e.arrayValue),t!==0?t:(t=J_(i.directionalValue,e.directionalValue),t!==0?t:ee.comparator(i.documentKey,e.documentKey)))}function J_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.tn=new qe((t,r)=>nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const r=t;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(ue(e.collectionGroup===this.collectionId),this.sn)return!1;const t=ff(e);if(t!==void 0&&!this._n(t))return!1;const r=fs(e);let o=new Set,a=0,c=0;for(;a<r.length&&this._n(r[a]);++a)o=o.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.tn.size>0){const d=this.tn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[a];if(!this.an(d,p)||!this.un(this.nn[c++],p))return!1}++a}for(;a<r.length;++a){const d=r[a];if(c>=this.nn.length||!this.un(this.nn[c++],d))return!1}return!0}cn(){if(this.sn)return null;let e=new qe(nt.comparator);const t=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ec(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ec(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ec(r.field,r.dir==="asc"?0:1)));return new Nc(Nc.UNKNOWN_ID,this.collectionId,t,Su.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(i){var e,t;if(ue(i instanceof xe||i instanceof je),i instanceof xe){if(i instanceof Vv){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>xe.create(i.field,"==",a)))||[];return je.create(o,"or")}return i}const r=i.filters.map(o=>hw(o));return je.create(r,i.op)}function J1(i){if(i.getFilters().length===0)return[];const e=Pf(hw(i));return ue(dw(e)),Af(e)||Rf(e)?[e]:e.getFilters()}function Af(i){return i instanceof xe}function Rf(i){return i instanceof je&&Qf(i)}function dw(i){return Af(i)||Rf(i)||function(t){if(t instanceof je&&_f(t)){for(const r of t.getFilters())if(!Af(r)&&!Rf(r))return!1;return!0}return!1}(i)}function Pf(i){if(ue(i instanceof xe||i instanceof je),i instanceof xe)return i;if(i.filters.length===1)return Pf(i.filters[0]);const e=i.filters.map(r=>Pf(r));let t=je.create(e,i.op);return t=Fc(t),dw(t)?t:(ue(t instanceof je),ue(Go(t)),ue(t.filters.length>1),t.filters.reduce((r,o)=>ip(r,o)))}function ip(i,e){let t;return ue(i instanceof xe||i instanceof je),ue(e instanceof xe||e instanceof je),t=i instanceof xe?e instanceof xe?function(o,a){return je.create([o,a],"and")}(i,e):Z_(i,e):e instanceof xe?Z_(e,i):function(o,a){if(ue(o.filters.length>0&&a.filters.length>0),Go(o)&&Go(a))return Pv(o,a.getFilters());const c=_f(o)?o:a,d=_f(o)?a:o,p=c.filters.map(_=>ip(_,d));return je.create(p,"or")}(i,e),Fc(t)}function Z_(i,e){if(Go(e))return Pv(e,i.getFilters());{const t=e.filters.map(r=>ip(i,r));return je.create(t,"or")}}function Fc(i){if(ue(i instanceof xe||i instanceof je),i instanceof xe)return i;const e=i.getFilters();if(e.length===1)return Fc(e[0]);if(Av(i))return i;const t=e.map(o=>Fc(o)),r=[];return t.forEach(o=>{o instanceof xe?r.push(o):o instanceof je&&(o.op===i.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:je.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.ln=new sp}addToCollectionParentIndex(e,t){return this.ln.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Tn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class sp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new qe(Ce.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new qe(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Uint8Array(0);class Z1{constructor(e,t){this.databaseId=t,this.hn=new sp,this.Pn=new zr(r=>Ss(r),(r,o)=>Bu(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const a={collectionId:r,parent:Wt(o)};return ey(e).put(a)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[uv(t),""],!1,!0);return ey(e).U(o).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(lr(c.parent))}return r})}addFieldIndex(e,t){const r=au(e),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete o.indexId;const a=r.add(o);if(t.indexState){const c=Do(e);return a.next(d=>{c.put(Q_(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=au(e),o=Do(e),a=Vo(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=au(e),r=Vo(e),o=Do(e);return t.j().next(()=>r.j()).next(()=>o.j())}createTargetIndexes(e,t){return L.forEach(this.Tn(t),r=>this.getIndexType(e,r).next(o=>{if(o===0||o===1){const a=new X_(r).cn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=Vo(e);let o=!0;const a=new Map;return L.forEach(this.Tn(t),c=>this.In(e,c).next(d=>{o&&(o=!!d),a.set(c,d)})).next(()=>{if(o){let c=Te();const d=[];return L.forEach(a,(p,_)=>{H("IndexedDbIndexManager",`Using index ${function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map(we=>`${we.fieldPath}:${we.kind}`).join(",")}`}(p)} to execute ${Ss(t)}`);const v=function(le,we){const Ae=ff(we);if(Ae===void 0)return null;for(const ve of Oc(le,Ae.fieldPath))switch(ve.op){case"array-contains-any":return ve.value.arrayValue.values||[];case"array-contains":return[ve.value]}return null}(_,p),E=function(le,we){const Ae=new Map;for(const ve of fs(we))for(const x of Oc(le,ve.fieldPath))switch(x.op){case"==":case"in":Ae.set(ve.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return Ae.set(ve.fieldPath.canonicalString(),x.value),Array.from(Ae.values())}return null}(_,p),A=function(le,we){const Ae=[];let ve=!0;for(const x of fs(we)){const S=x.kind===0?N_(le,x.fieldPath,le.startAt):b_(le,x.fieldPath,le.startAt);Ae.push(S.value),ve&&(ve=S.inclusive)}return new xi(Ae,ve)}(_,p),b=function(le,we){const Ae=[];let ve=!0;for(const x of fs(we)){const S=x.kind===0?b_(le,x.fieldPath,le.endAt):N_(le,x.fieldPath,le.endAt);Ae.push(S.value),ve&&(ve=S.inclusive)}return new xi(Ae,ve)}(_,p),G=this.En(p,_,A),$=this.En(p,_,b),q=this.dn(p,_,E),fe=this.An(p.indexId,v,G,A.inclusive,$,b.inclusive,q);return L.forEach(fe,me=>r.G(me,t.limit).next(le=>{le.forEach(we=>{const Ae=ee.fromSegments(we.documentKey);c.has(Ae)||(c=c.add(Ae),d.push(Ae))})}))}).next(()=>d)}return L.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(e.filters.length===0?t=[e]:t=J1(je.create(e.filters,"and")).map(r=>vf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,r,o,a,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,a.length),_=p/(t!=null?t.length:1),v=[];for(let E=0;E<p;++E){const A=t?this.Rn(t[E/_]):gc,b=this.Vn(e,A,r[E%_],o),G=this.mn(e,A,a[E%_],c),$=d.map(q=>this.Vn(e,A,q,!0));v.push(...this.createRange(b,G,$))}return v}Vn(e,t,r,o){const a=new _s(e,ee.empty(),t,r);return o?a:a.en()}mn(e,t,r,o){const a=new _s(e,ee.empty(),t,r);return o?a.en():a}In(e,t){const r=new X_(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(a=>{let c=null;for(const d of a)r.on(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const o=this.Tn(t);return L.forEach(o,a=>this.In(e,a).next(c=>{c?r!==0&&c.fields.length<function(p){let _=new qe(nt.comparator),v=!1;for(const E of p.filters)for(const A of E.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?v=!0:_=_.add(A.field));for(const E of p.orderBy)E.field.isKeyField()||(_=_.add(E.field));return _.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&o.length>1&&r===2?1:r)}fn(e,t){const r=new ou;for(const o of fs(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const c=r.Xt(o.kind);gs.Ft.Et(a,c)}return r.Ht()}Rn(e){const t=new ou;return gs.Ft.Et(e,t.Xt(0)),t.Ht()}gn(e,t){const r=new ou;return gs.Ft.Et(Ts(this.databaseId,t),r.Xt(function(a){const c=fs(a);return c.length===0?0:c[c.length-1].kind}(e))),r.Ht()}dn(e,t,r){if(r===null)return[];let o=[];o.push(new ou);let a=0;for(const c of fs(e)){const d=r[a++];for(const p of o)if(this.pn(t,c.fieldPath)&&Cu(d))o=this.yn(o,c,d);else{const _=p.Xt(c.kind);gs.Ft.Et(d,_)}}return this.wn(o)}En(e,t,r){return this.dn(e,t,r.position)}wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ht();return t}yn(e,t,r){const o=[...e],a=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new ou;p.seed(d.Ht()),gs.Ft.Et(c,p.Xt(t.kind)),a.push(p)}return a}pn(e,t){return!!e.filters.find(r=>r instanceof xe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=au(e),o=Do(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(a=>{const c=[];return L.forEach(a,d=>o.get([d.indexId,this.uid]).next(p=>{c.push(function(v,E){const A=E?new Su(E.sequenceNumber,new Tn(Cs(E.readTime),new ee(lr(E.documentKey)),E.largestBatchId)):Su.empty(),b=v.fields.map(([G,$])=>new Ec(nt.fromServerFormat(G),$));return new Nc(v.indexId,v.collectionGroup,b,A)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,o)=>{const a=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:Ie(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=au(e),a=Do(e);return this.Sn(e).next(c=>o.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>L.forEach(d,p=>a.put(Q_(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,(o,a)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),L.forEach(d,p=>this.bn(e,o,p).next(_=>{const v=this.Dn(a,p);return _.isEqual(v)?L.resolve():this.vn(e,a,p,_,v)}))))})}Cn(e,t,r,o){return Vo(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,r,o){return Vo(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}bn(e,t,r){const o=Vo(e);let a=new qe(mi);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,d)=>{a=a.add(new _s(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}Dn(e,t){let r=new qe(mi);const o=this.fn(t,e);if(o==null)return r;const a=ff(t);if(a!=null){const c=e.data.field(a.fieldPath);if(Cu(c))for(const d of c.arrayValue.values||[])r=r.add(new _s(t.indexId,e.key,this.Rn(d),o))}else r=r.add(new _s(t.indexId,e.key,gc,o));return r}vn(e,t,r,o,a){H("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,v,E,A){const b=p.getIterator(),G=_.getIterator();let $=xo(b),q=xo(G);for(;$||q;){let fe=!1,me=!1;if($&&q){const le=v($,q);le<0?me=!0:le>0&&(fe=!0)}else $!=null?me=!0:fe=!0;fe?(E(q),q=xo(G)):me?(A($),$=xo(b)):($=xo(b),q=xo(G))}}(o,a,mi,d=>{c.push(this.Cn(e,t,r,d))},d=>{c.push(this.Fn(e,t,r,d))}),L.waitFor(c)}Sn(e){let t=1;return Do(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,a)=>{a.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>mi(c,d)).filter((c,d,p)=>!d||mi(c,p[d-1])!==0);const o=[];o.push(e);for(const c of r){const d=mi(c,e),p=mi(c,t);if(d===0)o[0]=e.en();else if(d>0&&p<0)o.push(c),o.push(c.en());else if(p>0)break}o.push(t);const a=[];for(let c=0;c<o.length;c+=2){if(this.Mn(o[c],o[c+1]))return[];const d=[o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,gc,[]],p=[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,gc,[]];a.push(IDBKeyRange.bound(d,p))}return a}Mn(e,t){return mi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ty)}getMinOffset(e,t){return L.mapArray(this.Tn(t),r=>this.In(e,r).next(o=>o||ie())).next(ty)}}function ey(i){return At(i,"collectionParents")}function Vo(i){return At(i,"indexEntries")}function au(i){return At(i,"indexConfiguration")}function Do(i){return At(i,"indexState")}function ty(i){ue(i.length!==0);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;$f(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(i,e,t){const r=i.store("mutations"),o=i.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.J({range:c},(v,E,A)=>(d++,A.delete()));a.push(p.next(()=>{ue(d===1)}));const _=[];for(const v of t.mutations){const E=mv(e,v.key.path,t.batchId);a.push(o.delete(E)),_.push(v.key)}return L.waitFor(a).next(()=>_)}function Bc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ie();e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class nh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.xn={}}static Pt(e,t,r,o){ue(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new nh(a,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gi(e).J({index:"userMutationsIndex",range:r},(o,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const a=Mo(e),c=gi(e);return c.add({}).next(d=>{ue(typeof d=="number");const p=new Xf(d,t,r,o),_=function(b,G,$){const q=$.baseMutations.map(me=>Du(b.ht,me)),fe=$.mutations.map(me=>Du(b.ht,me));return{userId:G,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:q,mutations:fe}}(this.serializer,this.userId,p),v=[];let E=new qe((A,b)=>Ie(A.canonicalString(),b.canonicalString()));for(const A of o){const b=mv(this.userId,A.key.path,d);E=E.add(A.key.path.popLast()),v.push(c.put(_)),v.push(a.put(b,BT))}return E.forEach(A=>{v.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.xn[d]=p.keys()}),L.waitFor(v).next(()=>p)})}lookupMutationBatch(e,t){return gi(e).get(t).next(r=>r?(ue(r.userId===this.userId),ms(this.serializer,r)):null)}On(e,t){return this.xn[t]?L.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.xn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return gi(e).J({index:"userMutationsIndex",range:o},(c,d,p)=>{d.userId===this.userId&&(ue(d.batchId>=r),a=ms(this.serializer,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gi(e).U("userMutationsIndex",t).next(r=>r.map(o=>ms(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ic(this.userId,t.path),o=IDBKeyRange.lowerBound(r),a=[];return Mo(e).J({range:o},(c,d,p)=>{const[_,v,E]=c,A=lr(v);if(_===this.userId&&t.path.isEqual(A))return gi(e).get(E).next(b=>{if(!b)throw ie();ue(b.userId===this.userId),a.push(ms(this.serializer,b))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qe(Ie);const o=[];return t.forEach(a=>{const c=Ic(this.userId,a.path),d=IDBKeyRange.lowerBound(c),p=Mo(e).J({range:d},(_,v,E)=>{const[A,b,G]=_,$=lr(b);A===this.userId&&a.path.isEqual($)?r=r.add(G):E.done()});o.push(p)}),L.waitFor(o).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,a=Ic(this.userId,r),c=IDBKeyRange.lowerBound(a);let d=new qe(Ie);return Mo(e).J({range:c},(p,_,v)=>{const[E,A,b]=p,G=lr(A);E===this.userId&&r.isPrefixOf(G)?G.length===o&&(d=d.add(b)):v.done()}).next(()=>this.Nn(e,d))}Nn(e,t){const r=[],o=[];return t.forEach(a=>{o.push(gi(e).get(a).next(c=>{if(c===null)throw ie();ue(c.userId===this.userId),r.push(ms(this.serializer,c))}))}),L.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return fw(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Ln(t.batchId)}),L.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),o=[];return Mo(e).J({range:r},(a,c,d)=>{if(a[0]===this.userId){const p=lr(a[1]);o.push(p)}else d.done()}).next(()=>{ue(o.length===0)})})}containsKey(e,t){return pw(e,this.userId,t)}Bn(e){return mw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pw(i,e,t){const r=Ic(e,t.path),o=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Mo(i).J({range:a,H:!0},(d,p,_)=>{const[v,E,A]=d;v===e&&E===o&&(c=!0),_.done()}).next(()=>c)}function gi(i){return At(i,"mutations")}function Mo(i){return At(i,"documentMutations")}function mw(i){return At(i,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new xs(0)}static Qn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const r=new xs(t.highestTargetId);return t.highestTargetId=r.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(t=>de.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Kn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.$n(e,o)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(t,r),this.$n(e,r))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ko(e).delete(t.targetId)).next(()=>this.Kn(e)).next(r=>(ue(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,t,r){let o=0;const a=[];return ko(e).J((c,d)=>{const p=fu(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,a.push(this.removeTargetData(e,p)))}).next(()=>L.waitFor(a)).next(()=>o)}forEachTarget(e,t){return ko(e).J((r,o)=>{const a=fu(o);t(a)})}Kn(e){return ry(e).get("targetGlobalKey").next(t=>(ue(t!==null),t))}$n(e,t){return ry(e).put("targetGlobalKey",t)}Un(e,t){return ko(e).put(cw(this.serializer,t))}Wn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ss(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ko(e).J({range:o,index:"queryTargetsIndex"},(c,d,p)=>{const _=fu(d);Bu(t,_.target)&&(a=_,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const o=[],a=yi(e);return t.forEach(c=>{const d=Wt(c.path);o.push(a.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))}),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=yi(e);return L.forEach(t,a=>{const c=Wt(a.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=yi(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=yi(e);let a=Te();return o.J({range:r,H:!0},(c,d,p)=>{const _=lr(c[1]),v=new ee(_);a=a.add(v)}).next(()=>a)}containsKey(e,t){const r=Wt(t.path),o=IDBKeyRange.bound([r],[uv(r)],!1,!0);let a=0;return yi(e).J({index:"documentTargetsIndex",H:!0,range:o},([c,d],p,_)=>{c!==0&&(a++,_.done())}).next(()=>a>0)}ut(e,t){return ko(e).get(t).next(r=>r?fu(r):null)}}function ko(i){return At(i,"targets")}function ry(i){return At(i,"targetGlobal")}function yi(i){return At(i,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy([i,e],[t,r]){const o=Ie(i,t);return o===0?Ie(e,r):o}class tS{constructor(e){this.Gn=e,this.buffer=new qe(iy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bi(t)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ni(t)}await this.Yn(3e5)})}}class nS{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(fn.oe);const r=new tS(t);return this.Zn.forEachTarget(e,o=>r.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>r.Hn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(ny)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ny):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,o,a,c,d,p,_;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,t))).next(E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(_=Date.now(),No()<=De.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(_-p)+`ms
Total Duration: ${_-v}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E})))}}function _w(i,e){return new nS(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.db=e,this.garbageCollector=_w(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(r,o)=>t(o))}addReference(e,t,r){return _c(e,r)}removeReference(e,t,r){return _c(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _c(e,t)}ir(e,t){return function(o,a){let c=!1;return mw(o).Y(d=>pw(o,d,a).next(p=>(p&&(c=!0),L.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.rr(e,(c,d)=>{if(d<=t){const p=this.ir(e,c).next(_=>{if(!_)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,de.min()),yi(e).delete(function(E){return[0,Wt(E.path)]}(c))))});o.push(p)}}).next(()=>L.waitFor(o)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _c(e,t)}rr(e,t){const r=yi(e);let o,a=fn.oe;return r.J({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:_})=>{c===0?(a!==fn.oe&&t(new ee(lr(o)),a),a=_,o=p):a=fn.oe}).next(()=>{a!==fn.oe&&t(new ee(lr(o)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _c(i,e){return yi(i).put(function(r,o){return{targetId:0,path:Wt(r.path),sequenceNumber:o}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.changes=new zr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return hs(e).put(r)}removeEntry(e,t,r){return hs(e).delete(function(a,c){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Mc(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.sr(e,r)))}getEntry(e,t){let r=Xe.newInvalidDocument(t);return hs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(o,a)=>{r=this._r(t,a)}).next(()=>r)}ar(e,t){let r={size:0,document:Xe.newInvalidDocument(t)};return hs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(o,a)=>{r={document:this._r(t,a),size:Bc(a)}}).next(()=>r)}getEntries(e,t){let r=mn();return this.ur(e,t,(o,a)=>{const c=this._r(o,a);r=r.insert(o,c)}).next(()=>r)}cr(e,t){let r=mn(),o=new He(ee.comparator);return this.ur(e,t,(a,c)=>{const d=this._r(a,c);r=r.insert(a,d),o=o.insert(a,Bc(c))}).next(()=>({documents:r,lr:o}))}ur(e,t,r){if(t.isEmpty())return L.resolve();let o=new qe(ay);t.forEach(p=>o=o.add(p));const a=IDBKeyRange.bound(uu(o.first()),uu(o.last())),c=o.getIterator();let d=c.getNext();return hs(e).J({index:"documentKeyIndex",range:a},(p,_,v)=>{const E=ee.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&ay(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,_),d=c.hasNext()?c.getNext():null),d?v.$(uu(d)):v.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o,a){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Mc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hs(e).U(IDBKeyRange.bound(d,p,!0)).next(_=>{a==null||a.incrementDocumentReadCount(_.length);let v=mn();for(const E of _){const A=this._r(ee.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);A.isFoundDocument()&&(zu(t,A)||o.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,o){let a=mn();const c=oy(t,r),d=oy(t,Tn.max());return hs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,_,v)=>{const E=this._r(ee.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);a=a.insert(E.key,E),a.size===o&&v.done()}).next(()=>a)}newChangeBuffer(e){return new sS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sy(e).get("remoteDocumentGlobalKey").next(t=>(ue(!!t),t))}sr(e,t){return sy(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const r=$1(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(de.min())))return r}return Xe.newInvalidDocument(e)}}function vw(i){return new iS(i)}class sS extends yw{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new zr(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new qe((a,c)=>Ie(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const d=this.Pr.get(a);if(t.push(this.hr.removeEntry(e,a,d.readTime)),c.isValidDocument()){const p=G_(this.hr.serializer,c);o=o.add(a.path.popLast());const _=Bc(p);r+=_-d.size,t.push(this.hr.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=G_(this.hr.serializer,c.convertToNoDocument(de.min()));t.push(this.hr.addEntry(e,a,p))}}),o.forEach(a=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.hr.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(r=>(this.Pr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(({documents:r,lr:o})=>(o.forEach((a,c)=>{this.Pr.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function sy(i){return At(i,"remoteDocumentGlobal")}function hs(i){return At(i,"remoteDocumentsV14")}function uu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oy(i,e){const t=e.documentKey.path.toArray();return[i,Mc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ay(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(o=Ie(t[a],r[a]),o)return o;return o=Ie(t.length,r.length),o||(o=Ie(t[t.length-2],r[r.length-2]),o||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&_u(r.mutation,o,pn.empty(),it.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Te()){const o=cr();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=hu();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Te()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=mn();const c=gu(),d=function(){return gu()}();return t.forEach((p,_)=>{const v=r.get(_.key);o.has(_.key)&&(v===void 0||v.mutation instanceof jr)?a=a.insert(_.key,_):v!==void 0?(c.set(_.key,v.mutation.getFieldMask()),_u(v.mutation,_,v.mutation.getFieldMask(),it.now())):c.set(_.key,pn.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((_,v)=>c.set(_,v)),t.forEach((_,v)=>{var E;return d.set(_,new oS(v,(E=c.get(_))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const r=gu();let o=new He((c,d)=>c-d),a=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=t.get(p);if(_===null)return;let v=r.get(p)||pn.empty();v=d.applyToLocalView(_,v),r.set(p,v);const E=(o.get(d.batchId)||Te()).add(p);o=o.insert(d.batchId,E)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,v=p.value,E=Mv();v.forEach(A=>{if(!a.has(A)){const b=$v(t.get(A),r.get(A));b!==null&&E.set(A,b),a=a.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,E))}return L.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):L.resolve(cr());let d=-1,p=a;return c.next(_=>L.forEach(_,(v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?L.resolve():this.remoteDocumentCache.getEntry(e,v).next(A=>{p=p.insert(v,A)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,p,_,Te())).next(v=>({batchId:d,changes:Lv(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let o=hu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=hu();return this.indexManager.getCollectionParents(e,a).next(d=>L.forEach(d,p=>{const _=function(E,A){return new Ur(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next(v=>{v.forEach((E,A)=>{c=c.insert(E,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,_)=>{const v=_.getKey();c.get(v)===null&&(c=c.insert(v,Xe.newInvalidDocument(v)))});let d=hu();return c.forEach((p,_)=>{const v=a.get(p);v!==void 0&&_u(v.mutation,_,pn.empty(),it.now()),zu(t,_)&&(d=d.insert(p,_))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return L.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:pt(o.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:rp(o.bundledQuery),readTime:pt(o.readTime)}}(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.overlays=new He(ee.comparator),this.Er=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=cr();return L.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.Tt(e,t,a)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Er.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=cr(),a=t.length+1,c=new ee(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new He((_,v)=>_-v);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let v=a.get(_.largestBatchId);v===null&&(v=cr(),a=a.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const d=cr(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,v)=>d.set(_,v)),!(d.size()>=o)););return L.resolve(d)}Tt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(r.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ep(t,r));let a=this.Er.get(t);a===void 0&&(a=Te(),this.Er.set(t,a)),this.Er.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.dr=new qe(Dt.Ar),this.Rr=new qe(Dt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Dt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Dt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new ee(new Ce([])),r=new Dt(t,e),o=new Dt(t,e+1),a=[];return this.Rr.forEachInRange([r,o],c=>{this.gr(c),a.push(c.key)}),a}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ee(new Ce([])),r=new Dt(t,e),o=new Dt(t,e+1);let a=Te();return this.Rr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Dt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ee.comparator(e.key,t.key)||Ie(e.br,t.br)}static Vr(e,t){return Ie(e.br,t.br)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qe(Dt.Ar)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Xf(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.vr=this.vr.add(new Dt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Fr(r),a=o<0?0:o;return L.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,o],c=>{const d=this.Cr(c.br);a.push(d)}),L.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qe(Ie);return t.forEach(o=>{const a=new Dt(o,0),c=new Dt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,c],d=>{r=r.add(d.br)})}),L.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;ee.isDocumentKey(a)||(a=a.child(""));const c=new Dt(new ee(a),0);let d=new qe(Ie);return this.vr.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(d=d.add(p.br)),!0)},c),L.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(r=>{const o=this.Cr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return L.forEach(t.mutations,o=>{const a=new Dt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Dt(t,0),o=this.vr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.Nr=e,this.docs=function(){return new He(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(t))}getEntries(e,t){let r=mn();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Xe.newInvalidDocument(o))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=mn();const c=t.path,d=new ee(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:_,value:{document:v}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||$f(cv(v),r)<=0||(o.has(v.key)||zu(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return L.resolve(a)}getAllFromCollectionGroup(e,t,r,o){ie()}Lr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dS(this)}getSize(e){return L.resolve(this.size)}}class dS extends yw{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.persistence=e,this.Br=new zr(t=>Ss(t),Bu),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.kr=0,this.qr=new op,this.targetCount=0,this.Qr=xs.qn()}forEachTarget(e,t){return this.Br.forEach((r,o)=>t(o)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),L.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new xs(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Un(t),L.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Br.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Br.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),L.waitFor(a).next(()=>o)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),L.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t){this.Kr={},this.overlays={},this.$r=new fn(0),this.Ur=!1,this.Ur=!0,this.Wr=new lS,this.referenceDelegate=e(this),this.Gr=new fS(this),this.indexManager=new X1,this.remoteDocumentCache=function(o){return new hS(o)}(r=>this.referenceDelegate.zr(r)),this.serializer=new lw(t),this.jr=new aS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new cS(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);const o=new pS(this.$r.next());return this.referenceDelegate.Hr(),r(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(e,t){return L.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class pS extends dv{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Zr=new op,this.Xr=null}static ei(e){return new rh(e)}get ti(){if(this.Xr)return this.Xr;throw ie()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),L.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ti,r=>{const o=ee.fromPath(r);return this.ni(e,o).next(a=>{a||t.removeEntry(o,de.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return L.or([()=>L.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Uc{constructor(e,t){this.persistence=e,this.ri=new zr(r=>Wt(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=_w(this,t)}static ei(e,t){return new Uc(e,t)}Hr(){}Jr(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return L.forEach(this.ri,(r,o)=>this.ir(e,r,o).next(a=>a?L.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(d=>{d||(r++,a.removeEntry(c,de.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sc(e.data.value)),t}ir(e,t,r){return L.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.serializer=e}O(e,t,r,o){const a=new Hc("createOrUpgrade",t);r<1&&o>=1&&(function(p){p.createObjectStore("owner")}(e),function(p){p.createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I_,{unique:!0}),p.createObjectStore("documentMutations")}(e),uy(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),uy(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",v)}(a))),r<4&&o>=4&&(r!==0&&(c=c.next(()=>function(p,_){return _.store("mutations").U().next(v=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I_,{unique:!0});const E=_.store("mutations"),A=v.map(b=>E.put(b));return L.waitFor(A)})}(e,a))),c=c.next(()=>{(function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&o>=5&&(c=c.next(()=>this.ii(a))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.si(a)))),r<7&&o>=7&&(c=c.next(()=>this.oi(a))),r<8&&o>=8&&(c=c.next(()=>this._i(e,a))),r<9&&o>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&o>=10&&(c=c.next(()=>this.ai(a))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{(function(p){const _=p.createObjectStore("documentOverlays",{keyPath:JT});_.createIndex("collectionPathOverlayIndex",XT,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",ZT,{unique:!1})})(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:UT});_.createIndex("documentKeyIndex",zT),_.createIndex("collectionGroupIndex",jT)}(e)).next(()=>this.ui(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.ci(e,a))),r<15&&o>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:QT}).createIndex("sequenceNumberIndex",WT,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:HT}).createIndex("documentKeyIndex",YT,{unique:!1})}(e))),r<16&&o>=16&&(c=c.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&o>=17&&(c=c.next(()=>{(function(p){p.createObjectStore("globals",{keyPath:"name"})})(e)})),c}si(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=Bc(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(o=>L.forEach(o,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",c).next(d=>L.forEach(d,p=>{ue(p.userId===a.userId);const _=ms(this.serializer,p);return fw(e,a.userId,_).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const a=[];return r.J((c,d)=>{const p=new Ce(c),_=function(E){return[0,Wt(E)]}(p);a.push(t.get(_).next(v=>v?L.resolve():(E=>t.put({targetId:0,path:Wt(E),sequenceNumber:o.highestListenSequenceNumber}))(p)))}).next(()=>L.waitFor(a))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:KT});const r=t.store("collectionParents"),o=new sp,a=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:Wt(p)})}};return t.store("remoteDocuments").J({H:!0},(c,d)=>{const p=new Ce(c);return a(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,d,p],_)=>{const v=lr(d);return a(v.popLast())}))}ai(e){const t=e.store("targets");return t.J((r,o)=>{const a=fu(o),c=cw(this.serializer,a);return t.put(c)})}ui(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((a,c)=>{const d=t.store("remoteDocumentsV14"),p=function(E){return E.document?new ee(Ce.fromString(E.document.name).popFirst(5)):E.noDocument?ee.fromSegments(E.noDocument.path):E.unknownDocument?ee.fromSegments(E.unknownDocument.path):ie()}(c).path.toArray(),_={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(_))}).next(()=>L.waitFor(o))}ci(e,t){const r=t.store("mutations"),o=vw(this.serializer),a=new ap(rh.ei,this.serializer.ht);return r.U().next(c=>{const d=new Map;return c.forEach(p=>{var _;let v=(_=d.get(p.userId))!==null&&_!==void 0?_:Te();ms(this.serializer,p).keys().forEach(E=>v=v.add(E)),d.set(p.userId,v)}),L.forEach(d,(p,_)=>{const v=new kt(_),E=th.Pt(this.serializer,v),A=a.getIndexManager(v),b=nh.Pt(v,this.serializer,A,a.referenceDelegate);return new ww(o,b,E,A).recalculateAndSaveOverlaysForDocumentKeys(new pf(t,fn.oe),p).next()})})}}function uy(i){i.createObjectStore("targetDocuments",{keyPath:$T}).createIndex("documentTargetsIndex",GT,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qT,{unique:!0}),i.createObjectStore("targetGlobal")}const nf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class up{constructor(e,t,r,o,a,c,d,p,_,v,E=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.li=a,this.window=c,this.document=d,this.hi=_,this.Pi=v,this.Ti=E,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=A=>Promise.resolve(),!up.p())throw new Q(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rS(this,o),this.Vi=t+"main",this.serializer=new lw(p),this.mi=new hr(this.Vi,this.Ti,new mS(this.serializer)),this.Wr=new K1,this.Gr=new eS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vw(this.serializer),this.jr=new G1,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,v===!1&&ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,nf);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new fn(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(bi(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return lu(e).get("owner").next(t=>L.resolve(this.Fi(t)))}Mi(e){return yc(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=At(t,"clientMetadata");return r.U().next(o=>{const a=this.Ni(o,18e5),c=o.filter(d=>a.indexOf(d)===-1);return L.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Li(t.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?L.resolve(!0):lu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,nf);return!1}}return!(!this.networkEnabled||!this.inForeground)||yc(e).U().next(r=>this.Ni(r,5e3).find(o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&H("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new pf(e,fn.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(r=>this.Oi(r.updateTimeMs,t)&&!this.Bi(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>yc(e).U().next(t=>this.Ni(t,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return nh.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Z1(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return th.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,r){H("IndexedDbPersistence","Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=function(p){return p===17?n1:p===16?t1:p===15?Kf:p===14?yv:p===13?_v:p===12?e1:p===11?gv:void ie()}(this.Ti);let c;return this.mi.runTransaction(e,o,a,d=>(c=new pf(d,this.$r?this.$r.next():fn.oe),t==="readwrite-primary"?this.bi(c).next(p=>!!p||this.Di(c)).next(p=>{if(!p)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new Q(z.FAILED_PRECONDITION,hv);return r(c)}).next(p=>this.Ci(c).next(()=>p)):this.Ui(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ui(e){return lu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Q(z.FAILED_PRECONDITION,nf)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lu(e).put("owner",t)}static p(){return hr.p()}vi(e){const t=lu(e);return t.get("owner").next(r=>this.Fi(r)?(H("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):L.resolve())}Oi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;By()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var t;try{const r=((t=this.fi)===null||t===void 0?void 0:t.getItem(this.Li(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ft("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lu(i){return At(i,"owner")}function yc(i){return At(i,"clientMetadata")}function lp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=o}static zi(e,t){let r=Te(),o=Te();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new cp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return By()?8:fv(Dc())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Xi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.es(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new gS;return this.ts(e,t,c).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,c,d.size)})}).next(()=>a.result)}ns(e,t,r,o){return r.documentReadCount<this.Ji?(No()<=De.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),L.resolve()):(No()<=De.DEBUG&&H("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Yi*o?(No()<=De.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(t))):L.resolve())}Xi(e,t){if(O_(t))return L.resolve(null);let r=nn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Lc(t,null,"F"),r=nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Te(...a);return this.Zi.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.rs(t,d);return this.ss(t,_,c,p.readTime)?this.Xi(e,Lc(t,null,"F")):this.os(e,_,t,p)}))})))}es(e,t,r,o){return O_(t)||o.isEqual(de.min())?L.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const c=this.rs(t,a);return this.ss(t,c,r,o)?L.resolve(null):(No()<=De.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.os(e,c,t,lv(o,-1)).next(d=>d))})}rs(e,t){let r=new qe(bv(e));return t.forEach((o,a)=>{zu(e,a)&&(r=r.add(a))}),r}ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(e,t,r){return No()<=De.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",bo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Tn.min(),r)}os(e,t,r,o){return this.Zi.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,r,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new He(Ie),this.cs=new zr(a=>Ss(a),Bu),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ww(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Iw(i,e,t,r){return new _S(i,e,t,r)}async function Tw(i,e){const t=ne(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Te();for(const _ of o){c.push(_.batchId);for(const v of _.mutations)p=p.add(v.key)}for(const _ of a){d.push(_.batchId);for(const v of _.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next(_=>({Ts:_,removedBatchIds:c,addedBatchIds:d}))})})}function yS(i,e){const t=ne(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,_,v){const E=_.batch,A=E.keys();let b=L.resolve();return A.forEach(G=>{b=b.next(()=>v.getEntry(p,G)).next($=>{const q=_.docVersions.get(G);ue(q!==null),$.version.compareTo(q)<0&&(E.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),v.addEntry($)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Te();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(p=p.add(d.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Sw(i){const e=ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function vS(i,e){const t=ne(i),r=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,E).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,E)));let b=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(lt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,r)),o=o.insert(E,b),function($,q,fe){return $.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0}(A,b,v)&&d.push(t.Gr.updateTargetData(a,b))});let p=mn(),_=Te();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(Aw(a,c,e.documentUpdates).next(v=>{p=v.Is,_=v.Es})),!r.isEqual(de.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(E=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return L.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,_)).next(()=>p)}).then(a=>(t.us=o,a))}function Aw(i,e,t){let r=Te(),o=Te();return t.forEach(a=>r=r.add(a)),e.getEntries(i,r).next(a=>{let c=mn();return t.forEach((d,p)=>{const _=a.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(de.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):H("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Is:c,Es:o}})}function wS(i,e){const t=ne(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ho(i,e){const t=ne(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Gr.getTargetData(r,e).next(a=>a?(o=a,L.resolve(o)):t.Gr.allocateTargetId(r).next(c=>(o=new br(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.us.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Yo(i,e,t){const r=ne(i),o=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!bi(c))throw c;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.us=r.us.remove(e),r.cs.delete(o.target)}function zc(i,e,t){const r=ne(i);let o=de.min(),a=Te();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,_,v){const E=ne(p),A=E.cs.get(v);return A!==void 0?L.resolve(E.us.get(A)):E.Gr.getTargetData(_,v)}(r,c,nn(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r._s.getDocumentsMatchingQuery(c,e,t?o:de.min(),t?a:Te())).next(d=>(Cw(r,Nv(e),d),{documents:d,ds:a})))}function Rw(i,e){const t=ne(i),r=ne(t.Gr),o=t.us.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ut(a,e).next(c=>c?c.target:null))}function Pw(i,e){const t=ne(i),r=t.ls.get(e)||de.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hs.getAllFromCollectionGroup(o,e,lv(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Cw(t,e,o),o))}function Cw(i,e,t){let r=i.ls.get(e)||de.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),i.ls.set(e,r)}async function ES(i,e,t,r){const o=ne(i);let a=Te(),c=mn();for(const _ of t){const v=e.As(_.metadata.name);_.document&&(a=a.add(v));const E=e.Rs(_);E.setReadTime(e.Vs(_.metadata.readTime)),c=c.insert(v,E)}const d=o.hs.newChangeBuffer({trackRemovals:!0}),p=await Ho(o,function(v){return nn(ra(Ce.fromString(`__bundle__/docs/${v}`)))}(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",_=>Aw(_,d,c).next(v=>(d.apply(_),v)).next(v=>o.Gr.removeMatchingKeysForTargetId(_,p.targetId).next(()=>o.Gr.addMatchingKeys(_,a,p.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(_,v.Is,v.Es)).next(()=>v.Is)))}async function IS(i,e,t=Te()){const r=await Ho(i,nn(rp(e.bundledQuery))),o=ne(i);return o.persistence.runTransaction("Save named query","readwrite",a=>{const c=pt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.jr.saveNamedQuery(a,e);const d=r.withResumeToken(lt.EMPTY_BYTE_STRING,c);return o.us=o.us.insert(d.targetId,d),o.Gr.updateTargetData(a,d).next(()=>o.Gr.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>o.Gr.addMatchingKeys(a,t,r.targetId)).next(()=>o.jr.saveNamedQuery(a,e))})}function ly(i,e){return`firestore_clients_${i}_${e}`}function cy(i,e,t){let r=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rf(i,e){return`firestore_targets_${i}_${e}`}class jc{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static fs(e,t,r){const o=JSON.parse(r);let a,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(a=new Q(o.error.code,o.error.message))),c?new jc(e,t,o.state,a):(ft("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fs(e,t){const r=JSON.parse(t);let o,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new Q(r.error.code,r.error.message))),a?new yu(e,r.state,o):(ft("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const r=JSON.parse(t);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Hf();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=pv(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return o?new qc(e,a):(ft("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class hp{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new hp(t.clientId,t.onlineState):(ft("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cf{constructor(){this.activeTargetIds=Hf()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sf{constructor(e,t,r,o,a){this.window=e,this.li=t,this.persistenceKey=r,this.ws=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new He(Ie),this.started=!1,this.vs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Cs=ly(this.persistenceKey,this.ws),this.Fs=function(p){return`firestore_sequence_number_${p}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new Cf),this.Ms=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ns=function(p){return`firestore_online_state_${p}`}(this.persistenceKey),this.Ls=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.ws)continue;const o=this.getItem(ly(this.persistenceKey,r));if(o){const a=qc.fs(r,o);a&&(this.Ds=this.Ds.insert(a.clientId,a))}}this.Bs();const t=this.storage.getItem(this.Ns);if(t){const r=this.ks(t);r&&this.qs(r)}for(const r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,r){this.Ks(e,t,r),this.$s(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(rf(this.persistenceKey,e));if(o){const a=yu.fs(e,o);a&&(r=a.state)}}return t&&this.Us.ps(e),this.Bs(),r}removeLocalQueryTarget(e){this.Us.ys(e),this.Bs()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rf(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ws(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.$s(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return H("SharedClientState","READ",e,t),t}setItem(e,t){H("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){H("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(H("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ms.test(t.key)){if(t.newValue==null){const r=this.js(t.key);return this.Hs(r,null)}{const r=this.Js(t.key,t.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(t.key)){if(t.newValue!==null){const r=this.Xs(t.key,t.newValue);if(r)return this.eo(r)}}else if(t.key===this.Ns){if(t.newValue!==null){const r=this.ks(t.newValue);if(r)return this.qs(r)}}else if(t.key===this.Fs){const r=function(a){let c=fn.oe;if(a!=null)try{const d=JSON.parse(a);ue(typeof d=="number"),c=d}catch(d){ft("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Ls){const r=this.no(t.newValue);await Promise.all(r.map(o=>this.syncEngine.ro(o)))}}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,r){const o=new jc(this.currentUser,e,t,r),a=cy(this.persistenceKey,this.currentUser,e);this.setItem(a,o.gs())}$s(e){const t=cy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,r){const o=rf(this.persistenceKey,e),a=new yu(e,t,r);this.setItem(o,a.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Ls,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const r=this.js(e);return qc.fs(r,t)}Ys(e,t){const r=this.xs.exec(e),o=Number(r[1]),a=r[2]!==void 0?r[2]:null;return jc.fs(new kt(a),o,t)}Xs(e,t){const r=this.Os.exec(e),o=Number(r[1]);return yu.fs(o,t)}ks(e){return hp.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);H("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const r=t?this.Ds.insert(e,t):this.Ds.remove(e),o=this.Qs(this.Ds),a=this.Qs(r),c=[],d=[];return a.forEach(p=>{o.has(p)||c.push(p)}),o.forEach(p=>{a.has(p)||d.push(p)}),this.syncEngine.oo(c,d).then(()=>{this.Ds=r})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=Hf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class xw{constructor(){this._o=new Cf,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Cf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function of(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class RS extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,r,o,a,c){const d=of(),p=this.No(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(_,a,c),this.Bo(t,p,_,o).then(v=>(H("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw fr("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v})}ko(t,r,o,a,c,d){return this.Oo(t,r,o,a,c)}Lo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}No(t,r){const o=SS[t];return`${this.Fo}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,o){const a=of();return new Promise((c,d)=>{const p=new tv;p.setWithCredentials(!0),p.listenOnce(nv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case wc.NO_ERROR:const v=p.getResponseJson();H(Kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case wc.TIMEOUT:H(Kt,`RPC '${e}' ${a} timed out`),d(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const E=p.getStatus();if(H(Kt,`RPC '${e}' ${a} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const b=A==null?void 0:A.error;if(b&&b.status&&b.message){const G=function(q){const fe=q.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(fe)>=0?fe:z.UNKNOWN}(b.status);d(new Q(G,b.message))}else d(new Q(z.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Q(z.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{H(Kt,`RPC '${e}' ${a} completed.`)}});const _=JSON.stringify(o);H(Kt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",_,r,15)})}qo(e,t,r){const o=of(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sv(),d=iv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=a.join("");H(Kt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);let A=!1,b=!1;const G=new AS({Eo:q=>{b?H(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(A||(H(Kt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),H(Kt,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},Ao:()=>E.close()}),$=(q,fe,me)=>{q.listen(fe,le=>{try{me(le)}catch(we){setTimeout(()=>{throw we},0)}})};return $(E,cu.EventType.OPEN,()=>{b||(H(Kt,`RPC '${e}' stream ${o} transport opened.`),G.So())}),$(E,cu.EventType.CLOSE,()=>{b||(b=!0,H(Kt,`RPC '${e}' stream ${o} transport closed`),G.Do())}),$(E,cu.EventType.ERROR,q=>{b||(b=!0,fr(Kt,`RPC '${e}' stream ${o} transport errored:`,q),G.Do(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),$(E,cu.EventType.MESSAGE,q=>{var fe;if(!b){const me=q.data[0];ue(!!me);const le=me,we=(le==null?void 0:le.error)||((fe=le[0])===null||fe===void 0?void 0:fe.error);if(we){H(Kt,`RPC '${e}' stream ${o} received error:`,we);const Ae=we.status;let ve=function(P){const D=yt[P];if(D!==void 0)return Qv(D)}(Ae),x=we.message;ve===void 0&&(ve=z.INTERNAL,x="Unknown error status: "+Ae+" with message "+we.message),b=!0,G.Do(new Q(ve,x)),E.close()}else H(Kt,`RPC '${e}' stream ${o} received:`,me),G.vo(me)}}),$(d,rv.STAT_EVENT,q=>{q.stat===df.PROXY?H(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===df.NOPROXY&&H(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.bo()},0),G}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof window<"u"?window:null}function Cc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(i){return new b1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,r=1e3,o=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-r);o>0&&H("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,r,o,a,c,d,p){this.li=e,this.Yo=r,this.Zo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new dp(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(ft(t.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Xo===t&&this.I_(r,o)},r=>{e(()=>{const o=new Q(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(o)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{r(()=>this.E_(o))}),this.stream.onMessage(o=>{r(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends Dw{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=M1(this.serializer,e),r=function(a){if(!("targetChange"in a))return de.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?de.min():c.readTime?pt(c.readTime):de.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Tf(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=bc(p)?{documents:rw(a,p)}:{query:iw(a,p).ct},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Jv(a,c.resumeToken);const _=Ef(a,c.expectedCount);_!==null&&(d.expectedCount=_)}else if(c.snapshotVersion.compareTo(de.min())>0){d.readTime=Wo(a,c.snapshotVersion.toTimestamp());const _=Ef(a,c.expectedCount);_!==null&&(d.expectedCount=_)}return d}(this.serializer,e);const r=B1(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Tf(this.serializer),t.removeTarget=e,this.c_(t)}}class CS extends Dw{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=F1(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Tf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Du(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Oo(e,If(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(z.UNKNOWN,a.toString())})}ko(e,t,r,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.ko(e,If(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Q(z.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class VS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ft(t),this.C_=!1):H("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(c=>{r.enqueueAndForget(async()=>{Li(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(p){const _=ne(p);_.k_.add(4),await oa(_),_.K_.set("Unknown"),_.k_.delete(4),await Ku(_)}(this))})}),this.K_=new VS(r,o)}}async function Ku(i){if(Li(i))for(const e of i.q_)await e(!0)}async function oa(i){for(const e of i.q_)await e(!1)}function ih(i,e){const t=ne(i);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),mp(t)?pp(t):ua(t).s_()&&fp(t,e))}function Jo(i,e){const t=ne(i),r=ua(t);t.B_.delete(e),r.s_()&&kw(t,e),t.B_.size===0&&(r.s_()?r.a_():Li(t)&&t.K_.set("Unknown"))}function fp(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ua(i).V_(e)}function kw(i,e){i.U_.xe(e),ua(i).m_(e)}function pp(i){i.U_=new V1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),ua(i).start(),i.K_.F_()}function mp(i){return Li(i)&&!ua(i).i_()&&i.B_.size>0}function Li(i){return ne(i).k_.size===0}function Nw(i){i.U_=void 0}async function kS(i){i.K_.set("Online")}async function NS(i){i.B_.forEach((e,t)=>{fp(i,e)})}async function bS(i,e){Nw(i),mp(i)?(i.K_.O_(e),pp(i)):i.K_.set("Unknown")}async function OS(i,e,t){if(i.K_.set("Online"),e instanceof Yv&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.B_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.B_.delete(d),o.U_.removeTarget(d))}(i,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $c(i,r)}else if(e instanceof Pc?i.U_.$e(e):e instanceof Hv?i.U_.Je(e):i.U_.Ge(e),!t.isEqual(de.min()))try{const r=await Sw(i.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.U_.it(c);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.B_.get(_);v&&a.B_.set(_,v.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,_)=>{const v=a.B_.get(p);if(!v)return;a.B_.set(p,v.withResumeToken(lt.EMPTY_BYTE_STRING,v.snapshotVersion)),kw(a,p);const E=new br(v.target,p,_,v.sequenceNumber);fp(a,E)}),a.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await $c(i,r)}}async function $c(i,e,t){if(!bi(e))throw e;i.k_.add(1),await oa(i),i.K_.set("Offline"),t||(t=()=>Sw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await t(),i.k_.delete(1),await Ku(i)})}function bw(i,e){return e().catch(t=>$c(i,t,e))}async function aa(i){const e=ne(i),t=Vi(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;LS(e);)try{const o=await wS(e.localStore,r);if(o===null){e.L_.length===0&&t.a_();break}r=o.batchId,MS(e,o)}catch(o){await $c(e,o)}Ow(e)&&Lw(e)}function LS(i){return Li(i)&&i.L_.length<10}function MS(i,e){i.L_.push(e);const t=Vi(i);t.s_()&&t.f_&&t.g_(e.mutations)}function Ow(i){return Li(i)&&!Vi(i).i_()&&i.L_.length>0}function Lw(i){Vi(i).start()}async function FS(i){Vi(i).w_()}async function BS(i){const e=Vi(i);for(const t of i.L_)e.g_(t.mutations)}async function US(i,e,t){const r=i.L_.shift(),o=Zf.from(r,e,t);await bw(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await aa(i)}async function zS(i,e){e&&Vi(i).f_&&await async function(r,o){if(function(c){return Kv(c)&&c!==z.ABORTED}(o.code)){const a=r.L_.shift();Vi(r).__(),await bw(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await aa(r)}}(i,e),Ow(i)&&Lw(i)}async function dy(i,e){const t=ne(i);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Li(t);t.k_.add(3),await oa(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Ku(t)}async function xf(i,e){const t=ne(i);e?(t.k_.delete(2),await Ku(t)):e||(t.k_.add(2),await oa(t),t.K_.set("Unknown"))}function ua(i){return i.W_||(i.W_=function(t,r,o){const a=ne(t);return a.b_(),new PS(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{Ro:kS.bind(null,i),mo:NS.bind(null,i),po:bS.bind(null,i),R_:OS.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),mp(i)?pp(i):i.K_.set("Unknown")):(await i.W_.stop(),Nw(i))})),i.W_}function Vi(i){return i.G_||(i.G_=function(t,r,o){const a=ne(t);return a.b_(),new CS(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:FS.bind(null,i),po:zS.bind(null,i),p_:BS.bind(null,i),y_:US.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await aa(i)):(await i.G_.stop(),i.L_.length>0&&(H("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new gp(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function la(i,e){if(ft("AsyncQueue",`${e}: ${i}`),bi(i))return new Q(z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=hu(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Bo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.z_=new He(ee.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ie():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xo{constructor(e,t,r,o,a,c,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Xo(e,t,Bo.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class qS{constructor(){this.queries=py(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const o=ne(t),a=o.queries;o.queries=py(),a.forEach((c,d)=>{for(const p of d.J_)p.onError(r)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function py(){return new zr(i=>kv(i),Uu)}async function _p(i,e){const t=ne(i);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Y_()&&e.Z_()&&(r=2):(a=new jS,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(o,!0);break;case 1:a.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=la(c,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&vp(t)}async function yp(i,e){const t=ne(i),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.J_.indexOf(e);c>=0&&(a.J_.splice(c,1),a.J_.length===0?o=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $S(i,e){const t=ne(i);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.J_)d.ta(o)&&(r=!0);c.H_=o}}r&&vp(t)}function GS(i,e,t){const r=ne(i),o=r.queries.get(e);if(o)for(const a of o.J_)a.onError(t);r.queries.delete(e)}function vp(i){i.X_.forEach(e=>{e.next()})}var Vf,my;(my=Vf||(Vf={})).na="default",my.Cache="cache";class wp{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Vf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.ca=e,this.byteLength=t}la(){return"metadata"in this.ca}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this.serializer=e}As(e){return dr(this.serializer,e)}Rs(e){return e.metadata.exists?nw(this.serializer,e.document,!1):Xe.newNoDocument(this.As(e.metadata.name),this.Vs(e.metadata.readTime))}Vs(e){return pt(e)}}class QS{constructor(e,t,r){this.ha=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mw(e)}Pa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ca.namedQuery)this.queries.push(e.ca.namedQuery);else if(e.ca.documentMetadata){this.documents.push({metadata:e.ca.documentMetadata}),e.ca.documentMetadata.exists||++t;const r=Ce.fromString(e.ca.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ca.document&&(this.documents[this.documents.length-1].document=e.ca.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ta(e){const t=new Map,r=new gy(this.serializer);for(const o of e)if(o.metadata.queries){const a=r.As(o.metadata.name);for(const c of o.metadata.queries){const d=(t.get(c)||Te()).add(a);t.set(c,d)}}return t}async complete(){const e=await ES(this.localStore,new gy(this.serializer),this.documents,this.ha.id),t=this.Ta(this.documents);for(const r of this.queries)await IS(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,Ea:e}}}function Mw(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.key=e}}class Bw{constructor(e){this.key=e}}class Uw{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Te(),this.mutatedKeys=Te(),this.Va=bv(e),this.ma=new Bo(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new fy,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const A=o.get(v),b=zu(this.query,E)?E:null,G=!!A&&this.mutatedKeys.has(A.key),$=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let q=!1;A&&b?A.data.isEqual(b.data)?G!==$&&(r.track({type:3,doc:b}),q=!0):this.ya(A,b)||(r.track({type:2,doc:b}),q=!0,(p&&this.Va(b,p)>0||_&&this.Va(b,_)<0)&&(d=!0)):!A&&b?(r.track({type:0,doc:b}),q=!0):A&&!b&&(r.track({type:1,doc:A}),q=!0,(p||_)&&(d=!0)),q&&(b?(c=c.add(b),a=$?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{ma:c,pa:r,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((v,E)=>function(b,G){const $=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return $(b)-$(G)}(v.type,E.type)||this.Va(v.doc,E.doc)),this.wa(r),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,_=p!==this.Aa;return this.Aa=p,c.length!==0||_?{snapshot:new Xo(this.query,e.ma,a,c,e.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new fy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Te(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new Bw(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new Fw(r))}),t}va(e){this.da=e.ds,this.Ra=Te();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Xo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HS{constructor(e){this.key=e,this.Fa=!1}}class YS{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new zr(d=>kv(d),Uu),this.Oa=new Map,this.Na=new Set,this.La=new He(ee.comparator),this.Ba=new Map,this.ka=new op,this.qa={},this.Qa=new Map,this.Ka=xs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function JS(i,e,t=!0){const r=sh(i);let o;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=await zw(r,e,t,!0),o}async function XS(i,e){const t=sh(i);await zw(t,e,!0,!1)}async function zw(i,e,t,r){const o=await Ho(i.localStore,nn(e)),a=o.targetId,c=i.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await Ep(i,e,a,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&ih(i.remoteStore,o),d}async function Ep(i,e,t,r,o){i.Ua=(E,A,b)=>async function($,q,fe,me){let le=q.view.ga(fe);le.ss&&(le=await zc($.localStore,q.query,!1).then(({documents:x})=>q.view.ga(x,le)));const we=me&&me.targetChanges.get(q.targetId),Ae=me&&me.targetMismatches.get(q.targetId)!=null,ve=q.view.applyChanges(le,$.isPrimaryClient,we,Ae);return Df($,q.targetId,ve.ba),ve.snapshot}(i,E,A,b);const a=await zc(i.localStore,e,!0),c=new Uw(e,a.ds),d=c.ga(a.documents),p=$u.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),_=c.applyChanges(d,i.isPrimaryClient,p);Df(i,t,_.ba);const v=new WS(e,t,c);return i.xa.set(e,v),i.Oa.has(t)?i.Oa.get(t).push(e):i.Oa.set(t,[e]),_.snapshot}async function ZS(i,e,t){const r=ne(i),o=r.xa.get(e),a=r.Oa.get(o.targetId);if(a.length>1)return r.Oa.set(o.targetId,a.filter(c=>!Uu(c,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Yo(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Jo(r.remoteStore,o.targetId),Zo(r,o.targetId)}).catch(Ni)):(Zo(r,o.targetId),await Yo(r.localStore,o.targetId,!0))}async function eA(i,e){const t=ne(i),r=t.xa.get(e),o=t.Oa.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jo(t.remoteStore,r.targetId))}async function tA(i,e,t){const r=Ap(i);try{const o=await function(c,d){const p=ne(c),_=it.now(),v=d.reduce((b,G)=>b.add(G.key),Te());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",b=>{let G=mn(),$=Te();return p.hs.getEntries(b,v).next(q=>{G=q,G.forEach((fe,me)=>{me.isValidDocument()||($=$.add(fe))})}).next(()=>p.localDocuments.getOverlayedDocuments(b,G)).next(q=>{E=q;const fe=[];for(const me of d){const le=P1(me,E.get(me.key).overlayedDocument);le!=null&&fe.push(new jr(me.key,le,Tv(le.value.mapValue),rt.exists(!0)))}return p.mutationQueue.addMutationBatch(b,_,fe,d)}).next(q=>{A=q;const fe=q.applyToLocalDocumentSet(E,$);return p.documentOverlayCache.saveOverlays(b,q.batchId,fe)})}).then(()=>({batchId:A.batchId,changes:Lv(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let _=c.qa[c.currentUser.toKey()];_||(_=new He(Ie)),_=_.insert(d,p),c.qa[c.currentUser.toKey()]=_}(r,o.batchId,t),await qr(r,o.changes),await aa(r.remoteStore)}catch(o){const a=la(o,"Failed to persist write");t.reject(a)}}async function jw(i,e){const t=ne(i);try{const r=await vS(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Ba.get(a);c&&(ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?ue(c.Fa):o.removedDocuments.size>0&&(ue(c.Fa),c.Fa=!1))}),await qr(t,r,e)}catch(r){await Ni(r)}}function _y(i,e,t){const r=ne(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.xa.forEach((a,c)=>{const d=c.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=ne(c);p.onlineState=d;let _=!1;p.queries.forEach((v,E)=>{for(const A of E.J_)A.ea(d)&&(_=!0)}),_&&vp(p)}(r.eventManager,e),o.length&&r.Ma.R_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nA(i,e,t){const r=ne(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Ba.get(e),a=o&&o.key;if(a){let c=new He(ee.comparator);c=c.insert(a,Xe.newNoDocument(a,de.min()));const d=Te().add(a),p=new qu(de.min(),new Map,new He(Ie),c,d);await jw(r,p),r.La=r.La.remove(a),r.Ba.delete(e),Sp(r)}else await Yo(r.localStore,e,!1).then(()=>Zo(r,e,t)).catch(Ni)}async function rA(i,e){const t=ne(i),r=e.batch.batchId;try{const o=await yS(t.localStore,e);Tp(t,r,null),Ip(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await qr(t,o)}catch(o){await Ni(o)}}async function iA(i,e,t){const r=ne(i);try{const o=await function(c,d){const p=ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let v;return p.mutationQueue.lookupMutationBatch(_,d).next(E=>(ue(E!==null),v=E.keys(),p.mutationQueue.removeMutationBatch(_,E))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,v,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v)).next(()=>p.localDocuments.getDocuments(_,v))})}(r.localStore,e);Tp(r,e,t),Ip(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await qr(r,o)}catch(o){await Ni(o)}}async function sA(i,e){const t=ne(i);Li(t.remoteStore)||H("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=ne(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(r===-1)return void e.resolve();const o=t.Qa.get(r)||[];o.push(e),t.Qa.set(r,o)}catch(r){const o=la(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}function Ip(i,e){(i.Qa.get(e)||[]).forEach(t=>{t.resolve()}),i.Qa.delete(e)}function Tp(i,e,t){const r=ne(i);let o=r.qa[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.qa[r.currentUser.toKey()]=o}}function Zo(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Oa.get(e))i.xa.delete(r),t&&i.Ma.Wa(r,t);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(r=>{i.ka.containsKey(r)||qw(i,r)})}function qw(i,e){i.Na.delete(e.path.canonicalString());const t=i.La.get(e);t!==null&&(Jo(i.remoteStore,t),i.La=i.La.remove(e),i.Ba.delete(t),Sp(i))}function Df(i,e,t){for(const r of t)r instanceof Fw?(i.ka.addReference(r.key,e),oA(i,r)):r instanceof Bw?(H("SyncEngine","Document no longer in limbo: "+r.key),i.ka.removeReference(r.key,e),i.ka.containsKey(r.key)||qw(i,r.key)):ie()}function oA(i,e){const t=e.key,r=t.path.canonicalString();i.La.get(t)||i.Na.has(r)||(H("SyncEngine","New document in limbo: "+t),i.Na.add(r),Sp(i))}function Sp(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const t=new ee(Ce.fromString(e)),r=i.Ka.next();i.Ba.set(r,new HS(t)),i.La=i.La.insert(t,r),ih(i.remoteStore,new br(nn(ra(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}async function qr(i,e,t){const r=ne(i),o=[],a=[],c=[];r.xa.isEmpty()||(r.xa.forEach((d,p)=>{c.push(r.Ua(p,e,t).then(_=>{var v;if((_||t)&&r.isPrimaryClient){const E=_?!_.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(_){o.push(_);const E=cp.zi(p.targetId,_);a.push(E)}}))}),await Promise.all(c),r.Ma.R_(o),await async function(p,_){const v=ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>L.forEach(_,A=>L.forEach(A.Wi,b=>v.persistence.referenceDelegate.addReference(E,A.targetId,b)).next(()=>L.forEach(A.Gi,b=>v.persistence.referenceDelegate.removeReference(E,A.targetId,b)))))}catch(E){if(!bi(E))throw E;H("LocalStore","Failed to update sequence numbers: "+E)}for(const E of _){const A=E.targetId;if(!E.fromCache){const b=v.us.get(A),G=b.snapshotVersion,$=b.withLastLimboFreeSnapshotVersion(G);v.us=v.us.insert(A,$)}}}(r.localStore,a))}async function aA(i,e){const t=ne(i);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await Tw(t.localStore,e);t.currentUser=e,function(a,c){a.Qa.forEach(d=>{d.forEach(p=>{p.reject(new Q(z.CANCELLED,c))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qr(t,r.Ts)}}function uA(i,e){const t=ne(i),r=t.Ba.get(e);if(r&&r.Fa)return Te().add(r.key);{let o=Te();const a=t.Oa.get(e);if(!a)return o;for(const c of a){const d=t.xa.get(c);o=o.unionWith(d.view.fa)}return o}}async function lA(i,e){const t=ne(i),r=await zc(t.localStore,e.query,!0),o=e.view.va(r);return t.isPrimaryClient&&Df(t,e.targetId,o.ba),o}async function cA(i,e){const t=ne(i);return Pw(t.localStore,e).then(r=>qr(t,r))}async function hA(i,e,t,r){const o=ne(i),a=await function(d,p){const _=ne(d),v=ne(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.On(E,p).next(A=>A?_.localDocuments.getDocuments(E,A):L.resolve(null)))}(o.localStore,e);a!==null?(t==="pending"?await aa(o.remoteStore):t==="acknowledged"||t==="rejected"?(Tp(o,e,r||null),Ip(o,e),function(d,p){ne(ne(d).mutationQueue).Ln(p)}(o.localStore,e)):ie(),await qr(o,a)):H("SyncEngine","Cannot apply mutation batch with id: "+e)}async function dA(i,e){const t=ne(i);if(sh(t),Ap(t),e===!0&&t.$a!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),o=await yy(t,r.toArray());t.$a=!0,await xf(t.remoteStore,!0);for(const a of o)ih(t.remoteStore,a)}else if(e===!1&&t.$a!==!1){const r=[];let o=Promise.resolve();t.Oa.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Zo(t,c),Yo(t.localStore,c,!0))),Jo(t.remoteStore,c)}),await o,await yy(t,r),function(c){const d=ne(c);d.Ba.forEach((p,_)=>{Jo(d.remoteStore,_)}),d.ka.wr(),d.Ba=new Map,d.La=new He(ee.comparator)}(t),t.$a=!1,await xf(t.remoteStore,!1)}}async function yy(i,e,t){const r=ne(i),o=[],a=[];for(const c of e){let d;const p=r.Oa.get(c);if(p&&p.length!==0){d=await Ho(r.localStore,nn(p[0]));for(const _ of p){const v=r.xa.get(_),E=await lA(r,v);E.snapshot&&a.push(E.snapshot)}}else{const _=await Rw(r.localStore,c);d=await Ho(r.localStore,_),await Ep(r,$w(_),c,!1,d.resumeToken)}o.push(d)}return r.Ma.R_(a),o}function $w(i){return Dv(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function fA(i){return function(t){return ne(ne(t).persistence).$i()}(ne(i).localStore)}async function pA(i,e,t,r){const o=ne(i);if(o.$a)return void H("SyncEngine","Ignoring unexpected query state notification.");const a=o.Oa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=await Pw(o.localStore,Nv(a[0])),d=qu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",lt.EMPTY_BYTE_STRING);await qr(o,c,d);break}case"rejected":await Yo(o.localStore,e,!0),Zo(o,e,r);break;default:ie()}}async function mA(i,e,t){const r=sh(i);if(r.$a){for(const o of e){if(r.Oa.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){H("SyncEngine","Adding an already active target "+o);continue}const a=await Rw(r.localStore,o),c=await Ho(r.localStore,a);await Ep(r,$w(a),c.targetId,!1,c.resumeToken),ih(r.remoteStore,c)}for(const o of t)r.Oa.has(o)&&await Yo(r.localStore,o,!1).then(()=>{Jo(r.remoteStore,o),Zo(r,o)}).catch(Ni)}}function sh(i){const e=ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nA.bind(null,e),e.Ma.R_=$S.bind(null,e.eventManager),e.Ma.Wa=GS.bind(null,e.eventManager),e}function Ap(i){const e=ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iA.bind(null,e),e}function gA(i,e,t){const r=ne(i);(async function(a,c,d){try{const p=await c.getMetadata();if(await function(b,G){const $=ne(b),q=pt(G.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",fe=>$.jr.getBundleMetadata(fe,G.id)).then(fe=>!!fe&&fe.createTime.compareTo(q)>=0)}(a.localStore,p))return await c.close(),d._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(p)),Promise.resolve(new Set);d._updateProgress(Mw(p));const _=new QS(p,a.localStore,c.serializer);let v=await c.Ga();for(;v;){const A=await _.Pa(v);A&&d._updateProgress(A),v=await c.Ga()}const E=await _.complete();return await qr(a,E.Ea,void 0),await function(b,G){const $=ne(b);return $.persistence.runTransaction("Save bundle","readwrite",q=>$.jr.saveBundleMetadata(q,G))}(a.localStore,p),d._completeWith(E.progress),Promise.resolve(E.Ia)}catch(p){return fr("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}class ku{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Iw(this.persistence,new Ew,e.initialUser,this.serializer)}ja(e){return new ap(rh.ei,this.serializer)}za(e){return new xw}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ku.provider={build:()=>new ku};class _A extends ku{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ue(this.persistence.referenceDelegate instanceof Uc);const r=this.persistence.referenceDelegate.garbageCollector;return new gw(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new ap(r=>Uc.ei(r,t),this.serializer)}}class Gw extends ku{constructor(e,t,r){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await Ap(this.Za.syncEngine),await aa(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return Iw(this.persistence,new Ew,e.initialUser,this.serializer)}Ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new gw(r,e.asyncQueue,t)}Ya(e,t){const r=new MT(t,this.persistence);return new LT(e.asyncQueue,r)}ja(e){const t=lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new up(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Vw(),Cc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new xw}}class yA extends Gw{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof sf&&(this.sharedClientState.syncEngine={io:hA.bind(null,t),so:pA.bind(null,t),oo:mA.bind(null,t),$i:fA.bind(null,t),ro:cA.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si(async r=>{await dA(this.Za.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}za(e){const t=Vw();if(!sf.p(t))throw new Q(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sf(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Nu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aA.bind(null,this.syncEngine),await xf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qS}()}createDatastore(e){const t=Gu(e.databaseInfo.databaseId),r=function(a){return new RS(a)}(e.databaseInfo);return function(a,c,d,p){return new xS(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new DS(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>_y(this.syncEngine,t,0),function(){return hy.p()?new hy:new TS}())}createSyncEngine(e,t){return function(o,a,c,d,p,_,v){const E=new YS(o,a,c,d,p,_);return v&&(E.$a=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=ne(o);H("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await oa(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nu.provider={build:()=>new Nu};function vy(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const r={value:i.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.tu=e,this.serializer=t,this.metadata=new Bt,this.buffer=new Uint8Array,this.nu=function(){return new TextDecoder("utf-8")}(),this.ru().then(r=>{r&&r.la()?this.metadata.resolve(r.ca.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ca)}`))},r=>this.metadata.reject(r))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const e=await this.iu();if(e===null)return null;const t=this.nu.decode(e),r=Number(t);isNaN(r)&&this.su(`length string (${t}) is not valid number`);const o=await this.ou(r);return new KS(JSON.parse(o),e.length+r)}_u(){return this.buffer.findIndex(e=>e===123)}async iu(){for(;this._u()<0&&!await this.au(););if(this.buffer.length===0)return null;const e=this._u();e<0&&this.su("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ou(e){for(;this.buffer.length<e;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const t=this.nu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}su(e){throw this.tu.cancel(),new Error(`Invalid bundle format: ${e}`)}async au(){const e=await this.tu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Q(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,a){const c=ne(o),d={documents:a.map(E=>Vu(c.serializer,E))},p=await c.ko("BatchGetDocuments",c.serializer.databaseId,Ce.emptyPath(),d,a.length),_=new Map;p.forEach(E=>{const A=L1(c.serializer,E);_.set(A.key.toString(),A)});const v=[];return a.forEach(E=>{const A=_.get(E.toString());ue(!!A),v.push(A)}),v}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const o=ee.fromPath(r);this.mutations.push(new Jf(o,this.precondition(o)))}),await async function(r,o){const a=ne(r),c={writes:o.map(d=>Du(a.serializer,d))};await a.Oo("Commit",a.serializer.databaseId,Ce.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=de.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Q(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(de.min())?rt.exists(!1):rt.updateTime(t):rt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(de.min()))throw new Q(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rt.updateTime(t)}return rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,r,o,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=a,this.uu=r.maxAttempts,this.r_=new dp(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new wA(this.datastore),t=this.hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.Pu(o)}))}).catch(r=>{this.Pu(r)})})}hu(e){try{const t=this.updateFunction(e);return!Fu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Kv(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=kt.UNAUTHENTICATED,this.clientId=av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{H("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(H("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=la(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function af(i,e){i.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await Tw(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function wy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await Rp(i);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>dy(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>dy(e.remoteStore,o)),i._onlineComponents=e}async function Rp(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await af(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===z.FAILED_PRECONDITION||o.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;fr("Error using user provided cache. Falling back to memory cache: "+t),await af(i,new ku)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await af(i,new _A(void 0));return i._offlineComponents}async function ah(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(i,i._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await wy(i,new Nu))),i._onlineComponents}function Kw(i){return Rp(i).then(e=>e.persistence)}function Pp(i){return Rp(i).then(e=>e.localStore)}function Qw(i){return ah(i).then(e=>e.remoteStore)}function Cp(i){return ah(i).then(e=>e.syncEngine)}function TA(i){return ah(i).then(e=>e.datastore)}async function ea(i){const e=await ah(i),t=e.eventManager;return t.onListen=JS.bind(null,e.syncEngine),t.onUnlisten=ZS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eA.bind(null,e.syncEngine),t}function SA(i){return i.asyncQueue.enqueue(async()=>{const e=await Kw(i),t=await Qw(i);return e.setNetworkEnabled(!0),function(o){const a=ne(o);return a.k_.delete(0),Ku(a)}(t)})}function AA(i){return i.asyncQueue.enqueue(async()=>{const e=await Kw(i),t=await Qw(i);return e.setNetworkEnabled(!1),async function(o){const a=ne(o);a.k_.add(0),await oa(a),a.K_.set("Offline")}(t)})}function RA(i,e){const t=new Bt;return i.asyncQueue.enqueueAndForget(async()=>async function(o,a,c){try{const d=await function(_,v){const E=ne(_);return E.persistence.runTransaction("read document","readonly",A=>E.localDocuments.getDocument(A,v))}(o,a);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Q(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=la(d,`Failed to get document '${a} from cache`);c.reject(p)}}(await Pp(i),e,t)),t.promise}function Ww(i,e,t={}){const r=new Bt;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,_){const v=new oh({next:A=>{v.eu(),c.enqueueAndForget(()=>yp(a,E));const b=A.docs.has(d);!b&&A.fromCache?_.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&A.fromCache&&p&&p.source==="server"?_.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),E=new wp(ra(d.path),v,{includeMetadataChanges:!0,ua:!0});return _p(a,E)}(await ea(i),i.asyncQueue,e,t,r)),r.promise}function PA(i,e){const t=new Bt;return i.asyncQueue.enqueueAndForget(async()=>async function(o,a,c){try{const d=await zc(o,a,!0),p=new Uw(a,d.ds),_=p.ga(d.documents),v=p.applyChanges(_,!1);c.resolve(v.snapshot)}catch(d){const p=la(d,`Failed to execute query '${a} against cache`);c.reject(p)}}(await Pp(i),e,t)),t.promise}function Hw(i,e,t={}){const r=new Bt;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,_){const v=new oh({next:A=>{v.eu(),c.enqueueAndForget(()=>yp(a,E)),A.fromCache&&p.source==="server"?_.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),E=new wp(d,v,{includeMetadataChanges:!0,ua:!0});return _p(a,E)}(await ea(i),i.asyncQueue,e,t,r)),r.promise}function CA(i,e){const t=new oh(e);return i.asyncQueue.enqueueAndForget(async()=>function(o,a){ne(o).X_.add(a),a.next()}(await ea(i),t)),()=>{t.eu(),i.asyncQueue.enqueueAndForget(async()=>function(o,a){ne(o).X_.delete(a)}(await ea(i),t))}}function xA(i,e,t,r){const o=function(c,d){let p;return p=typeof c=="string"?Wv().encode(c):c,function(v,E){return new vA(v,E)}(function(v,E){if(v instanceof Uint8Array)return vy(v,E);if(v instanceof ArrayBuffer)return vy(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),d)}(t,Gu(e));i.asyncQueue.enqueueAndForget(async()=>{gA(await Cp(i),o,r)})}function VA(i,e){return i.asyncQueue.enqueue(async()=>function(r,o){const a=ne(r);return a.persistence.runTransaction("Get named query","readonly",c=>a.jr.getNamedQuery(c,o))}(await Pp(i),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(i,e,t){if(!t)throw new Q(z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Jw(i,e,t,r){if(e===!0&&r===!0)throw new Q(z.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Iy(i){if(!ee.isDocumentKey(i))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ty(i){if(ee.isDocumentKey(i))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function uh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ie()}function Fe(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uh(i);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Xw(i,e){if(e<=0)throw new Q(z.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qu{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AT;switch(r.type){case"firstParty":return new xT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Ey.get(t);r&&(H("ComponentProvider","Removing Datastore"),Ey.delete(t),r.terminate())}(this),Promise.resolve()}}function DA(i,e,t,r={}){var o;const a=(i=Fe(i,Qu))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=kt.MOCK_USER;else{d=GE(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new kt(_)}i._authCredentials=new RT(new ov(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class Zw{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zw(this.firestore,e,this._query)}},at=class e0{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new e0(this.firestore,e,this._key)}},Ii=class t0 extends rn{constructor(e,t,r){super(e,t,ra(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ee(e))}withConverter(e){return new t0(this.firestore,e,this._path)}};function n0(i,e,...t){if(i=vt(i),xp("collection","path",e),i instanceof Qu){const r=Ce.fromString(e,...t);return Ty(r),new Ii(i,null,r)}{if(!(i instanceof at||i instanceof Ii))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ce.fromString(e,...t));return Ty(r),new Ii(i.firestore,null,r)}}function kA(i,e){if(i=Fe(i,Qu),xp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rn(i,null,function(r){return new Ur(Ce.emptyPath(),r)}(e))}function Gc(i,e,...t){if(i=vt(i),arguments.length===1&&(e=av.newId()),xp("doc","path",e),i instanceof Qu){const r=Ce.fromString(e,...t);return Iy(r),new at(i,null,new ee(r))}{if(!(i instanceof at||i instanceof Ii))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ce.fromString(e,...t));return Iy(r),new at(i.firestore,i instanceof Ii?i.converter:null,new ee(r))}}function r0(i,e){return i=vt(i),e=vt(e),(i instanceof at||i instanceof Ii)&&(e instanceof at||e instanceof Ii)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function i0(i,e){return i=vt(i),e=vt(e),i instanceof rn&&e instanceof rn&&i.firestore===e.firestore&&Uu(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new dp(this,"async_queue_retry"),this.fu=()=>{const r=Cc();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Cc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Cc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Bt;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!bi(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw ft("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=gp.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.du.push(o),o}pu(){this.Au&&ie()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function kf(i){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of r)if(a in o&&typeof o[a]=="function")return!0;return!1}(i,["next","error","complete"])}class NA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=-1;let mt=class extends Qu{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Ay,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ay(e),this._firestoreClient=void 0,await e}}};function Ht(i){if(i._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||s0(i),i._firestoreClient}function s0(i){var e,t,r;const o=i._freezeSettings(),a=function(d,p,_,v){return new s1(d,p,_,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Yw(v.experimentalLongPollingOptions),v.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new IA(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}function OA(i,e){fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return o0(i,Nu.provider,{build:r=>new Gw(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function LA(i){fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();o0(i,Nu.provider,{build:t=>new yA(t,e.cacheSizeBytes)})}function o0(i,e,t){if((i=Fe(i,mt))._firestoreClient||i._terminated)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new Q(z.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},s0(i)}function MA(i){if(i._initialized&&!i._terminated)throw new Q(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bt;return i._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!hr.p())return Promise.resolve();const o=r+"main";await hr.delete(o)}(lp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function FA(i){return function(t){const r=new Bt;return t.asyncQueue.enqueueAndForget(async()=>sA(await Cp(t),r)),r.promise}(Ht(i=Fe(i,mt)))}function BA(i){return SA(Ht(i=Fe(i,mt)))}function UA(i){return AA(Ht(i=Fe(i,mt)))}function zA(i,e){const t=Ht(i=Fe(i,mt)),r=new NA;return xA(t,i._databaseId,e,r),r}function jA(i,e){return VA(Ht(i=Fe(i,mt)),e).then(t=>t?new rn(i,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(lt.fromBase64String(e))}catch(t){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mr(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ks=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=/^__.*__$/;class $A{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ia(e,this.data,t,this.fieldTransforms)}}class a0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function u0(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class ch{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new ch(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Lu(e),o}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Kc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(u0(this.Mu)&&qA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class GA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gu(e)}$u(e,t,r,o=!1){return new ch({Mu:e,methodName:t,Ku:r,path:nt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ns(i){const e=i._freezeSettings(),t=Gu(i._databaseId);return new GA(i._databaseId,!!e.ignoreUndefinedProperties,t)}function hh(i,e,t,r,o,a={}){const c=i.$u(a.merge||a.mergeFields?2:0,e,t,o);Mp("Data must be an object, but it was:",c,r);const d=h0(r,c);let p,_;if(a.merge)p=new pn(c.fieldMask),_=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const A=Nf(e,E,t);if(!c.contains(A))throw new Q(z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);f0(v,A)||v.push(A)}p=new pn(v),_=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,_=c.fieldTransforms;return new $A(new Ft(d),p,_)}class Wu extends ks{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wu}}function l0(i,e,t){return new ch({Mu:3,Ku:e.settings.Ku,methodName:i._methodName,Nu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dp extends ks{_toFieldTransform(e){return new ju(e.path,new Ko)}isEqual(e){return e instanceof Dp}}class kp extends ks{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=l0(this,e,!0),r=this.Uu.map(a=>bs(a,t)),o=new As(r);return new ju(e.path,o)}isEqual(e){return e instanceof kp&&wu(this.Uu,e.Uu)}}class Np extends ks{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=l0(this,e,!0),r=this.Uu.map(a=>bs(a,t)),o=new Rs(r);return new ju(e.path,o)}isEqual(e){return e instanceof Np&&wu(this.Uu,e.Uu)}}class bp extends ks{constructor(e,t){super(e),this.Wu=t}_toFieldTransform(e){const t=new Qo(e.serializer,Bv(e.serializer,this.Wu));return new ju(e.path,t)}isEqual(e){return e instanceof bp&&this.Wu===e.Wu}}function Op(i,e,t,r){const o=i.$u(1,e,t);Mp("Data must be an object, but it was:",o,r);const a=[],c=Ft.empty();Oi(r,(p,_)=>{const v=Fp(e,p,t);_=vt(_);const E=o.Bu(v);if(_ instanceof Wu)a.push(v);else{const A=bs(_,E);A!=null&&(a.push(v),c.set(v,A))}});const d=new pn(a);return new a0(c,d,o.fieldTransforms)}function Lp(i,e,t,r,o,a){const c=i.$u(1,e,t),d=[Nf(e,r,t)],p=[o];if(a.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(Nf(e,a[A])),p.push(a[A+1]);const _=[],v=Ft.empty();for(let A=d.length-1;A>=0;--A)if(!f0(_,d[A])){const b=d[A];let G=p[A];G=vt(G);const $=c.Bu(b);if(G instanceof Wu)_.push(b);else{const q=bs(G,$);q!=null&&(_.push(b),v.set(b,q))}}const E=new pn(_);return new a0(v,E,c.fieldTransforms)}function c0(i,e,t,r=!1){return bs(t,i.$u(r?4:3,e))}function bs(i,e){if(d0(i=vt(i)))return Mp("Unsupported field value:",e,i),h0(i,e);if(i instanceof ks)return function(r,o){if(!u0(o.Mu))throw o.qu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=bs(d,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(i,e)}return function(r,o){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bv(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Wo(o.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,a)}}if(r instanceof lh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mr)return{bytesValue:Jv(o.serializer,r._byteString)};if(r instanceof at){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:np(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Vp)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return Yf(d.serializer,p)})}}}}}}(r,o);throw o.qu(`Unsupported field value: ${uh(r)}`)}(i,e)}function h0(i,e){const t={};return vv(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(i,(r,o)=>{const a=bs(o,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function d0(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof it||i instanceof lh||i instanceof mr||i instanceof at||i instanceof ks||i instanceof Vp)}function Mp(i,e,t){if(!d0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=uh(t);throw r==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+r)}}function Nf(i,e,t){if((e=vt(e))instanceof Di)return e._internalPath;if(typeof e=="string")return Fp(i,e);throw Kc("Field path arguments must be of type string or ",i,!1,void 0,t)}const KA=new RegExp("[~\\*/\\[\\]]");function Fp(i,e,t){if(e.search(KA)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Di(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kc(i,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new Q(z.INVALID_ARGUMENT,d+i+p)}function f0(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QA extends bu{data(){return super.data()}}function dh(i,e){return typeof e=="string"?Fp(i,e):e instanceof Di?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bp{}class Hu extends Bp{}function _i(i,e,...t){let r=[];e instanceof Bp&&r.push(e),r=r.concat(t),function(a){const c=a.filter(p=>p instanceof Up).length,d=a.filter(p=>p instanceof fh).length;if(c>1||c>0&&d>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class fh extends Hu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fh(e,t,r)}_apply(e){const t=this._parse(e);return g0(e._query,t),new rn(e.firestore,e.converter,wf(e._query,t))}_parse(e){const t=Ns(e.firestore);return function(a,c,d,p,_,v,E){let A;if(_.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Py(E,v);const b=[];for(const G of E)b.push(Ry(p,a,G));A={arrayValue:{values:b}}}else A=Ry(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Py(E,v),A=c0(d,c,E,v==="in"||v==="not-in");return xe.create(_,v,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function WA(i,e,t){const r=e,o=dh("where",i);return fh._create(o,r,t)}class Up extends Bp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const d=a.getFlattenedFilters();for(const p of d)g0(c,p),c=wf(c,p)}(e._query,t),new rn(e.firestore,e.converter,wf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zp extends Hu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zp(e,t)}_apply(e){const t=function(o,a,c){if(o.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(a,c)}(e._query,this._field,this._direction);return new rn(e.firestore,e.converter,function(o,a){const c=o.explicitOrderBy.concat([a]);return new Ur(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function HA(i,e="asc"){const t=e,r=dh("orderBy",i);return zp._create(r,t)}class ph extends Hu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ph(e,t,r)}_apply(e){return new rn(e.firestore,e.converter,Lc(e._query,this._limit,this._limitType))}}function YA(i){return Xw("limit",i),ph._create("limit",i,"F")}function JA(i){return Xw("limitToLast",i),ph._create("limitToLast",i,"L")}class mh extends Hu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mh(e,t,r)}_apply(e){const t=m0(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(o,a){return new Ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,a,o.endAt)}(e._query,t))}}function XA(...i){return mh._create("startAt",i,!0)}function ZA(...i){return mh._create("startAfter",i,!1)}class gh extends Hu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gh(e,t,r)}_apply(e){const t=m0(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(o,a){return new Ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,a)}(e._query,t))}}function eR(...i){return gh._create("endBefore",i,!1)}function tR(...i){return gh._create("endAt",i,!0)}function m0(i,e,t,r){if(t[0]=vt(t[0]),t[0]instanceof bu)return function(a,c,d,p,_){if(!p)throw new Q(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const E of Fo(a))if(E.field.isKeyField())v.push(Ts(c,p.key));else{const A=p.data.field(E.field);if(Yc(A))throw new Q(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const b=E.field.canonicalString();throw new Q(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}v.push(A)}return new xi(v,_)}(i._query,i.firestore._databaseId,e,t[0]._document,r);{const o=Ns(i.firestore);return function(c,d,p,_,v,E){const A=c.explicitOrderBy;if(v.length>A.length)throw new Q(z.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let G=0;G<v.length;G++){const $=v[G];if(A[G].field.isKeyField()){if(typeof $!="string")throw new Q(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!Wf(c)&&$.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const q=c.path.child(Ce.fromString($));if(!ee.isDocumentKey(q))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const fe=new ee(q);b.push(Ts(d,fe))}else{const q=c0(p,_,$);b.push(q)}}return new xi(b,E)}(i._query,i.firestore._databaseId,o,e,t,r)}}function Ry(i,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wf(e)&&t.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ce.fromString(t));if(!ee.isDocumentKey(r))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ts(i,new ee(r))}if(t instanceof at)return Ts(i,t._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uh(t)}.`)}function Py(i,e){if(!Array.isArray(i)||i.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g0(i,e){const t=function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jp{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oi(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>tt(c.doubleValue));return new Vp(a)}convertGeoPoint(e){return new lh(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=Mr(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ce.fromString(e);ue(uw(r));const o=new Ri(r.get(1),r.get(3)),a=new ee(r.popFirst(5));return o.isEqual(t)||ft(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class nR extends jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Br=class extends bu{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},vu=class extends Br{data(e={}){return super.data(e)}},ki=class{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vs(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vu(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new vu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new vs(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new vu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new vs(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,v=-1;return d.type!==0&&(_=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:rR(d.type),doc:p,oldIndex:_,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function rR(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function _0(i,e){return i instanceof Br&&e instanceof Br?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ki&&e instanceof ki&&i._firestore===e._firestore&&i0(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(i){i=Fe(i,at);const e=Fe(i.firestore,mt);return Ww(Ht(e),i._key).then(t=>qp(e,i,t))}class Os extends jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}function sR(i){i=Fe(i,at);const e=Fe(i.firestore,mt),t=Ht(e),r=new Os(e);return RA(t,i._key).then(o=>new Br(e,r,i._key,o,new vs(o!==null&&o.hasLocalMutations,!0),i.converter))}function oR(i){i=Fe(i,at);const e=Fe(i.firestore,mt);return Ww(Ht(e),i._key,{source:"server"}).then(t=>qp(e,i,t))}function aR(i){i=Fe(i,rn);const e=Fe(i.firestore,mt),t=Ht(e),r=new Os(e);return p0(i._query),Hw(t,i._query).then(o=>new ki(e,r,i,o))}function uR(i){i=Fe(i,rn);const e=Fe(i.firestore,mt),t=Ht(e),r=new Os(e);return PA(t,i._query).then(o=>new ki(e,r,i,o))}function lR(i){i=Fe(i,rn);const e=Fe(i.firestore,mt),t=Ht(e),r=new Os(e);return Hw(t,i._query,{source:"server"}).then(o=>new ki(e,r,i,o))}function Cy(i,e,t){i=Fe(i,at);const r=Fe(i.firestore,mt),o=_h(i.converter,e,t);return Yu(r,[hh(Ns(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,rt.none())])}function xy(i,e,t,...r){i=Fe(i,at);const o=Fe(i.firestore,mt),a=Ns(o);let c;return c=typeof(e=vt(e))=="string"||e instanceof Di?Lp(a,"updateDoc",i._key,e,t,r):Op(a,"updateDoc",i._key,e),Yu(o,[c.toMutation(i._key,rt.exists(!0))])}function cR(i){return Yu(Fe(i.firestore,mt),[new sa(i._key,rt.none())])}function hR(i,e){const t=Fe(i.firestore,mt),r=Gc(i),o=_h(i.converter,e);return Yu(t,[hh(Ns(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,rt.exists(!1))]).then(()=>r)}function y0(i,...e){var t,r,o;i=vt(i);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||kf(e[c])||(a=e[c],c++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(kf(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[c+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,_,v;if(i instanceof at)_=Fe(i.firestore,mt),v=ra(i._key.path),p={next:E=>{e[c]&&e[c](qp(_,i,E))},error:e[c+1],complete:e[c+2]};else{const E=Fe(i,rn);_=Fe(E.firestore,mt),v=E._query;const A=new Os(_);p={next:b=>{e[c]&&e[c](new ki(_,A,E,b))},error:e[c+1],complete:e[c+2]},p0(i._query)}return function(A,b,G,$){const q=new oh($),fe=new wp(b,q,G);return A.asyncQueue.enqueueAndForget(async()=>_p(await ea(A),fe)),()=>{q.eu(),A.asyncQueue.enqueueAndForget(async()=>yp(await ea(A),fe))}}(Ht(_),v,d,p)}function dR(i,e){return CA(Ht(i=Fe(i,mt)),kf(e)?e:{next:e})}function Yu(i,e){return function(r,o){const a=new Bt;return r.asyncQueue.enqueueAndForget(async()=>tA(await Cp(r),o,a)),a.promise}(Ht(i),e)}function qp(i,e,t){const r=t.docs.get(e._key),o=new Os(i);return new Br(i,o,e._key,r,new vs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pR=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ns(e)}set(e,t,r){this._verifyNotCommitted();const o=vi(e,this._firestore),a=_h(o.converter,t,r),c=hh(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,rt.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const a=vi(e,this._firestore);let c;return c=typeof(t=vt(t))=="string"||t instanceof Di?Lp(this._dataReader,"WriteBatch.update",a._key,t,r,o):Op(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,rt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vi(e,this._firestore);return this._mutations=this._mutations.concat(new sa(t._key,rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function vi(i,e){if((i=vt(i)).firestore!==e)throw new Q(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ns(t)}get(t){const r=vi(t,this._firestore),o=new nR(this._firestore);return this._transaction.lookup([r._key]).then(a=>{if(!a||a.length!==1)return ie();const c=a[0];if(c.isFoundDocument())return new bu(this._firestore,o,c.key,c,r.converter);if(c.isNoDocument())return new bu(this._firestore,o,r._key,null,r.converter);throw ie()})}set(t,r,o){const a=vi(t,this._firestore),c=_h(a.converter,r,o),d=hh(this._dataReader,"Transaction.set",a._key,c,a.converter!==null,o);return this._transaction.set(a._key,d),this}update(t,r,o,...a){const c=vi(t,this._firestore);let d;return d=typeof(r=vt(r))=="string"||r instanceof Di?Lp(this._dataReader,"Transaction.update",c._key,r,o,a):Op(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,d),this}delete(t){const r=vi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vi(e,this._firestore),r=new Os(this._firestore);return super.get(e).then(o=>new Br(this._firestore,r,t._key,o._document,new vs(!1,!1),t.converter))}};function gR(i,e,t){i=Fe(i,mt);const r=Object.assign(Object.assign({},fR),t);return function(a){if(a.maxAttempts<1)throw new Q(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,d){const p=new Bt;return a.asyncQueue.enqueueAndForget(async()=>{const _=await TA(a);new EA(a.asyncQueue,_,d,c,p).cu()}),p.promise}(Ht(i),o=>e(new mR(i,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return new Wu("deleteField")}function yR(){return new Dp("serverTimestamp")}function vR(...i){return new kp("arrayUnion",i)}function wR(...i){return new Np("arrayRemove",i)}function ER(i){return new bp("increment",i)}(function(e,t=!0){(function(o){na=o})(Uf),jo(new Is("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new mt(new PT(r.getProvider("auth-internal")),new DT(r.getProvider("app-check-internal")),function(_,v){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(_.options.projectId,v)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Or(v_,"4.7.5",e),Or(v_,"4.7.5","esm2017")})();const IR="@firebase/firestore-compat",TR="0.3.40";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(i,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Q("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){if(typeof Uint8Array>"u")throw new Q("unimplemented","Uint8Arrays are not available in this environment.")}function Dy(){if(!r1())throw new Q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ou{constructor(e){this._delegate=e}static fromBase64String(e){return Dy(),new Ou(mr.fromBase64String(e))}static fromUint8Array(e){return Vy(),new Ou(mr.fromUint8Array(e))}toBase64(){return Dy(),this._delegate.toBase64()}toUint8Array(){return Vy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(i){return SR(i,["next","error","complete"])}function SR(i,e){if(typeof i!="object"||i===null)return!1;const t=i;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{enableIndexedDbPersistence(e,t){return OA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return LA(e._delegate)}clearIndexedDbPersistence(e){return MA(e._delegate)}}class v0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ri||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){DA(this._delegate,e,t,r)}enableNetwork(){return BA(this._delegate)}disableNetwork(){return UA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Jw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return FA(this._delegate)}onSnapshotsInSync(e){return dR(this._delegate,e)}get app(){if(!this._appCompat)throw new Q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ta(this,n0(this._delegate,e))}catch(t){throw tn(t,"collection()","Firestore.collection()")}}doc(e){try{return new bn(this,Gc(this._delegate,e))}catch(t){throw tn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new en(this,kA(this._delegate,e))}catch(t){throw tn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return gR(this._delegate,t=>e(new w0(this,t)))}batch(){return Ht(this._delegate),new E0(new pR(this._delegate,e=>Yu(this._delegate,e)))}loadBundle(e){return zA(this._delegate,e)}namedQuery(e){return jA(this._delegate,e).then(t=>t?new en(this,t):null)}}class yh extends jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(new mr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bn.forKey(t,this.firestore,null)}}function RR(i){TT(i)}class w0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yh(e)}get(e){const t=ws(e);return this._delegate.get(t).then(r=>new Lu(this._firestore,new Br(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=ws(e);return r?($p("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const a=ws(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...o),this}delete(e){const t=ws(e);return this._delegate.delete(t),this}}class E0{constructor(e){this._delegate=e}set(e,t,r){const o=ws(e);return r?($p("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const a=ws(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...o),this}delete(e){const t=ws(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vs{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new vu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mu(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vs.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let a=o.get(t);return a||(a=new Vs(e,new yh(e),t),o.set(t,a)),a}}Vs.INSTANCES=new WeakMap;class bn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yh(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bn(t,new at(t._delegate,r,new ee(e)))}static forKey(e,t,r){return new bn(t,new at(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ta(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ta(this.firestore,n0(this._delegate,e))}catch(t){throw tn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=vt(e),e instanceof at?r0(this._delegate,e):!1}set(e,t){t=$p("DocumentReference.set",t);try{return t?Cy(this._delegate,e,t):Cy(this._delegate,e)}catch(r){throw tn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?xy(this._delegate,e):xy(this._delegate,e,t,...r)}catch(o){throw tn(o,"updateDoc()","DocumentReference.update()")}}delete(){return cR(this._delegate)}onSnapshot(...e){const t=I0(e),r=T0(e,o=>new Lu(this.firestore,new Br(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return y0(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=sR(this._delegate):(e==null?void 0:e.source)==="server"?t=oR(this._delegate):t=iR(this._delegate),t.then(r=>new Lu(this.firestore,new Br(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new bn(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function tn(i,e,t){return i.message=i.message.replace(e,t),i}function I0(i){for(const e of i)if(typeof e=="object"&&!bf(e))return e;return{}}function T0(i,e){var t,r;let o;return bf(i[0])?o=i[0]:bf(i[1])?o=i[1]:typeof i[0]=="function"?o={next:i[0],error:i[1],complete:i[2]}:o={next:i[1],error:i[2],complete:i[3]},{next:a=>{o.next&&o.next(e(a))},error:(t=o.error)===null||t===void 0?void 0:t.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}class Lu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _0(this._delegate,e._delegate)}}class Mu extends Lu{data(e){const t=this._delegate.data(e);return this._delegate._converter||ST(t!==void 0),t}}class en{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yh(e)}where(e,t,r){try{return new en(this.firestore,_i(this._delegate,WA(e,t,r)))}catch(o){throw tn(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new en(this.firestore,_i(this._delegate,HA(e,t)))}catch(r){throw tn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new en(this.firestore,_i(this._delegate,YA(e)))}catch(t){throw tn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new en(this.firestore,_i(this._delegate,JA(e)))}catch(t){throw tn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new en(this.firestore,_i(this._delegate,XA(...e)))}catch(t){throw tn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new en(this.firestore,_i(this._delegate,ZA(...e)))}catch(t){throw tn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new en(this.firestore,_i(this._delegate,eR(...e)))}catch(t){throw tn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new en(this.firestore,_i(this._delegate,tR(...e)))}catch(t){throw tn(t,"endAt()","Query.endAt()")}}isEqual(e){return i0(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=uR(this._delegate):(e==null?void 0:e.source)==="server"?t=lR(this._delegate):t=aR(this._delegate),t.then(r=>new Of(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=I0(e),r=T0(e,o=>new Of(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return y0(this._delegate,t,r)}withConverter(e){return new en(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class PR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Of{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new en(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Mu(this._firestore,r))})}isEqual(e){return _0(this._delegate,e._delegate)}}class ta extends en{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bn(this.firestore,e):null}doc(e){try{return e===void 0?new bn(this.firestore,Gc(this._delegate)):new bn(this.firestore,Gc(this._delegate,e))}catch(t){throw tn(t,"doc()","CollectionReference.doc()")}}add(e){return hR(this._delegate,e).then(t=>new bn(this.firestore,t))}isEqual(e){return r0(this._delegate,e._delegate)}withConverter(e){return new ta(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ws(i){return Fe(i,at)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(...e){this._delegate=new Di(...e)}static documentId(){return new Gp(nt.keyField().canonicalString())}isEqual(e){return e=vt(e),e instanceof Di?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{static serverTimestamp(){const e=yR();return e._methodName="FieldValue.serverTimestamp",new ys(e)}static delete(){const e=_R();return e._methodName="FieldValue.delete",new ys(e)}static arrayUnion(...e){const t=vR(...e);return t._methodName="FieldValue.arrayUnion",new ys(t)}static arrayRemove(...e){const t=wR(...e);return t._methodName="FieldValue.arrayRemove",new ys(t)}static increment(e){const t=ER(e);return t._methodName="FieldValue.increment",new ys(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={Firestore:v0,GeoPoint:lh,Timestamp:it,Blob:Ou,Transaction:w0,WriteBatch:E0,DocumentReference:bn,DocumentSnapshot:Lu,Query:en,QueryDocumentSnapshot:Mu,QuerySnapshot:Of,CollectionReference:ta,FieldPath:Gp,FieldValue:ys,setLogLevel:RR,CACHE_SIZE_UNLIMITED:bA};function xR(i,e){i.INTERNAL.registerComponent(new Is("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},CR)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(i){xR(i,(e,t)=>new v0(e,t,new AR)),i.registerVersion(IR,TR)}VR(Wc);const DR={apiKey:"AIzaSyCCZr7PiBWFBMrKq8L_lvMn-P5RYND0Qgw",authDomain:"twilliams-survey-9d70e.firebaseapp.com",projectId:"twilliams-survey-9d70e",storageBucket:"twilliams-survey-9d70e.firebasestorage.app",messagingSenderId:"1036599622426",appId:"1:1036599622426:web:bdf692738c0ca080e5caa3",measurementId:"G-24618KVYEM"};Wc.initializeApp(DR);const kR=Wc.firestore(),NR=({title:i,children:e})=>{const[t,r]=uf.useState(!1),o="https://simpliservicesut.com/",a=async c=>{c.preventDefault();const d=c.target,p=new FormData(d),_={};p.forEach((v,E)=>{_[E]=v.toString()}),_.timestamp=new Date().toISOString();try{await kR.collection("formSubmissions").add(_),r(!0),d.reset(),setTimeout(()=>{window.location.href=o},1e3)}catch(v){console.error("Error submitting form:",v)}};return Me.jsx(Me.Fragment,{children:t?Me.jsxs("div",{className:"displayMessage",children:[Me.jsx("h2",{children:"Submitted Successfully!"}),Me.jsxs("p",{children:["Redirecting to ",Me.jsx("a",{href:o,children:o})]})]}):Me.jsxs("form",{onSubmit:a,children:[Me.jsx("h2",{children:i}),e,Me.jsx("button",{type:"submit",children:"Submit"})]})})},ur=({title:i,type:e,required:t})=>{const[r,o]=uf.useState(""),[a,c]=uf.useState(""),d=i.replace(/[\s/]+/g,"_").toLowerCase(),p=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,_=/^\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}$/,v=()=>{e==="email"&&!p.test(r)?c("Please enter a valid email address: email@email.com"):e==="tel"&&!_.test(r)?c("Please enter a valid phone number: (123) 456-7890"):c("")};return Me.jsxs("div",{className:"input-field",children:[Me.jsx("p",{children:i}),Me.jsx("input",{id:d,type:e,name:d,required:t,onChange:E=>o(E.target.value),onBlur:v}),Me.jsx("span",{className:"input-error",children:a})]})},ky=({children:i})=>Me.jsx("div",{className:"input-row",children:i}),bR=({title:i})=>{const e=i.replace(/\s+/g,"_").toLowerCase();return Me.jsxs("div",{className:"input-field",children:[Me.jsx("p",{children:i}),Me.jsx("textarea",{id:e,name:e})]})};function OR(){return Me.jsxs(NR,{title:"Survey",children:[Me.jsxs(ky,{children:[Me.jsx(ur,{title:"First Name",type:"text",required:!0}),Me.jsx(ur,{title:"Last Name",type:"text",required:!0})]}),Me.jsx(ur,{title:"Email Address",type:"email",required:!0}),Me.jsx(ur,{title:"Phone Number",type:"tel",required:!0}),Me.jsx(ur,{title:"Street Address",type:"text",required:!0}),Me.jsx(ur,{title:"Apartment/Suite Number",type:"text"}),Me.jsxs(ky,{children:[Me.jsx(ur,{title:"City",type:"text",required:!0}),Me.jsx(ur,{title:"State",type:"text",required:!0}),Me.jsx(ur,{title:"Zip Code",type:"text",required:!0}),Me.jsx(ur,{title:"Country",type:"text",required:!0})]}),Me.jsx(bR,{title:"Free Response"})]})}OE.createRoot(document.getElementById("root")).render(Me.jsx(OR,{}));
